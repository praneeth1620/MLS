{"version":3,"file":"index.cjs","sources":["../src/utils/propMigration.ts","../node_modules/.pnpm/cssfilter@0.0.10/node_modules/cssfilter/lib/default.js","../node_modules/.pnpm/cssfilter@0.0.10/node_modules/cssfilter/lib/util.js","../node_modules/.pnpm/cssfilter@0.0.10/node_modules/cssfilter/lib/parser.js","../node_modules/.pnpm/cssfilter@0.0.10/node_modules/cssfilter/lib/css.js","../node_modules/.pnpm/cssfilter@0.0.10/node_modules/cssfilter/lib/index.js","../node_modules/.pnpm/xss@1.0.15/node_modules/xss/lib/util.js","../node_modules/.pnpm/xss@1.0.15/node_modules/xss/lib/default.js","../node_modules/.pnpm/xss@1.0.15/node_modules/xss/lib/parser.js","../node_modules/.pnpm/xss@1.0.15/node_modules/xss/lib/xss.js","../node_modules/.pnpm/xss@1.0.15/node_modules/xss/lib/index.js","../src/components/common/themes/index.ts","../src/utils/index.ts","../src/utils/validation.ts","../node_modules/.pnpm/dayjs@1.11.18/node_modules/dayjs/dayjs.min.js","../node_modules/.pnpm/use-debounce@10.0.6_react@19.2.0/node_modules/use-debounce/dist/index.module.js","../src/utils/mediaQueryUtils.ts","../src/components/effects/useMatchMedia.ts","../src/models/TimelineI18n.ts","../src/hooks/useI18n.ts","../src/utils/textResolver.ts","../src/components/contexts/TimelineContextProvider.tsx","../node_modules/.pnpm/classnames@2.5.1/node_modules/classnames/index.js","../src/components/effects/useNewScrollPosition.ts","../src/hooks/useSlideshowProgress.ts","../node_modules/.pnpm/@vanilla-extract+recipes@0.5.7_@vanilla-extract+css@1.17.4/node_modules/@vanilla-extract/recipes/dist/createRuntimeFn-62c9670f.esm.js","../node_modules/.pnpm/@vanilla-extract+private@1.0.9/node_modules/@vanilla-extract/private/dist/vanilla-extract-private.esm.js","../node_modules/.pnpm/@vanilla-extract+dynamic@2.1.5/node_modules/@vanilla-extract/dynamic/dist/vanilla-extract-dynamic.esm.js","../src/styles/theme-bridge.ts","../src/components/icons/arrow-down.tsx","../src/components/icons/check.tsx","../src/components/icons/chev-down.tsx","../src/components/icons/chev-left.tsx","../src/components/icons/chev-right.tsx","../src/components/icons/close.tsx","../src/components/icons/layout.tsx","../src/components/icons/maximize.tsx","../src/components/icons/minimize.tsx","../src/components/icons/minus.tsx","../src/components/icons/moon.tsx","../src/components/icons/plus.tsx","../src/components/icons/stop.tsx","../src/components/icons/sun.tsx","../src/components/icons/para.tsx","../src/components/icons/chevs-left.tsx","../src/components/icons/chevs-right.tsx","../src/components/icons/replay-icon.tsx","../src/components/timeline-elements/timeline-control/timeline-control.tsx","../src/hooks/useFullscreen.ts","../src/components/timeline-elements/fullscreen-button/index.tsx","../src/utils/propUtils.ts","../src/components/timeline-elements/fullscreen-control/index.tsx","../src/components/elements/list/list-item.tsx","../src/components/elements/list/list.tsx","../src/hooks/utils.ts","../src/hooks/useOutsideClick.ts","../src/hooks/useEscapeKey.ts","../src/components/effects/useCloseClickOutside.ts","../src/components/elements/popover/index.tsx","../src/components/timeline/timeline-popover-elements.tsx","../src/components/timeline/timeline-toolbar.tsx","../src/utils/timelineUtils.ts","../src/hooks/useTimelineSearch.ts","../src/hooks/useTimelineKeyboardNavigation.ts","../src/hooks/useTimelineScrolling.ts","../src/hooks/useTimelineItemNavigation.ts","../src/hooks/useTimelineNavigation.ts","../src/hooks/useTimelineMode.ts","../src/utils/throttle.ts","../src/hooks/useTimelineScroll.ts","../src/hooks/useTimelineMedia.ts","../src/components/fonts/google-fonts.ts","../src/components/fonts/font-provider.tsx","../src/components/timeline-elements/timeline-item-title/timeline-card-title.tsx","../src/components/timeline-elements/timeline-card/hooks/useTimelineCard.ts","../src/components/timeline-elements/timeline-card/timeline-point/timeline-point.tsx","../src/utils/comparison.ts","../src/components/effects/useSlideshow.ts","../src/hooks/useCardSize.ts","../src/hooks/useFocusManager.ts","../src/components/timeline-elements/timeline-card-media/hooks/useMediaLoad.ts","../src/components/timeline-elements/timeline-card-media/hooks/useYouTubeDetection.ts","../src/components/timeline-elements/timeline-card-media/hooks/useToggleControls.ts","../src/components/timeline-elements/timeline-card-media/hooks/useViewOptions.ts","../src/components/timeline-elements/timeline-card-media/components/ErrorMessage.tsx","../src/components/timeline-elements/timeline-card-media/components/VideoPlayer.tsx","../src/components/timeline-elements/timeline-card-media/components/YoutubePlayer.tsx","../src/components/timeline-elements/timeline-card-media/components/ImageDisplay.tsx","../src/components/timeline-elements/timeline-card-media/components/MediaContent.tsx","../src/components/timeline-elements/memoized/title-memo.tsx","../src/components/timeline-elements/timeline-card-media/timeline-card-media-buttons.tsx","../src/components/timeline-elements/memoized/show-hide-button.tsx","../src/components/timeline-elements/memoized/expand-button-memo.tsx","../src/components/timeline-elements/memoized/subtitle-memo.tsx","../src/hooks/useBackground.ts","../src/hooks/useMeasureHeight.ts","../src/components/timeline-elements/memoized/details-text-memo.tsx","../src/components/timeline-elements/timeline-card-media/components/ContentDisplay.tsx","../src/components/timeline-elements/timeline-card-media/timeline-card-media.tsx","../src/components/timeline-elements/timeline-card-content/content-footer.tsx","../src/components/timeline-elements/timeline-card-content/content-header.tsx","../src/components/timeline-elements/timeline-card-content/text-or-content.tsx","../src/components/timeline-elements/timeline-card-content/details-text.tsx","../src/components/timeline-elements/nested-timeline-renderer/nested-timeline-cards.tsx","../src/components/timeline-elements/nested-timeline-renderer/nested-timeline-renderer.tsx","../src/components/timeline-elements/timeline-card-content/timeline-card-content.tsx","../src/components/timeline-elements/timeline-card/timeline-card-portal/timeline-card-portal.tsx","../src/components/timeline-elements/timeline-card/timeline-horizontal-card.tsx","../src/components/timeline-horizontal/timeline-horizontal.tsx","../src/components/timeline-vertical/timeline-point.tsx","../src/components/timeline-vertical/timeline-vertical-item.tsx","../src/components/timeline-vertical/timeline-vertical.tsx","../src/components/timeline/TimelineView.tsx","../src/components/timeline/timeline.tsx","../src/components/common/error-boundary/TimelineErrorBoundary.tsx","../src/components/index.tsx"],"sourcesContent":["/**\n * Backward compatibility utilities for migrating from old to new prop structure\n */\n\nimport {\n  TimelinePropsV2,\n  LegacyTimelineProps,\n} from '../models/TimelinePropsV2';\nimport { TimelineProps } from '../models/TimelineModel';\n\n/**\n * Maps legacy props to new grouped structure\n */\nexport function migrateLegacyProps(\n  legacyProps: TimelineProps,\n): TimelinePropsV2 {\n  const newProps: any = {\n    // Core props remain the same\n    items: legacyProps.items || [],\n    mode: mapLegacyMode(legacyProps.mode),\n    children: legacyProps.children,\n    theme: legacyProps.theme,\n    activeItemIndex: legacyProps.activeItemIndex,\n    allowDynamicUpdate: legacyProps.allowDynamicUpdate,\n    id: legacyProps.uniqueId,\n    onItemSelected: legacyProps.onItemSelected,\n    onScrollEnd: legacyProps.onScrollEnd,\n    onThemeChange: legacyProps.onThemeChange,\n    onRestartSlideshow: legacyProps.onRestartSlideshow,\n  };\n\n  // Layout configuration\n  if (hasLayoutProps(legacyProps)) {\n    newProps.layout = {\n      cardWidth: legacyProps.cardWidth,\n      cardHeight: legacyProps.cardHeight,\n      pointSize: legacyProps.timelinePointDimension,\n      lineWidth: legacyProps.lineWidth,\n      itemWidth: legacyProps.itemWidth,\n      responsive:\n        legacyProps.responsiveBreakPoint !== undefined ||\n        legacyProps.enableBreakPoint !== undefined\n          ? {\n              ...(legacyProps.responsiveBreakPoint !== undefined && {\n                breakpoint: legacyProps.responsiveBreakPoint,\n              }),\n              ...(legacyProps.enableBreakPoint !== undefined && {\n                enabled: legacyProps.enableBreakPoint,\n              }),\n            }\n          : undefined,\n      positioning:\n        mapLegacyCardPosition(legacyProps.cardPositionHorizontal) !==\n          undefined || legacyProps.flipLayout !== undefined\n          ? {\n              ...(mapLegacyCardPosition(legacyProps.cardPositionHorizontal) !==\n                undefined && {\n                cardPosition: mapLegacyCardPosition(\n                  legacyProps.cardPositionHorizontal,\n                ),\n              }),\n              ...(legacyProps.flipLayout !== undefined && {\n                flipLayout: legacyProps.flipLayout,\n              }),\n            }\n          : undefined,\n      timelineHeight: legacyProps.timelineHeight,\n    };\n  }\n\n  // Interaction configuration\n  if (hasInteractionProps(legacyProps)) {\n    newProps.interaction = {\n      ...(legacyProps.disableNavOnKey === true && {\n        keyboardNavigation: false,\n      }),\n      ...(legacyProps.disableClickOnCircle === true && { pointClick: false }),\n      ...(legacyProps.disableAutoScrollOnClick === true && {\n        autoScroll: false,\n      }),\n      ...(legacyProps.focusActiveItemOnLoad !== undefined && {\n        focusOnLoad: legacyProps.focusActiveItemOnLoad,\n      }),\n      ...(legacyProps.highlightCardsOnHover !== undefined && {\n        cardHover: legacyProps.highlightCardsOnHover,\n      }),\n      ...(legacyProps.disableInteraction !== undefined && {\n        disabled: legacyProps.disableInteraction,\n      }),\n    };\n  }\n\n  // Content configuration\n  if (hasContentProps(legacyProps)) {\n    newProps.content = {\n      allowHTML: legacyProps.parseDetailsAsHTML,\n      readMore: legacyProps.useReadMore,\n      textOverlay: legacyProps.textOverlay,\n      dateFormat: legacyProps.titleDateFormat,\n      compactText: legacyProps.textDensity === 'HIGH',\n      semanticTags: legacyProps.semanticTags\n        ? {\n            ...(legacyProps.semanticTags.cardTitle && {\n              title: legacyProps.semanticTags.cardTitle,\n            }),\n            ...(legacyProps.semanticTags.cardSubtitle && {\n              subtitle: legacyProps.semanticTags.cardSubtitle,\n            }),\n          }\n        : undefined,\n    };\n  }\n\n  // Display configuration\n  if (hasDisplayProps(legacyProps)) {\n    newProps.display = {\n      borderless: legacyProps.borderLessCards,\n      cardsDisabled: legacyProps.cardLess,\n      pointsDisabled: legacyProps.disableTimelinePoint,\n      pointShape: legacyProps.timelinePointShape,\n      allCardsVisible: legacyProps.showAllCardsHorizontal,\n      toolbar:\n        legacyProps.disableToolbar === true ||\n        legacyProps.toolbarPosition !== undefined\n          ? {\n              ...(legacyProps.disableToolbar === true && { enabled: false }),\n              ...(legacyProps.toolbarPosition !== undefined && {\n                position: legacyProps.toolbarPosition,\n              }),\n            }\n          : undefined,\n      scrollable: legacyProps.scrollable,\n    };\n  }\n\n  // Media configuration\n  if (hasMediaProps(legacyProps)) {\n    newProps.media = {\n      ...(legacyProps.mediaHeight !== undefined && {\n        height: legacyProps.mediaHeight,\n      }),\n      ...(legacyProps.mediaSettings?.align !== undefined && {\n        align: legacyProps.mediaSettings.align,\n      }),\n      ...(legacyProps.mediaSettings?.fit !== undefined && {\n        fit: legacyProps.mediaSettings.fit,\n      }),\n    };\n  }\n\n  // Animation configuration\n  if (hasAnimationProps(legacyProps)) {\n    newProps.animation = {\n      slideshow: {\n        ...(legacyProps.slideShow !== undefined && {\n          enabled: legacyProps.slideShow,\n        }),\n        ...(legacyProps.slideItemDuration !== undefined && {\n          duration: legacyProps.slideItemDuration,\n        }),\n        ...(legacyProps.slideShowType !== undefined && {\n          type: mapLegacySlideshowType(legacyProps.slideShowType),\n        }),\n        ...(legacyProps.showProgressOnSlideshow !== undefined && {\n          showProgress: legacyProps.showProgressOnSlideshow,\n        }),\n        ...(legacyProps.showOverallSlideshowProgress !== undefined && {\n          showOverallProgress: legacyProps.showOverallSlideshowProgress,\n        }),\n      },\n    };\n  }\n\n  // Style configuration\n  if (hasStyleProps(legacyProps)) {\n    newProps.style = {\n      ...(legacyProps.classNames !== undefined && {\n        classNames: legacyProps.classNames,\n      }),\n      ...(legacyProps.fontSizes !== undefined && {\n        fontSizes: legacyProps.fontSizes,\n      }),\n    };\n  }\n\n  // Accessibility configuration\n  if (hasAccessibilityProps(legacyProps)) {\n    newProps.accessibility = {\n      ...(legacyProps.buttonTexts !== undefined && {\n        buttonTexts: legacyProps.buttonTexts,\n      }),\n    };\n  }\n\n  // Dark mode configuration\n  if (\n    legacyProps.darkMode !== undefined ||\n    legacyProps.enableDarkToggle !== undefined\n  ) {\n    newProps.darkMode = {\n      ...(legacyProps.darkMode !== undefined && {\n        enabled: legacyProps.darkMode,\n      }),\n      ...(legacyProps.enableDarkToggle !== undefined && {\n        showToggle: legacyProps.enableDarkToggle,\n      }),\n    };\n  }\n\n  return newProps as TimelinePropsV2;\n}\n\n/**\n * Issues deprecation warnings for legacy props\n */\nexport function warnDeprecatedProps(props: TimelineProps): void {\n  const deprecationWarnings: string[] = [];\n\n  // Check for deprecated layout props\n  if (props.timelinePointDimension !== undefined) {\n    deprecationWarnings.push(\n      'timelinePointDimension is deprecated. Use layout.pointSize instead.',\n    );\n  }\n  if (props.cardPositionHorizontal !== undefined) {\n    deprecationWarnings.push(\n      'cardPositionHorizontal is deprecated. Use layout.positioning.cardPosition instead.',\n    );\n  }\n\n  // Check for deprecated interaction props\n  if (props.disableNavOnKey !== undefined) {\n    deprecationWarnings.push(\n      'disableNavOnKey is deprecated. Use interaction.keyboardNavigation instead.',\n    );\n  }\n  if (props.disableClickOnCircle !== undefined) {\n    deprecationWarnings.push(\n      'disableClickOnCircle is deprecated. Use interaction.pointClick instead.',\n    );\n  }\n  if (props.disableAutoScrollOnClick !== undefined) {\n    deprecationWarnings.push(\n      'disableAutoScrollOnClick is deprecated. Use interaction.autoScroll instead.',\n    );\n  }\n\n  // Check for deprecated content props\n  if (props.parseDetailsAsHTML !== undefined) {\n    deprecationWarnings.push(\n      'parseDetailsAsHTML is deprecated. Use content.allowHTML instead.',\n    );\n  }\n  if (props.textDensity !== undefined) {\n    deprecationWarnings.push(\n      'textDensity is deprecated. Use content.compactText instead.',\n    );\n  }\n\n  // Check for deprecated display props\n  if (props.borderLessCards !== undefined) {\n    deprecationWarnings.push(\n      'borderLessCards is deprecated. Use display.borderless instead.',\n    );\n  }\n  if (props.cardLess !== undefined) {\n    deprecationWarnings.push(\n      'cardLess is deprecated. Use display.cardsDisabled instead.',\n    );\n  }\n  if (props.showAllCardsHorizontal !== undefined) {\n    deprecationWarnings.push(\n      'showAllCardsHorizontal is deprecated. Use display.allCardsVisible instead.',\n    );\n  }\n\n  // Check for removed props\n  if (props.noUniqueId !== undefined) {\n    deprecationWarnings.push(\n      'noUniqueId is deprecated and no longer needed. Use the id prop if you need custom IDs.',\n    );\n  }\n  if (props.isChild !== undefined) {\n    deprecationWarnings.push(\n      'isChild is an internal prop and should not be used directly.',\n    );\n  }\n\n  // Log warnings in development\n  if (\n    process.env.NODE_ENV === 'development' &&\n    deprecationWarnings.length > 0\n  ) {\n    console.warn(\n      'React Chrono: Deprecated props detected. Please migrate to the new grouped prop structure:\\n' +\n        deprecationWarnings.map((warning) => `  • ${warning}`).join('\\n') +\n        '\\n\\nFor migration guide, visit: https://github.com/prabhuignoto/react-chrono/blob/master/MIGRATION.md',\n    );\n  }\n}\n\n// Helper functions for prop detection\n\nfunction hasLayoutProps(props: TimelineProps): boolean {\n  return !!(\n    props.cardWidth ||\n    props.cardHeight ||\n    props.timelinePointDimension ||\n    props.lineWidth ||\n    props.itemWidth ||\n    props.responsiveBreakPoint ||\n    props.enableBreakPoint ||\n    props.cardPositionHorizontal ||\n    props.flipLayout\n  );\n}\n\nfunction hasInteractionProps(props: TimelineProps): boolean {\n  return !!(\n    props.disableNavOnKey !== undefined ||\n    props.disableClickOnCircle !== undefined ||\n    props.disableAutoScrollOnClick !== undefined ||\n    props.focusActiveItemOnLoad !== undefined ||\n    props.highlightCardsOnHover !== undefined ||\n    props.disableInteraction !== undefined\n  );\n}\n\nfunction hasContentProps(props: TimelineProps): boolean {\n  return !!(\n    props.parseDetailsAsHTML !== undefined ||\n    props.useReadMore !== undefined ||\n    props.textOverlay !== undefined ||\n    props.titleDateFormat ||\n    props.textDensity ||\n    props.semanticTags\n  );\n}\n\nfunction hasDisplayProps(props: TimelineProps): boolean {\n  return !!(\n    props.borderLessCards !== undefined ||\n    props.cardLess !== undefined ||\n    props.disableTimelinePoint !== undefined ||\n    props.timelinePointShape ||\n    props.showAllCardsHorizontal !== undefined ||\n    props.disableToolbar !== undefined ||\n    props.toolbarPosition ||\n    props.scrollable !== undefined\n  );\n}\n\nfunction hasMediaProps(props: TimelineProps): boolean {\n  return !!(props.mediaHeight || props.mediaSettings);\n}\n\nfunction hasAnimationProps(props: TimelineProps): boolean {\n  return !!(\n    props.slideShow !== undefined ||\n    props.slideItemDuration ||\n    props.slideShowType ||\n    props.showProgressOnSlideshow !== undefined ||\n    props.showOverallSlideshowProgress !== undefined\n  );\n}\n\nfunction hasStyleProps(props: TimelineProps): boolean {\n  return !!(props.classNames || props.fontSizes);\n}\n\nfunction hasAccessibilityProps(props: TimelineProps): boolean {\n  return !!props.buttonTexts;\n}\n\n// Mapping functions\n\nfunction mapLegacyMode(mode?: string): TimelinePropsV2['mode'] {\n  switch (mode) {\n    case 'VERTICAL':\n      return 'vertical';\n    case 'HORIZONTAL':\n      return 'horizontal';\n    case 'VERTICAL_ALTERNATING':\n      return 'alternating';\n    case 'HORIZONTAL_ALL':\n      return 'horizontal-all';\n    default:\n      return 'alternating'; // Default mode\n  }\n}\n\nfunction mapLegacyCardPosition(\n  position?: 'TOP' | 'BOTTOM',\n): 'top' | 'bottom' | undefined {\n  switch (position) {\n    case 'TOP':\n      return 'top';\n    case 'BOTTOM':\n      return 'bottom';\n    default:\n      return undefined;\n  }\n}\n\nfunction mapLegacySlideshowType(\n  type?: string,\n): 'reveal' | 'slide' | 'fade' | undefined {\n  switch (type) {\n    case 'slide_in':\n    case 'slide_from_sides':\n      return 'slide';\n    case 'reveal':\n      return 'reveal';\n    default:\n      return 'fade';\n  }\n}\n","/**\n * cssfilter\n *\n * @author 老雷<leizongmin@gmail.com>\n */\n\nfunction getDefaultWhiteList () {\n  // 白名单值说明：\n  // true: 允许该属性\n  // Function: function (val) { } 返回true表示允许该属性，其他值均表示不允许\n  // RegExp: regexp.test(val) 返回true表示允许该属性，其他值均表示不允许\n  // 除上面列出的值外均表示不允许\n  var whiteList = {};\n\n  whiteList['align-content'] = false; // default: auto\n  whiteList['align-items'] = false; // default: auto\n  whiteList['align-self'] = false; // default: auto\n  whiteList['alignment-adjust'] = false; // default: auto\n  whiteList['alignment-baseline'] = false; // default: baseline\n  whiteList['all'] = false; // default: depending on individual properties\n  whiteList['anchor-point'] = false; // default: none\n  whiteList['animation'] = false; // default: depending on individual properties\n  whiteList['animation-delay'] = false; // default: 0\n  whiteList['animation-direction'] = false; // default: normal\n  whiteList['animation-duration'] = false; // default: 0\n  whiteList['animation-fill-mode'] = false; // default: none\n  whiteList['animation-iteration-count'] = false; // default: 1\n  whiteList['animation-name'] = false; // default: none\n  whiteList['animation-play-state'] = false; // default: running\n  whiteList['animation-timing-function'] = false; // default: ease\n  whiteList['azimuth'] = false; // default: center\n  whiteList['backface-visibility'] = false; // default: visible\n  whiteList['background'] = true; // default: depending on individual properties\n  whiteList['background-attachment'] = true; // default: scroll\n  whiteList['background-clip'] = true; // default: border-box\n  whiteList['background-color'] = true; // default: transparent\n  whiteList['background-image'] = true; // default: none\n  whiteList['background-origin'] = true; // default: padding-box\n  whiteList['background-position'] = true; // default: 0% 0%\n  whiteList['background-repeat'] = true; // default: repeat\n  whiteList['background-size'] = true; // default: auto\n  whiteList['baseline-shift'] = false; // default: baseline\n  whiteList['binding'] = false; // default: none\n  whiteList['bleed'] = false; // default: 6pt\n  whiteList['bookmark-label'] = false; // default: content()\n  whiteList['bookmark-level'] = false; // default: none\n  whiteList['bookmark-state'] = false; // default: open\n  whiteList['border'] = true; // default: depending on individual properties\n  whiteList['border-bottom'] = true; // default: depending on individual properties\n  whiteList['border-bottom-color'] = true; // default: current color\n  whiteList['border-bottom-left-radius'] = true; // default: 0\n  whiteList['border-bottom-right-radius'] = true; // default: 0\n  whiteList['border-bottom-style'] = true; // default: none\n  whiteList['border-bottom-width'] = true; // default: medium\n  whiteList['border-collapse'] = true; // default: separate\n  whiteList['border-color'] = true; // default: depending on individual properties\n  whiteList['border-image'] = true; // default: none\n  whiteList['border-image-outset'] = true; // default: 0\n  whiteList['border-image-repeat'] = true; // default: stretch\n  whiteList['border-image-slice'] = true; // default: 100%\n  whiteList['border-image-source'] = true; // default: none\n  whiteList['border-image-width'] = true; // default: 1\n  whiteList['border-left'] = true; // default: depending on individual properties\n  whiteList['border-left-color'] = true; // default: current color\n  whiteList['border-left-style'] = true; // default: none\n  whiteList['border-left-width'] = true; // default: medium\n  whiteList['border-radius'] = true; // default: 0\n  whiteList['border-right'] = true; // default: depending on individual properties\n  whiteList['border-right-color'] = true; // default: current color\n  whiteList['border-right-style'] = true; // default: none\n  whiteList['border-right-width'] = true; // default: medium\n  whiteList['border-spacing'] = true; // default: 0\n  whiteList['border-style'] = true; // default: depending on individual properties\n  whiteList['border-top'] = true; // default: depending on individual properties\n  whiteList['border-top-color'] = true; // default: current color\n  whiteList['border-top-left-radius'] = true; // default: 0\n  whiteList['border-top-right-radius'] = true; // default: 0\n  whiteList['border-top-style'] = true; // default: none\n  whiteList['border-top-width'] = true; // default: medium\n  whiteList['border-width'] = true; // default: depending on individual properties\n  whiteList['bottom'] = false; // default: auto\n  whiteList['box-decoration-break'] = true; // default: slice\n  whiteList['box-shadow'] = true; // default: none\n  whiteList['box-sizing'] = true; // default: content-box\n  whiteList['box-snap'] = true; // default: none\n  whiteList['box-suppress'] = true; // default: show\n  whiteList['break-after'] = true; // default: auto\n  whiteList['break-before'] = true; // default: auto\n  whiteList['break-inside'] = true; // default: auto\n  whiteList['caption-side'] = false; // default: top\n  whiteList['chains'] = false; // default: none\n  whiteList['clear'] = true; // default: none\n  whiteList['clip'] = false; // default: auto\n  whiteList['clip-path'] = false; // default: none\n  whiteList['clip-rule'] = false; // default: nonzero\n  whiteList['color'] = true; // default: implementation dependent\n  whiteList['color-interpolation-filters'] = true; // default: auto\n  whiteList['column-count'] = false; // default: auto\n  whiteList['column-fill'] = false; // default: balance\n  whiteList['column-gap'] = false; // default: normal\n  whiteList['column-rule'] = false; // default: depending on individual properties\n  whiteList['column-rule-color'] = false; // default: current color\n  whiteList['column-rule-style'] = false; // default: medium\n  whiteList['column-rule-width'] = false; // default: medium\n  whiteList['column-span'] = false; // default: none\n  whiteList['column-width'] = false; // default: auto\n  whiteList['columns'] = false; // default: depending on individual properties\n  whiteList['contain'] = false; // default: none\n  whiteList['content'] = false; // default: normal\n  whiteList['counter-increment'] = false; // default: none\n  whiteList['counter-reset'] = false; // default: none\n  whiteList['counter-set'] = false; // default: none\n  whiteList['crop'] = false; // default: auto\n  whiteList['cue'] = false; // default: depending on individual properties\n  whiteList['cue-after'] = false; // default: none\n  whiteList['cue-before'] = false; // default: none\n  whiteList['cursor'] = false; // default: auto\n  whiteList['direction'] = false; // default: ltr\n  whiteList['display'] = true; // default: depending on individual properties\n  whiteList['display-inside'] = true; // default: auto\n  whiteList['display-list'] = true; // default: none\n  whiteList['display-outside'] = true; // default: inline-level\n  whiteList['dominant-baseline'] = false; // default: auto\n  whiteList['elevation'] = false; // default: level\n  whiteList['empty-cells'] = false; // default: show\n  whiteList['filter'] = false; // default: none\n  whiteList['flex'] = false; // default: depending on individual properties\n  whiteList['flex-basis'] = false; // default: auto\n  whiteList['flex-direction'] = false; // default: row\n  whiteList['flex-flow'] = false; // default: depending on individual properties\n  whiteList['flex-grow'] = false; // default: 0\n  whiteList['flex-shrink'] = false; // default: 1\n  whiteList['flex-wrap'] = false; // default: nowrap\n  whiteList['float'] = false; // default: none\n  whiteList['float-offset'] = false; // default: 0 0\n  whiteList['flood-color'] = false; // default: black\n  whiteList['flood-opacity'] = false; // default: 1\n  whiteList['flow-from'] = false; // default: none\n  whiteList['flow-into'] = false; // default: none\n  whiteList['font'] = true; // default: depending on individual properties\n  whiteList['font-family'] = true; // default: implementation dependent\n  whiteList['font-feature-settings'] = true; // default: normal\n  whiteList['font-kerning'] = true; // default: auto\n  whiteList['font-language-override'] = true; // default: normal\n  whiteList['font-size'] = true; // default: medium\n  whiteList['font-size-adjust'] = true; // default: none\n  whiteList['font-stretch'] = true; // default: normal\n  whiteList['font-style'] = true; // default: normal\n  whiteList['font-synthesis'] = true; // default: weight style\n  whiteList['font-variant'] = true; // default: normal\n  whiteList['font-variant-alternates'] = true; // default: normal\n  whiteList['font-variant-caps'] = true; // default: normal\n  whiteList['font-variant-east-asian'] = true; // default: normal\n  whiteList['font-variant-ligatures'] = true; // default: normal\n  whiteList['font-variant-numeric'] = true; // default: normal\n  whiteList['font-variant-position'] = true; // default: normal\n  whiteList['font-weight'] = true; // default: normal\n  whiteList['grid'] = false; // default: depending on individual properties\n  whiteList['grid-area'] = false; // default: depending on individual properties\n  whiteList['grid-auto-columns'] = false; // default: auto\n  whiteList['grid-auto-flow'] = false; // default: none\n  whiteList['grid-auto-rows'] = false; // default: auto\n  whiteList['grid-column'] = false; // default: depending on individual properties\n  whiteList['grid-column-end'] = false; // default: auto\n  whiteList['grid-column-start'] = false; // default: auto\n  whiteList['grid-row'] = false; // default: depending on individual properties\n  whiteList['grid-row-end'] = false; // default: auto\n  whiteList['grid-row-start'] = false; // default: auto\n  whiteList['grid-template'] = false; // default: depending on individual properties\n  whiteList['grid-template-areas'] = false; // default: none\n  whiteList['grid-template-columns'] = false; // default: none\n  whiteList['grid-template-rows'] = false; // default: none\n  whiteList['hanging-punctuation'] = false; // default: none\n  whiteList['height'] = true; // default: auto\n  whiteList['hyphens'] = false; // default: manual\n  whiteList['icon'] = false; // default: auto\n  whiteList['image-orientation'] = false; // default: auto\n  whiteList['image-resolution'] = false; // default: normal\n  whiteList['ime-mode'] = false; // default: auto\n  whiteList['initial-letters'] = false; // default: normal\n  whiteList['inline-box-align'] = false; // default: last\n  whiteList['justify-content'] = false; // default: auto\n  whiteList['justify-items'] = false; // default: auto\n  whiteList['justify-self'] = false; // default: auto\n  whiteList['left'] = false; // default: auto\n  whiteList['letter-spacing'] = true; // default: normal\n  whiteList['lighting-color'] = true; // default: white\n  whiteList['line-box-contain'] = false; // default: block inline replaced\n  whiteList['line-break'] = false; // default: auto\n  whiteList['line-grid'] = false; // default: match-parent\n  whiteList['line-height'] = false; // default: normal\n  whiteList['line-snap'] = false; // default: none\n  whiteList['line-stacking'] = false; // default: depending on individual properties\n  whiteList['line-stacking-ruby'] = false; // default: exclude-ruby\n  whiteList['line-stacking-shift'] = false; // default: consider-shifts\n  whiteList['line-stacking-strategy'] = false; // default: inline-line-height\n  whiteList['list-style'] = true; // default: depending on individual properties\n  whiteList['list-style-image'] = true; // default: none\n  whiteList['list-style-position'] = true; // default: outside\n  whiteList['list-style-type'] = true; // default: disc\n  whiteList['margin'] = true; // default: depending on individual properties\n  whiteList['margin-bottom'] = true; // default: 0\n  whiteList['margin-left'] = true; // default: 0\n  whiteList['margin-right'] = true; // default: 0\n  whiteList['margin-top'] = true; // default: 0\n  whiteList['marker-offset'] = false; // default: auto\n  whiteList['marker-side'] = false; // default: list-item\n  whiteList['marks'] = false; // default: none\n  whiteList['mask'] = false; // default: border-box\n  whiteList['mask-box'] = false; // default: see individual properties\n  whiteList['mask-box-outset'] = false; // default: 0\n  whiteList['mask-box-repeat'] = false; // default: stretch\n  whiteList['mask-box-slice'] = false; // default: 0 fill\n  whiteList['mask-box-source'] = false; // default: none\n  whiteList['mask-box-width'] = false; // default: auto\n  whiteList['mask-clip'] = false; // default: border-box\n  whiteList['mask-image'] = false; // default: none\n  whiteList['mask-origin'] = false; // default: border-box\n  whiteList['mask-position'] = false; // default: center\n  whiteList['mask-repeat'] = false; // default: no-repeat\n  whiteList['mask-size'] = false; // default: border-box\n  whiteList['mask-source-type'] = false; // default: auto\n  whiteList['mask-type'] = false; // default: luminance\n  whiteList['max-height'] = true; // default: none\n  whiteList['max-lines'] = false; // default: none\n  whiteList['max-width'] = true; // default: none\n  whiteList['min-height'] = true; // default: 0\n  whiteList['min-width'] = true; // default: 0\n  whiteList['move-to'] = false; // default: normal\n  whiteList['nav-down'] = false; // default: auto\n  whiteList['nav-index'] = false; // default: auto\n  whiteList['nav-left'] = false; // default: auto\n  whiteList['nav-right'] = false; // default: auto\n  whiteList['nav-up'] = false; // default: auto\n  whiteList['object-fit'] = false; // default: fill\n  whiteList['object-position'] = false; // default: 50% 50%\n  whiteList['opacity'] = false; // default: 1\n  whiteList['order'] = false; // default: 0\n  whiteList['orphans'] = false; // default: 2\n  whiteList['outline'] = false; // default: depending on individual properties\n  whiteList['outline-color'] = false; // default: invert\n  whiteList['outline-offset'] = false; // default: 0\n  whiteList['outline-style'] = false; // default: none\n  whiteList['outline-width'] = false; // default: medium\n  whiteList['overflow'] = false; // default: depending on individual properties\n  whiteList['overflow-wrap'] = false; // default: normal\n  whiteList['overflow-x'] = false; // default: visible\n  whiteList['overflow-y'] = false; // default: visible\n  whiteList['padding'] = true; // default: depending on individual properties\n  whiteList['padding-bottom'] = true; // default: 0\n  whiteList['padding-left'] = true; // default: 0\n  whiteList['padding-right'] = true; // default: 0\n  whiteList['padding-top'] = true; // default: 0\n  whiteList['page'] = false; // default: auto\n  whiteList['page-break-after'] = false; // default: auto\n  whiteList['page-break-before'] = false; // default: auto\n  whiteList['page-break-inside'] = false; // default: auto\n  whiteList['page-policy'] = false; // default: start\n  whiteList['pause'] = false; // default: implementation dependent\n  whiteList['pause-after'] = false; // default: implementation dependent\n  whiteList['pause-before'] = false; // default: implementation dependent\n  whiteList['perspective'] = false; // default: none\n  whiteList['perspective-origin'] = false; // default: 50% 50%\n  whiteList['pitch'] = false; // default: medium\n  whiteList['pitch-range'] = false; // default: 50\n  whiteList['play-during'] = false; // default: auto\n  whiteList['position'] = false; // default: static\n  whiteList['presentation-level'] = false; // default: 0\n  whiteList['quotes'] = false; // default: text\n  whiteList['region-fragment'] = false; // default: auto\n  whiteList['resize'] = false; // default: none\n  whiteList['rest'] = false; // default: depending on individual properties\n  whiteList['rest-after'] = false; // default: none\n  whiteList['rest-before'] = false; // default: none\n  whiteList['richness'] = false; // default: 50\n  whiteList['right'] = false; // default: auto\n  whiteList['rotation'] = false; // default: 0\n  whiteList['rotation-point'] = false; // default: 50% 50%\n  whiteList['ruby-align'] = false; // default: auto\n  whiteList['ruby-merge'] = false; // default: separate\n  whiteList['ruby-position'] = false; // default: before\n  whiteList['shape-image-threshold'] = false; // default: 0.0\n  whiteList['shape-outside'] = false; // default: none\n  whiteList['shape-margin'] = false; // default: 0\n  whiteList['size'] = false; // default: auto\n  whiteList['speak'] = false; // default: auto\n  whiteList['speak-as'] = false; // default: normal\n  whiteList['speak-header'] = false; // default: once\n  whiteList['speak-numeral'] = false; // default: continuous\n  whiteList['speak-punctuation'] = false; // default: none\n  whiteList['speech-rate'] = false; // default: medium\n  whiteList['stress'] = false; // default: 50\n  whiteList['string-set'] = false; // default: none\n  whiteList['tab-size'] = false; // default: 8\n  whiteList['table-layout'] = false; // default: auto\n  whiteList['text-align'] = true; // default: start\n  whiteList['text-align-last'] = true; // default: auto\n  whiteList['text-combine-upright'] = true; // default: none\n  whiteList['text-decoration'] = true; // default: none\n  whiteList['text-decoration-color'] = true; // default: currentColor\n  whiteList['text-decoration-line'] = true; // default: none\n  whiteList['text-decoration-skip'] = true; // default: objects\n  whiteList['text-decoration-style'] = true; // default: solid\n  whiteList['text-emphasis'] = true; // default: depending on individual properties\n  whiteList['text-emphasis-color'] = true; // default: currentColor\n  whiteList['text-emphasis-position'] = true; // default: over right\n  whiteList['text-emphasis-style'] = true; // default: none\n  whiteList['text-height'] = true; // default: auto\n  whiteList['text-indent'] = true; // default: 0\n  whiteList['text-justify'] = true; // default: auto\n  whiteList['text-orientation'] = true; // default: mixed\n  whiteList['text-overflow'] = true; // default: clip\n  whiteList['text-shadow'] = true; // default: none\n  whiteList['text-space-collapse'] = true; // default: collapse\n  whiteList['text-transform'] = true; // default: none\n  whiteList['text-underline-position'] = true; // default: auto\n  whiteList['text-wrap'] = true; // default: normal\n  whiteList['top'] = false; // default: auto\n  whiteList['transform'] = false; // default: none\n  whiteList['transform-origin'] = false; // default: 50% 50% 0\n  whiteList['transform-style'] = false; // default: flat\n  whiteList['transition'] = false; // default: depending on individual properties\n  whiteList['transition-delay'] = false; // default: 0s\n  whiteList['transition-duration'] = false; // default: 0s\n  whiteList['transition-property'] = false; // default: all\n  whiteList['transition-timing-function'] = false; // default: ease\n  whiteList['unicode-bidi'] = false; // default: normal\n  whiteList['vertical-align'] = false; // default: baseline\n  whiteList['visibility'] = false; // default: visible\n  whiteList['voice-balance'] = false; // default: center\n  whiteList['voice-duration'] = false; // default: auto\n  whiteList['voice-family'] = false; // default: implementation dependent\n  whiteList['voice-pitch'] = false; // default: medium\n  whiteList['voice-range'] = false; // default: medium\n  whiteList['voice-rate'] = false; // default: normal\n  whiteList['voice-stress'] = false; // default: normal\n  whiteList['voice-volume'] = false; // default: medium\n  whiteList['volume'] = false; // default: medium\n  whiteList['white-space'] = false; // default: normal\n  whiteList['widows'] = false; // default: 2\n  whiteList['width'] = true; // default: auto\n  whiteList['will-change'] = false; // default: auto\n  whiteList['word-break'] = true; // default: normal\n  whiteList['word-spacing'] = true; // default: normal\n  whiteList['word-wrap'] = true; // default: normal\n  whiteList['wrap-flow'] = false; // default: auto\n  whiteList['wrap-through'] = false; // default: wrap\n  whiteList['writing-mode'] = false; // default: horizontal-tb\n  whiteList['z-index'] = false; // default: auto\n\n  return whiteList;\n}\n\n\n/**\n * 匹配到白名单上的一个属性时\n *\n * @param {String} name\n * @param {String} value\n * @param {Object} options\n * @return {String}\n */\nfunction onAttr (name, value, options) {\n  // do nothing\n}\n\n/**\n * 匹配到不在白名单上的一个属性时\n *\n * @param {String} name\n * @param {String} value\n * @param {Object} options\n * @return {String}\n */\nfunction onIgnoreAttr (name, value, options) {\n  // do nothing\n}\n\nvar REGEXP_URL_JAVASCRIPT = /javascript\\s*\\:/img;\n\n/**\n * 过滤属性值\n *\n * @param {String} name\n * @param {String} value\n * @return {String}\n */\nfunction safeAttrValue(name, value) {\n  if (REGEXP_URL_JAVASCRIPT.test(value)) return '';\n  return value;\n}\n\n\nexports.whiteList = getDefaultWhiteList();\nexports.getDefaultWhiteList = getDefaultWhiteList;\nexports.onAttr = onAttr;\nexports.onIgnoreAttr = onIgnoreAttr;\nexports.safeAttrValue = safeAttrValue;\n","module.exports = {\n  indexOf: function (arr, item) {\n    var i, j;\n    if (Array.prototype.indexOf) {\n      return arr.indexOf(item);\n    }\n    for (i = 0, j = arr.length; i < j; i++) {\n      if (arr[i] === item) {\n        return i;\n      }\n    }\n    return -1;\n  },\n  forEach: function (arr, fn, scope) {\n    var i, j;\n    if (Array.prototype.forEach) {\n      return arr.forEach(fn, scope);\n    }\n    for (i = 0, j = arr.length; i < j; i++) {\n      fn.call(scope, arr[i], i, arr);\n    }\n  },\n  trim: function (str) {\n    if (String.prototype.trim) {\n      return str.trim();\n    }\n    return str.replace(/(^\\s*)|(\\s*$)/g, '');\n  },\n  trimRight: function (str) {\n    if (String.prototype.trimRight) {\n      return str.trimRight();\n    }\n    return str.replace(/(\\s*$)/g, '');\n  }\n};\n","/**\n * cssfilter\n *\n * @author 老雷<leizongmin@gmail.com>\n */\n\nvar _ = require('./util');\n\n\n/**\n * 解析style\n *\n * @param {String} css\n * @param {Function} onAttr 处理属性的函数\n *   参数格式： function (sourcePosition, position, name, value, source)\n * @return {String}\n */\nfunction parseStyle (css, onAttr) {\n  css = _.trimRight(css);\n  if (css[css.length - 1] !== ';') css += ';';\n  var cssLength = css.length;\n  var isParenthesisOpen = false;\n  var lastPos = 0;\n  var i = 0;\n  var retCSS = '';\n\n  function addNewAttr () {\n    // 如果没有正常的闭合圆括号，则直接忽略当前属性\n    if (!isParenthesisOpen) {\n      var source = _.trim(css.slice(lastPos, i));\n      var j = source.indexOf(':');\n      if (j !== -1) {\n        var name = _.trim(source.slice(0, j));\n        var value = _.trim(source.slice(j + 1));\n        // 必须有属性名称\n        if (name) {\n          var ret = onAttr(lastPos, retCSS.length, name, value, source);\n          if (ret) retCSS += ret + '; ';\n        }\n      }\n    }\n    lastPos = i + 1;\n  }\n\n  for (; i < cssLength; i++) {\n    var c = css[i];\n    if (c === '/' && css[i + 1] === '*') {\n      // 备注开始\n      var j = css.indexOf('*/', i + 2);\n      // 如果没有正常的备注结束，则后面的部分全部跳过\n      if (j === -1) break;\n      // 直接将当前位置调到备注结尾，并且初始化状态\n      i = j + 1;\n      lastPos = i + 1;\n      isParenthesisOpen = false;\n    } else if (c === '(') {\n      isParenthesisOpen = true;\n    } else if (c === ')') {\n      isParenthesisOpen = false;\n    } else if (c === ';') {\n      if (isParenthesisOpen) {\n        // 在圆括号里面，忽略\n      } else {\n        addNewAttr();\n      }\n    } else if (c === '\\n') {\n      addNewAttr();\n    }\n  }\n\n  return _.trim(retCSS);\n}\n\nmodule.exports = parseStyle;\n","/**\n * cssfilter\n *\n * @author 老雷<leizongmin@gmail.com>\n */\n\nvar DEFAULT = require('./default');\nvar parseStyle = require('./parser');\nvar _ = require('./util');\n\n\n/**\n * 返回值是否为空\n *\n * @param {Object} obj\n * @return {Boolean}\n */\nfunction isNull (obj) {\n  return (obj === undefined || obj === null);\n}\n\n/**\n * 浅拷贝对象\n *\n * @param {Object} obj\n * @return {Object}\n */\nfunction shallowCopyObject (obj) {\n  var ret = {};\n  for (var i in obj) {\n    ret[i] = obj[i];\n  }\n  return ret;\n}\n\n/**\n * 创建CSS过滤器\n *\n * @param {Object} options\n *   - {Object} whiteList\n *   - {Function} onAttr\n *   - {Function} onIgnoreAttr\n *   - {Function} safeAttrValue\n */\nfunction FilterCSS (options) {\n  options = shallowCopyObject(options || {});\n  options.whiteList = options.whiteList || DEFAULT.whiteList;\n  options.onAttr = options.onAttr || DEFAULT.onAttr;\n  options.onIgnoreAttr = options.onIgnoreAttr || DEFAULT.onIgnoreAttr;\n  options.safeAttrValue = options.safeAttrValue || DEFAULT.safeAttrValue;\n  this.options = options;\n}\n\nFilterCSS.prototype.process = function (css) {\n  // 兼容各种奇葩输入\n  css = css || '';\n  css = css.toString();\n  if (!css) return '';\n\n  var me = this;\n  var options = me.options;\n  var whiteList = options.whiteList;\n  var onAttr = options.onAttr;\n  var onIgnoreAttr = options.onIgnoreAttr;\n  var safeAttrValue = options.safeAttrValue;\n\n  var retCSS = parseStyle(css, function (sourcePosition, position, name, value, source) {\n\n    var check = whiteList[name];\n    var isWhite = false;\n    if (check === true) isWhite = check;\n    else if (typeof check === 'function') isWhite = check(value);\n    else if (check instanceof RegExp) isWhite = check.test(value);\n    if (isWhite !== true) isWhite = false;\n\n    // 如果过滤后 value 为空则直接忽略\n    value = safeAttrValue(name, value);\n    if (!value) return;\n\n    var opts = {\n      position: position,\n      sourcePosition: sourcePosition,\n      source: source,\n      isWhite: isWhite\n    };\n\n    if (isWhite) {\n\n      var ret = onAttr(name, value, opts);\n      if (isNull(ret)) {\n        return name + ':' + value;\n      } else {\n        return ret;\n      }\n\n    } else {\n\n      var ret = onIgnoreAttr(name, value, opts);\n      if (!isNull(ret)) {\n        return ret;\n      }\n\n    }\n  });\n\n  return retCSS;\n};\n\n\nmodule.exports = FilterCSS;\n","/**\n * cssfilter\n *\n * @author 老雷<leizongmin@gmail.com>\n */\n\nvar DEFAULT = require('./default');\nvar FilterCSS = require('./css');\n\n\n/**\n * XSS过滤\n *\n * @param {String} css 要过滤的CSS代码\n * @param {Object} options 选项：whiteList, onAttr, onIgnoreAttr\n * @return {String}\n */\nfunction filterCSS (html, options) {\n  var xss = new FilterCSS(options);\n  return xss.process(html);\n}\n\n\n// 输出\nexports = module.exports = filterCSS;\nexports.FilterCSS = FilterCSS;\nfor (var i in DEFAULT) exports[i] = DEFAULT[i];\n\n// 在浏览器端使用\nif (typeof window !== 'undefined') {\n  window.filterCSS = module.exports;\n}\n","module.exports = {\n  indexOf: function (arr, item) {\n    var i, j;\n    if (Array.prototype.indexOf) {\n      return arr.indexOf(item);\n    }\n    for (i = 0, j = arr.length; i < j; i++) {\n      if (arr[i] === item) {\n        return i;\n      }\n    }\n    return -1;\n  },\n  forEach: function (arr, fn, scope) {\n    var i, j;\n    if (Array.prototype.forEach) {\n      return arr.forEach(fn, scope);\n    }\n    for (i = 0, j = arr.length; i < j; i++) {\n      fn.call(scope, arr[i], i, arr);\n    }\n  },\n  trim: function (str) {\n    if (String.prototype.trim) {\n      return str.trim();\n    }\n    return str.replace(/(^\\s*)|(\\s*$)/g, \"\");\n  },\n  spaceIndex: function (str) {\n    var reg = /\\s|\\n|\\t/;\n    var match = reg.exec(str);\n    return match ? match.index : -1;\n  },\n};\n","/**\n * default settings\n *\n * @author Zongmin Lei<leizongmin@gmail.com>\n */\n\nvar FilterCSS = require(\"cssfilter\").FilterCSS;\nvar getDefaultCSSWhiteList = require(\"cssfilter\").getDefaultWhiteList;\nvar _ = require(\"./util\");\n\nfunction getDefaultWhiteList() {\n  return {\n    a: [\"target\", \"href\", \"title\"],\n    abbr: [\"title\"],\n    address: [],\n    area: [\"shape\", \"coords\", \"href\", \"alt\"],\n    article: [],\n    aside: [],\n    audio: [\n      \"autoplay\",\n      \"controls\",\n      \"crossorigin\",\n      \"loop\",\n      \"muted\",\n      \"preload\",\n      \"src\",\n    ],\n    b: [],\n    bdi: [\"dir\"],\n    bdo: [\"dir\"],\n    big: [],\n    blockquote: [\"cite\"],\n    br: [],\n    caption: [],\n    center: [],\n    cite: [],\n    code: [],\n    col: [\"align\", \"valign\", \"span\", \"width\"],\n    colgroup: [\"align\", \"valign\", \"span\", \"width\"],\n    dd: [],\n    del: [\"datetime\"],\n    details: [\"open\"],\n    div: [],\n    dl: [],\n    dt: [],\n    em: [],\n    figcaption: [],\n    figure: [],\n    font: [\"color\", \"size\", \"face\"],\n    footer: [],\n    h1: [],\n    h2: [],\n    h3: [],\n    h4: [],\n    h5: [],\n    h6: [],\n    header: [],\n    hr: [],\n    i: [],\n    img: [\"src\", \"alt\", \"title\", \"width\", \"height\", \"loading\"],\n    ins: [\"datetime\"],\n    kbd: [],\n    li: [],\n    mark: [],\n    nav: [],\n    ol: [],\n    p: [],\n    pre: [],\n    s: [],\n    section: [],\n    small: [],\n    span: [],\n    sub: [],\n    summary: [],\n    sup: [],\n    strong: [],\n    strike: [],\n    table: [\"width\", \"border\", \"align\", \"valign\"],\n    tbody: [\"align\", \"valign\"],\n    td: [\"width\", \"rowspan\", \"colspan\", \"align\", \"valign\"],\n    tfoot: [\"align\", \"valign\"],\n    th: [\"width\", \"rowspan\", \"colspan\", \"align\", \"valign\"],\n    thead: [\"align\", \"valign\"],\n    tr: [\"rowspan\", \"align\", \"valign\"],\n    tt: [],\n    u: [],\n    ul: [],\n    video: [\n      \"autoplay\",\n      \"controls\",\n      \"crossorigin\",\n      \"loop\",\n      \"muted\",\n      \"playsinline\",\n      \"poster\",\n      \"preload\",\n      \"src\",\n      \"height\",\n      \"width\",\n    ],\n  };\n}\n\nvar defaultCSSFilter = new FilterCSS();\n\n/**\n * default onTag function\n *\n * @param {String} tag\n * @param {String} html\n * @param {Object} options\n * @return {String}\n */\nfunction onTag(tag, html, options) {\n  // do nothing\n}\n\n/**\n * default onIgnoreTag function\n *\n * @param {String} tag\n * @param {String} html\n * @param {Object} options\n * @return {String}\n */\nfunction onIgnoreTag(tag, html, options) {\n  // do nothing\n}\n\n/**\n * default onTagAttr function\n *\n * @param {String} tag\n * @param {String} name\n * @param {String} value\n * @return {String}\n */\nfunction onTagAttr(tag, name, value) {\n  // do nothing\n}\n\n/**\n * default onIgnoreTagAttr function\n *\n * @param {String} tag\n * @param {String} name\n * @param {String} value\n * @return {String}\n */\nfunction onIgnoreTagAttr(tag, name, value) {\n  // do nothing\n}\n\n/**\n * default escapeHtml function\n *\n * @param {String} html\n */\nfunction escapeHtml(html) {\n  return html.replace(REGEXP_LT, \"&lt;\").replace(REGEXP_GT, \"&gt;\");\n}\n\n/**\n * default safeAttrValue function\n *\n * @param {String} tag\n * @param {String} name\n * @param {String} value\n * @param {Object} cssFilter\n * @return {String}\n */\nfunction safeAttrValue(tag, name, value, cssFilter) {\n  // unescape attribute value firstly\n  value = friendlyAttrValue(value);\n\n  if (name === \"href\" || name === \"src\") {\n    // filter `href` and `src` attribute\n    // only allow the value that starts with `http://` | `https://` | `mailto:` | `/` | `#`\n    value = _.trim(value);\n    if (value === \"#\") return \"#\";\n    if (\n      !(\n        value.substr(0, 7) === \"http://\" ||\n        value.substr(0, 8) === \"https://\" ||\n        value.substr(0, 7) === \"mailto:\" ||\n        value.substr(0, 4) === \"tel:\" ||\n        value.substr(0, 11) === \"data:image/\" ||\n        value.substr(0, 6) === \"ftp://\" ||\n        value.substr(0, 2) === \"./\" ||\n        value.substr(0, 3) === \"../\" ||\n        value[0] === \"#\" ||\n        value[0] === \"/\"\n      )\n    ) {\n      return \"\";\n    }\n  } else if (name === \"background\") {\n    // filter `background` attribute (maybe no use)\n    // `javascript:`\n    REGEXP_DEFAULT_ON_TAG_ATTR_4.lastIndex = 0;\n    if (REGEXP_DEFAULT_ON_TAG_ATTR_4.test(value)) {\n      return \"\";\n    }\n  } else if (name === \"style\") {\n    // `expression()`\n    REGEXP_DEFAULT_ON_TAG_ATTR_7.lastIndex = 0;\n    if (REGEXP_DEFAULT_ON_TAG_ATTR_7.test(value)) {\n      return \"\";\n    }\n    // `url()`\n    REGEXP_DEFAULT_ON_TAG_ATTR_8.lastIndex = 0;\n    if (REGEXP_DEFAULT_ON_TAG_ATTR_8.test(value)) {\n      REGEXP_DEFAULT_ON_TAG_ATTR_4.lastIndex = 0;\n      if (REGEXP_DEFAULT_ON_TAG_ATTR_4.test(value)) {\n        return \"\";\n      }\n    }\n    if (cssFilter !== false) {\n      cssFilter = cssFilter || defaultCSSFilter;\n      value = cssFilter.process(value);\n    }\n  }\n\n  // escape `<>\"` before returns\n  value = escapeAttrValue(value);\n  return value;\n}\n\n// RegExp list\nvar REGEXP_LT = /</g;\nvar REGEXP_GT = />/g;\nvar REGEXP_QUOTE = /\"/g;\nvar REGEXP_QUOTE_2 = /&quot;/g;\nvar REGEXP_ATTR_VALUE_1 = /&#([a-zA-Z0-9]*);?/gim;\nvar REGEXP_ATTR_VALUE_COLON = /&colon;?/gim;\nvar REGEXP_ATTR_VALUE_NEWLINE = /&newline;?/gim;\n// var REGEXP_DEFAULT_ON_TAG_ATTR_3 = /\\/\\*|\\*\\//gm;\nvar REGEXP_DEFAULT_ON_TAG_ATTR_4 =\n  /((j\\s*a\\s*v\\s*a|v\\s*b|l\\s*i\\s*v\\s*e)\\s*s\\s*c\\s*r\\s*i\\s*p\\s*t\\s*|m\\s*o\\s*c\\s*h\\s*a):/gi;\n// var REGEXP_DEFAULT_ON_TAG_ATTR_5 = /^[\\s\"'`]*(d\\s*a\\s*t\\s*a\\s*)\\:/gi;\n// var REGEXP_DEFAULT_ON_TAG_ATTR_6 = /^[\\s\"'`]*(d\\s*a\\s*t\\s*a\\s*)\\:\\s*image\\//gi;\nvar REGEXP_DEFAULT_ON_TAG_ATTR_7 =\n  /e\\s*x\\s*p\\s*r\\s*e\\s*s\\s*s\\s*i\\s*o\\s*n\\s*\\(.*/gi;\nvar REGEXP_DEFAULT_ON_TAG_ATTR_8 = /u\\s*r\\s*l\\s*\\(.*/gi;\n\n/**\n * escape double quote\n *\n * @param {String} str\n * @return {String} str\n */\nfunction escapeQuote(str) {\n  return str.replace(REGEXP_QUOTE, \"&quot;\");\n}\n\n/**\n * unescape double quote\n *\n * @param {String} str\n * @return {String} str\n */\nfunction unescapeQuote(str) {\n  return str.replace(REGEXP_QUOTE_2, '\"');\n}\n\n/**\n * escape html entities\n *\n * @param {String} str\n * @return {String}\n */\nfunction escapeHtmlEntities(str) {\n  return str.replace(REGEXP_ATTR_VALUE_1, function replaceUnicode(str, code) {\n    return code[0] === \"x\" || code[0] === \"X\"\n      ? String.fromCharCode(parseInt(code.substr(1), 16))\n      : String.fromCharCode(parseInt(code, 10));\n  });\n}\n\n/**\n * escape html5 new danger entities\n *\n * @param {String} str\n * @return {String}\n */\nfunction escapeDangerHtml5Entities(str) {\n  return str\n    .replace(REGEXP_ATTR_VALUE_COLON, \":\")\n    .replace(REGEXP_ATTR_VALUE_NEWLINE, \" \");\n}\n\n/**\n * clear nonprintable characters\n *\n * @param {String} str\n * @return {String}\n */\nfunction clearNonPrintableCharacter(str) {\n  var str2 = \"\";\n  for (var i = 0, len = str.length; i < len; i++) {\n    str2 += str.charCodeAt(i) < 32 ? \" \" : str.charAt(i);\n  }\n  return _.trim(str2);\n}\n\n/**\n * get friendly attribute value\n *\n * @param {String} str\n * @return {String}\n */\nfunction friendlyAttrValue(str) {\n  str = unescapeQuote(str);\n  str = escapeHtmlEntities(str);\n  str = escapeDangerHtml5Entities(str);\n  str = clearNonPrintableCharacter(str);\n  return str;\n}\n\n/**\n * unescape attribute value\n *\n * @param {String} str\n * @return {String}\n */\nfunction escapeAttrValue(str) {\n  str = escapeQuote(str);\n  str = escapeHtml(str);\n  return str;\n}\n\n/**\n * `onIgnoreTag` function for removing all the tags that are not in whitelist\n */\nfunction onIgnoreTagStripAll() {\n  return \"\";\n}\n\n/**\n * remove tag body\n * specify a `tags` list, if the tag is not in the `tags` list then process by the specify function (optional)\n *\n * @param {array} tags\n * @param {function} next\n */\nfunction StripTagBody(tags, next) {\n  if (typeof next !== \"function\") {\n    next = function () {};\n  }\n\n  var isRemoveAllTag = !Array.isArray(tags);\n  function isRemoveTag(tag) {\n    if (isRemoveAllTag) return true;\n    return _.indexOf(tags, tag) !== -1;\n  }\n\n  var removeList = [];\n  var posStart = false;\n\n  return {\n    onIgnoreTag: function (tag, html, options) {\n      if (isRemoveTag(tag)) {\n        if (options.isClosing) {\n          var ret = \"[/removed]\";\n          var end = options.position + ret.length;\n          removeList.push([\n            posStart !== false ? posStart : options.position,\n            end,\n          ]);\n          posStart = false;\n          return ret;\n        } else {\n          if (!posStart) {\n            posStart = options.position;\n          }\n          return \"[removed]\";\n        }\n      } else {\n        return next(tag, html, options);\n      }\n    },\n    remove: function (html) {\n      var rethtml = \"\";\n      var lastPos = 0;\n      _.forEach(removeList, function (pos) {\n        rethtml += html.slice(lastPos, pos[0]);\n        lastPos = pos[1];\n      });\n      rethtml += html.slice(lastPos);\n      return rethtml;\n    },\n  };\n}\n\n/**\n * remove html comments\n *\n * @param {String} html\n * @return {String}\n */\nfunction stripCommentTag(html) {\n  var retHtml = \"\";\n  var lastPos = 0;\n  while (lastPos < html.length) {\n    var i = html.indexOf(\"<!--\", lastPos);\n    if (i === -1) {\n      retHtml += html.slice(lastPos);\n      break;\n    }\n    retHtml += html.slice(lastPos, i);\n    var j = html.indexOf(\"-->\", i);\n    if (j === -1) {\n      break;\n    }\n    lastPos = j + 3;\n  }\n  return retHtml;\n}\n\n/**\n * remove invisible characters\n *\n * @param {String} html\n * @return {String}\n */\nfunction stripBlankChar(html) {\n  var chars = html.split(\"\");\n  chars = chars.filter(function (char) {\n    var c = char.charCodeAt(0);\n    if (c === 127) return false;\n    if (c <= 31) {\n      if (c === 10 || c === 13) return true;\n      return false;\n    }\n    return true;\n  });\n  return chars.join(\"\");\n}\n\nexports.whiteList = getDefaultWhiteList();\nexports.getDefaultWhiteList = getDefaultWhiteList;\nexports.onTag = onTag;\nexports.onIgnoreTag = onIgnoreTag;\nexports.onTagAttr = onTagAttr;\nexports.onIgnoreTagAttr = onIgnoreTagAttr;\nexports.safeAttrValue = safeAttrValue;\nexports.escapeHtml = escapeHtml;\nexports.escapeQuote = escapeQuote;\nexports.unescapeQuote = unescapeQuote;\nexports.escapeHtmlEntities = escapeHtmlEntities;\nexports.escapeDangerHtml5Entities = escapeDangerHtml5Entities;\nexports.clearNonPrintableCharacter = clearNonPrintableCharacter;\nexports.friendlyAttrValue = friendlyAttrValue;\nexports.escapeAttrValue = escapeAttrValue;\nexports.onIgnoreTagStripAll = onIgnoreTagStripAll;\nexports.StripTagBody = StripTagBody;\nexports.stripCommentTag = stripCommentTag;\nexports.stripBlankChar = stripBlankChar;\nexports.attributeWrapSign = '\"';\nexports.cssFilter = defaultCSSFilter;\nexports.getDefaultCSSWhiteList = getDefaultCSSWhiteList;\n","/**\n * Simple HTML Parser\n *\n * @author Zongmin Lei<leizongmin@gmail.com>\n */\n\nvar _ = require(\"./util\");\n\n/**\n * get tag name\n *\n * @param {String} html e.g. '<a hef=\"#\">'\n * @return {String}\n */\nfunction getTagName(html) {\n  var i = _.spaceIndex(html);\n  var tagName;\n  if (i === -1) {\n    tagName = html.slice(1, -1);\n  } else {\n    tagName = html.slice(1, i + 1);\n  }\n  tagName = _.trim(tagName).toLowerCase();\n  if (tagName.slice(0, 1) === \"/\") tagName = tagName.slice(1);\n  if (tagName.slice(-1) === \"/\") tagName = tagName.slice(0, -1);\n  return tagName;\n}\n\n/**\n * is close tag?\n *\n * @param {String} html 如：'<a hef=\"#\">'\n * @return {Boolean}\n */\nfunction isClosing(html) {\n  return html.slice(0, 2) === \"</\";\n}\n\n/**\n * parse input html and returns processed html\n *\n * @param {String} html\n * @param {Function} onTag e.g. function (sourcePosition, position, tag, html, isClosing)\n * @param {Function} escapeHtml\n * @return {String}\n */\nfunction parseTag(html, onTag, escapeHtml) {\n  \"use strict\";\n\n  var rethtml = \"\";\n  var lastPos = 0;\n  var tagStart = false;\n  var quoteStart = false;\n  var currentPos = 0;\n  var len = html.length;\n  var currentTagName = \"\";\n  var currentHtml = \"\";\n\n  chariterator: for (currentPos = 0; currentPos < len; currentPos++) {\n    var c = html.charAt(currentPos);\n    if (tagStart === false) {\n      if (c === \"<\") {\n        tagStart = currentPos;\n        continue;\n      }\n    } else {\n      if (quoteStart === false) {\n        if (c === \"<\") {\n          rethtml += escapeHtml(html.slice(lastPos, currentPos));\n          tagStart = currentPos;\n          lastPos = currentPos;\n          continue;\n        }\n        if (c === \">\" || currentPos === len - 1) {\n          rethtml += escapeHtml(html.slice(lastPos, tagStart));\n          currentHtml = html.slice(tagStart, currentPos + 1);\n          currentTagName = getTagName(currentHtml);\n          rethtml += onTag(\n            tagStart,\n            rethtml.length,\n            currentTagName,\n            currentHtml,\n            isClosing(currentHtml)\n          );\n          lastPos = currentPos + 1;\n          tagStart = false;\n          continue;\n        }\n        if (c === '\"' || c === \"'\") {\n          var i = 1;\n          var ic = html.charAt(currentPos - i);\n\n          while (ic.trim() === \"\" || ic === \"=\") {\n            if (ic === \"=\") {\n              quoteStart = c;\n              continue chariterator;\n            }\n            ic = html.charAt(currentPos - ++i);\n          }\n        }\n      } else {\n        if (c === quoteStart) {\n          quoteStart = false;\n          continue;\n        }\n      }\n    }\n  }\n  if (lastPos < len) {\n    rethtml += escapeHtml(html.substr(lastPos));\n  }\n\n  return rethtml;\n}\n\nvar REGEXP_ILLEGAL_ATTR_NAME = /[^a-zA-Z0-9\\\\_:.-]/gim;\n\n/**\n * parse input attributes and returns processed attributes\n *\n * @param {String} html e.g. `href=\"#\" target=\"_blank\"`\n * @param {Function} onAttr e.g. `function (name, value)`\n * @return {String}\n */\nfunction parseAttr(html, onAttr) {\n  \"use strict\";\n\n  var lastPos = 0;\n  var lastMarkPos = 0;\n  var retAttrs = [];\n  var tmpName = false;\n  var len = html.length;\n\n  function addAttr(name, value) {\n    name = _.trim(name);\n    name = name.replace(REGEXP_ILLEGAL_ATTR_NAME, \"\").toLowerCase();\n    if (name.length < 1) return;\n    var ret = onAttr(name, value || \"\");\n    if (ret) retAttrs.push(ret);\n  }\n\n  // 逐个分析字符\n  for (var i = 0; i < len; i++) {\n    var c = html.charAt(i);\n    var v, j;\n    if (tmpName === false && c === \"=\") {\n      tmpName = html.slice(lastPos, i);\n      lastPos = i + 1;\n      lastMarkPos = html.charAt(lastPos) === '\"' || html.charAt(lastPos) === \"'\" ? lastPos : findNextQuotationMark(html, i + 1);\n      continue;\n    }\n    if (tmpName !== false) {\n      if (\n        i === lastMarkPos\n      ) {\n        j = html.indexOf(c, i + 1);\n        if (j === -1) {\n          break;\n        } else {\n          v = _.trim(html.slice(lastMarkPos + 1, j));\n          addAttr(tmpName, v);\n          tmpName = false;\n          i = j;\n          lastPos = i + 1;\n          continue;\n        }\n      }\n    }\n    if (/\\s|\\n|\\t/.test(c)) {\n      html = html.replace(/\\s|\\n|\\t/g, \" \");\n      if (tmpName === false) {\n        j = findNextEqual(html, i);\n        if (j === -1) {\n          v = _.trim(html.slice(lastPos, i));\n          addAttr(v);\n          tmpName = false;\n          lastPos = i + 1;\n          continue;\n        } else {\n          i = j - 1;\n          continue;\n        }\n      } else {\n        j = findBeforeEqual(html, i - 1);\n        if (j === -1) {\n          v = _.trim(html.slice(lastPos, i));\n          v = stripQuoteWrap(v);\n          addAttr(tmpName, v);\n          tmpName = false;\n          lastPos = i + 1;\n          continue;\n        } else {\n          continue;\n        }\n      }\n    }\n  }\n\n  if (lastPos < html.length) {\n    if (tmpName === false) {\n      addAttr(html.slice(lastPos));\n    } else {\n      addAttr(tmpName, stripQuoteWrap(_.trim(html.slice(lastPos))));\n    }\n  }\n\n  return _.trim(retAttrs.join(\" \"));\n}\n\nfunction findNextEqual(str, i) {\n  for (; i < str.length; i++) {\n    var c = str[i];\n    if (c === \" \") continue;\n    if (c === \"=\") return i;\n    return -1;\n  }\n}\n\nfunction findNextQuotationMark(str, i) {\n  for (; i < str.length; i++) {\n    var c = str[i];\n    if (c === \" \") continue;\n    if (c === \"'\" || c === '\"') return i;\n    return -1;\n  }\n}\n\nfunction findBeforeEqual(str, i) {\n  for (; i > 0; i--) {\n    var c = str[i];\n    if (c === \" \") continue;\n    if (c === \"=\") return i;\n    return -1;\n  }\n}\n\nfunction isQuoteWrapString(text) {\n  if (\n    (text[0] === '\"' && text[text.length - 1] === '\"') ||\n    (text[0] === \"'\" && text[text.length - 1] === \"'\")\n  ) {\n    return true;\n  } else {\n    return false;\n  }\n}\n\nfunction stripQuoteWrap(text) {\n  if (isQuoteWrapString(text)) {\n    return text.substr(1, text.length - 2);\n  } else {\n    return text;\n  }\n}\n\nexports.parseTag = parseTag;\nexports.parseAttr = parseAttr;\n","/**\n * filter xss\n *\n * @author Zongmin Lei<leizongmin@gmail.com>\n */\n\nvar FilterCSS = require(\"cssfilter\").FilterCSS;\nvar DEFAULT = require(\"./default\");\nvar parser = require(\"./parser\");\nvar parseTag = parser.parseTag;\nvar parseAttr = parser.parseAttr;\nvar _ = require(\"./util\");\n\n/**\n * returns `true` if the input value is `undefined` or `null`\n *\n * @param {Object} obj\n * @return {Boolean}\n */\nfunction isNull(obj) {\n  return obj === undefined || obj === null;\n}\n\n/**\n * get attributes for a tag\n *\n * @param {String} html\n * @return {Object}\n *   - {String} html\n *   - {Boolean} closing\n */\nfunction getAttrs(html) {\n  var i = _.spaceIndex(html);\n  if (i === -1) {\n    return {\n      html: \"\",\n      closing: html[html.length - 2] === \"/\",\n    };\n  }\n  html = _.trim(html.slice(i + 1, -1));\n  var isClosing = html[html.length - 1] === \"/\";\n  if (isClosing) html = _.trim(html.slice(0, -1));\n  return {\n    html: html,\n    closing: isClosing,\n  };\n}\n\n/**\n * shallow copy\n *\n * @param {Object} obj\n * @return {Object}\n */\nfunction shallowCopyObject(obj) {\n  var ret = {};\n  for (var i in obj) {\n    ret[i] = obj[i];\n  }\n  return ret;\n}\n\nfunction keysToLowerCase(obj) {\n  var ret = {};\n  for (var i in obj) {\n    if (Array.isArray(obj[i])) {\n      ret[i.toLowerCase()] = obj[i].map(function (item) {\n        return item.toLowerCase();\n      });\n    } else {\n      ret[i.toLowerCase()] = obj[i];\n    }\n  }\n  return ret;\n}\n\n/**\n * FilterXSS class\n *\n * @param {Object} options\n *        whiteList (or allowList), onTag, onTagAttr, onIgnoreTag,\n *        onIgnoreTagAttr, safeAttrValue, escapeHtml\n *        stripIgnoreTagBody, allowCommentTag, stripBlankChar\n *        css{whiteList, onAttr, onIgnoreAttr} `css=false` means don't use `cssfilter`\n */\nfunction FilterXSS(options) {\n  options = shallowCopyObject(options || {});\n\n  if (options.stripIgnoreTag) {\n    if (options.onIgnoreTag) {\n      console.error(\n        'Notes: cannot use these two options \"stripIgnoreTag\" and \"onIgnoreTag\" at the same time'\n      );\n    }\n    options.onIgnoreTag = DEFAULT.onIgnoreTagStripAll;\n  }\n  if (options.whiteList || options.allowList) {\n    options.whiteList = keysToLowerCase(options.whiteList || options.allowList);\n  } else {\n    options.whiteList = DEFAULT.whiteList;\n  }\n\n  this.attributeWrapSign = options.singleQuotedAttributeValue === true ? \"'\" : DEFAULT.attributeWrapSign;\n\n  options.onTag = options.onTag || DEFAULT.onTag;\n  options.onTagAttr = options.onTagAttr || DEFAULT.onTagAttr;\n  options.onIgnoreTag = options.onIgnoreTag || DEFAULT.onIgnoreTag;\n  options.onIgnoreTagAttr = options.onIgnoreTagAttr || DEFAULT.onIgnoreTagAttr;\n  options.safeAttrValue = options.safeAttrValue || DEFAULT.safeAttrValue;\n  options.escapeHtml = options.escapeHtml || DEFAULT.escapeHtml;\n  this.options = options;\n\n  if (options.css === false) {\n    this.cssFilter = false;\n  } else {\n    options.css = options.css || {};\n    this.cssFilter = new FilterCSS(options.css);\n  }\n}\n\n/**\n * start process and returns result\n *\n * @param {String} html\n * @return {String}\n */\nFilterXSS.prototype.process = function (html) {\n  // compatible with the input\n  html = html || \"\";\n  html = html.toString();\n  if (!html) return \"\";\n\n  var me = this;\n  var options = me.options;\n  var whiteList = options.whiteList;\n  var onTag = options.onTag;\n  var onIgnoreTag = options.onIgnoreTag;\n  var onTagAttr = options.onTagAttr;\n  var onIgnoreTagAttr = options.onIgnoreTagAttr;\n  var safeAttrValue = options.safeAttrValue;\n  var escapeHtml = options.escapeHtml;\n  var attributeWrapSign = me.attributeWrapSign;\n  var cssFilter = me.cssFilter;\n\n  // remove invisible characters\n  if (options.stripBlankChar) {\n    html = DEFAULT.stripBlankChar(html);\n  }\n\n  // remove html comments\n  if (!options.allowCommentTag) {\n    html = DEFAULT.stripCommentTag(html);\n  }\n\n  // if enable stripIgnoreTagBody\n  var stripIgnoreTagBody = false;\n  if (options.stripIgnoreTagBody) {\n    stripIgnoreTagBody = DEFAULT.StripTagBody(\n      options.stripIgnoreTagBody,\n      onIgnoreTag\n    );\n    onIgnoreTag = stripIgnoreTagBody.onIgnoreTag;\n  }\n\n  var retHtml = parseTag(\n    html,\n    function (sourcePosition, position, tag, html, isClosing) {\n      var info = {\n        sourcePosition: sourcePosition,\n        position: position,\n        isClosing: isClosing,\n        isWhite: Object.prototype.hasOwnProperty.call(whiteList, tag),\n      };\n\n      // call `onTag()`\n      var ret = onTag(tag, html, info);\n      if (!isNull(ret)) return ret;\n\n      if (info.isWhite) {\n        if (info.isClosing) {\n          return \"</\" + tag + \">\";\n        }\n\n        var attrs = getAttrs(html);\n        var whiteAttrList = whiteList[tag];\n        var attrsHtml = parseAttr(attrs.html, function (name, value) {\n          // call `onTagAttr()`\n          var isWhiteAttr = _.indexOf(whiteAttrList, name) !== -1;\n          var ret = onTagAttr(tag, name, value, isWhiteAttr);\n          if (!isNull(ret)) return ret;\n\n          if (isWhiteAttr) {\n            // call `safeAttrValue()`\n            value = safeAttrValue(tag, name, value, cssFilter);\n            if (value) {\n              return name + '=' + attributeWrapSign + value + attributeWrapSign;\n            } else {\n              return name;\n            }\n          } else {\n            // call `onIgnoreTagAttr()`\n            ret = onIgnoreTagAttr(tag, name, value, isWhiteAttr);\n            if (!isNull(ret)) return ret;\n            return;\n          }\n        });\n\n        // build new tag html\n        html = \"<\" + tag;\n        if (attrsHtml) html += \" \" + attrsHtml;\n        if (attrs.closing) html += \" /\";\n        html += \">\";\n        return html;\n      } else {\n        // call `onIgnoreTag()`\n        ret = onIgnoreTag(tag, html, info);\n        if (!isNull(ret)) return ret;\n        return escapeHtml(html);\n      }\n    },\n    escapeHtml\n  );\n\n  // if enable stripIgnoreTagBody\n  if (stripIgnoreTagBody) {\n    retHtml = stripIgnoreTagBody.remove(retHtml);\n  }\n\n  return retHtml;\n};\n\nmodule.exports = FilterXSS;\n","/**\n * xss\n *\n * @author Zongmin Lei<leizongmin@gmail.com>\n */\n\nvar DEFAULT = require(\"./default\");\nvar parser = require(\"./parser\");\nvar FilterXSS = require(\"./xss\");\n\n/**\n * filter xss function\n *\n * @param {String} html\n * @param {Object} options { whiteList, onTag, onTagAttr, onIgnoreTag, onIgnoreTagAttr, safeAttrValue, escapeHtml }\n * @return {String}\n */\nfunction filterXSS(html, options) {\n  var xss = new FilterXSS(options);\n  return xss.process(html);\n}\n\nexports = module.exports = filterXSS;\nexports.filterXSS = filterXSS;\nexports.FilterXSS = FilterXSS;\n\n(function () {\n  for (var i in DEFAULT) {\n    exports[i] = DEFAULT[i];\n  }\n  for (var j in parser) {\n    exports[j] = parser[j];\n  }\n})();\n\n// using `xss` on the browser, output `filterXSS` to the globals\nif (typeof window !== \"undefined\") {\n  window.filterXSS = module.exports;\n}\n\n// using `xss` on the WebWorker, output `filterXSS` to the globals\nfunction isWorkerEnv() {\n  return (\n    typeof self !== \"undefined\" &&\n    typeof DedicatedWorkerGlobalScope !== \"undefined\" &&\n    self instanceof DedicatedWorkerGlobalScope\n  );\n}\nif (isWorkerEnv()) {\n  self.filterXSS = module.exports;\n}\n","import { Theme } from '@models/Theme';\n\nexport const defaultTheme: Theme = {\n  cardBgColor: '#ffffff',\n  cardDetailsBackGround: '#ffffff',\n  cardDetailsColor: '#374151',\n  cardMediaBgColor: '#f8fafc',\n  cardSubtitleColor: '#6b7280',\n  cardTitleColor: '#007FFF',\n  detailsColor: '#374151',\n  iconBackgroundColor: '#007FFF',\n  nestedCardBgColor: '#f8fafc',\n  nestedCardDetailsBackGround: '#f8fafc',\n  nestedCardDetailsColor: '#374151',\n  nestedCardSubtitleColor: '#6b7280',\n  nestedCardTitleColor: '#1f2937',\n  primary: '#007FFF',\n  secondary: '#ffdf00',\n  titleColor: '#007FFF',\n  titleColorActive: '#007FFF',\n  toolbarBgColor: '#f1f5f9',\n  toolbarBtnBgColor: '#ffffff',\n  toolbarTextColor: '#1e293b',\n  timelineBgColor: '#ffffff',\n\n  // Light mode styling\n  iconColor: '#007FFF',\n  buttonHoverBgColor: '#e2e8f0',\n  buttonActiveBgColor: '#007FFF',\n  buttonActiveIconColor: '#ffffff',\n  buttonBorderColor: '#e2e8f0',\n  buttonHoverBorderColor: '#007FFF',\n  buttonActiveBorderColor: '#007FFF',\n  shadowColor: 'rgba(0, 0, 0, 0.1)',\n  glowColor: 'rgba(0, 127, 255, 0.2)',\n  searchHighlightColor: 'rgba(0, 127, 255, 0.2)',\n  darkToggleActiveBgColor: '#007FFF',\n  darkToggleActiveIconColor: '#ffffff',\n  darkToggleActiveBorderColor: '#007FFF',\n  darkToggleGlowColor: 'rgba(0, 127, 255, 0.2)',\n};\n\nexport const darkTheme: Theme = {\n  cardBgColor: '#1f2937',\n  cardDetailsBackGround: '#1f2937',\n  cardDetailsColor: '#f3f4f6',\n  cardMediaBgColor: '#111827',\n  cardSubtitleColor: '#d1d5db',\n  cardTitleColor: '#60a5fa',\n  detailsColor: '#f3f4f6',\n  iconBackgroundColor: '#3b82f6',\n  nestedCardBgColor: '#111827',\n  nestedCardDetailsBackGround: '#111827',\n  nestedCardDetailsColor: '#f3f4f6',\n  nestedCardSubtitleColor: '#d1d5db',\n  nestedCardTitleColor: '#f9fafb',\n  primary: '#3b82f6',\n  secondary: '#fbbf24',\n  titleColor: '#60a5fa',\n  titleColorActive: '#60a5fa',\n  toolbarBgColor: '#111827',\n  toolbarBtnBgColor: '#374151',\n  toolbarTextColor: '#f3f4f6',\n  timelineBgColor: '#111827',\n\n  // Dark mode styling - our enhanced colors as defaults\n  iconColor: '#93c5fd',\n  buttonHoverBgColor: '#4b5563',\n  buttonActiveBgColor: '#fbbf24',\n  buttonActiveIconColor: '#1f2937',\n  buttonBorderColor: 'rgba(255, 255, 255, 0.1)',\n  buttonHoverBorderColor: '#3b82f6',\n  buttonActiveBorderColor: '#3b82f6',\n  shadowColor: 'rgba(0, 0, 0, 0.4)',\n  glowColor: 'rgba(59, 130, 246, 0.4)',\n  searchHighlightColor: 'rgba(96, 165, 250, 0.4)',\n  darkToggleActiveBgColor: '#1e40af',\n  darkToggleActiveIconColor: '#e2e8f0',\n  darkToggleActiveBorderColor: '#3b82f6',\n  darkToggleGlowColor: 'rgba(59, 130, 246, 0.4)',\n};\n","import {\n  ButtonTexts,\n  SlideShowType,\n  TimelineMode,\n} from '@models/TimelineModel';\nimport xss from 'xss';\nimport { darkTheme, defaultTheme } from '../components/common/themes';\n\n// Constants to avoid creating new objects on every function call\nconst DEFAULT_CLASS_NAMES = Object.freeze({\n  card: 'rc-card',\n  cardMedia: 'rc-card-media',\n  cardSubTitle: 'rc-card-subtitle',\n  cardText: 'rc-card-text',\n  cardTitle: 'rc-card-title',\n  controls: 'rc-controls',\n  title: 'rc-title',\n} as const);\n\nconst DEFAULT_BUTTON_TEXTS: Readonly<ButtonTexts> = Object.freeze({\n  changeDensity: 'Change density',\n  changeDensityOptions: Object.freeze({\n    high: Object.freeze({\n      helpText: 'Show more items at once',\n      text: 'High',\n    }),\n    low: Object.freeze({\n      helpText: 'Show fewer items at once',\n      text: 'Low',\n    }),\n  }),\n  changeLayout: 'Change layout',\n  changeLayoutOptions: Object.freeze({\n    alternating: Object.freeze({\n      helpText: 'Show cards in a vertical layout with alternating fashion',\n      text: 'Alternating',\n    }),\n    horizontal: Object.freeze({\n      helpText: 'Show cards in a horizontal layout',\n      text: 'Horizontal',\n    }),\n    horizontal_all: Object.freeze({\n      helpText: 'Show all cards in a horizontal layout',\n      text: 'Show all cards',\n    }),\n    vertical: Object.freeze({\n      helpText: 'Show cards in a vertical layout',\n      text: 'Vertical',\n    }),\n  }),\n  dark: 'Switch to Dark Mode',\n  first: 'Go to First',\n  jumpTo: 'Jump to',\n  last: 'Go to Last',\n  light: 'Switch to Light Mode',\n  next: 'Next',\n  play: 'Play Slideshow',\n  previous: 'Previous',\n  stop: 'Stop Slideshow',\n  searchPlaceholder: 'Search Timeline',\n  searchAriaLabel: 'Search timeline content',\n  clearSearch: 'Clear Search',\n  previousMatch: 'Previous Match',\n  nextMatch: 'Next Match',\n  timelinePoint: 'Timeline point',\n});\n\n// Pre-compiled regex for hex validation (supports both 3 and 6 character formats)\nconst HEX_COLOR_REGEX = /^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/;\n\n// Character set for ID generation\nconst ID_CHARS =\n  'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\nconst ID_LENGTH = 7;\n\n/**\n * Converts hex color to RGBA format\n * @param hex - Hex color code (e.g. #FFFFFF)\n * @param alpha - Opacity value between 0 and 1\n * @returns RGBA color string\n */\nexport const hexToRGBA = (hex: string, alpha: number): string => {\n  // Input validation\n  if (typeof hex !== 'string' || typeof alpha !== 'number') {\n    return `rgba(0, 0, 0, ${Math.max(0, Math.min(1, alpha || 0))})`;\n  }\n\n  // Validate hex format using regex (more efficient than manual checks)\n  if (!HEX_COLOR_REGEX.test(hex)) {\n    console.warn('Invalid hex color provided:', hex);\n    return `rgba(0, 0, 0, ${Math.max(0, Math.min(1, alpha))})`;\n  }\n\n  // Expand 3-character hex to 6-character\n  let fullHex = hex;\n  if (hex.length === 4) {\n    fullHex = '#' + hex[1] + hex[1] + hex[2] + hex[2] + hex[3] + hex[3];\n  }\n\n  // Extract RGB values directly with bit shifting (more efficient)\n  const hexValue = parseInt(fullHex.slice(1), 16);\n  const r = (hexValue >> 16) & 255;\n  const g = (hexValue >> 8) & 255;\n  const b = hexValue & 255;\n\n  // Clamp alpha value between 0 and 1\n  const clampedAlpha = Math.max(0, Math.min(1, alpha));\n\n  return `rgba(${r}, ${g}, ${b}, ${clampedAlpha})`;\n};\n\n/**\n * Returns the appropriate theme based on dark mode preference\n * @param isDark - Whether dark mode is enabled\n * @returns Theme object\n */\nexport const getDefaultThemeOrDark = (isDark?: boolean) =>\n  isDark ? darkTheme : defaultTheme;\n\n/**\n * Returns default class names for timeline components\n * @returns Object of default CSS class names\n */\nexport const getDefaultClassNames = () => DEFAULT_CLASS_NAMES;\n\n/**\n * Returns default button text translations\n * @returns Object containing all button text strings\n */\nexport const getDefaultButtonTexts = (): ButtonTexts => DEFAULT_BUTTON_TEXTS;\n\n/**\n * Determines slideshow type based on timeline mode\n * @param mode - Timeline display mode\n * @returns Appropriate slideshow animation type\n */\nexport const getSlideShowType = (mode: TimelineMode): SlideShowType => {\n  switch (mode) {\n    case 'VERTICAL_ALTERNATING':\n      return 'slide_from_sides';\n    case 'HORIZONTAL':\n    case 'VERTICAL':\n    default:\n      return 'reveal';\n  }\n};\n\n/**\n * Type guard to check if text is an array of strings\n * @param text - Text string or array of strings\n * @returns Boolean indicating if input is string array\n */\nexport const isTextArray = (text: string | string[]): text is string[] =>\n  Array.isArray(text);\n\n/**\n * Sanitizes HTML text to prevent XSS attacks\n * @param text - Text string or array of strings to sanitize\n * @returns Sanitized text string or array\n */\nexport const sanitizeHtmlText = (\n  text: string | string[],\n): string | string[] => {\n  if (!text) return '';\n\n  try {\n    return isTextArray(text) ? text.map((t) => xss(t || '')) : xss(text);\n  } catch (error) {\n    console.error('Error sanitizing HTML text:', error);\n    return isTextArray(text) ? [] : '';\n  }\n};\n\n/**\n * Generates a cryptographically secure random ID\n * @returns Unique string ID\n */\nexport const getUniqueID = (): string => {\n  // Use crypto API if available (modern browsers)\n  if (typeof window !== 'undefined' && window.crypto?.getRandomValues) {\n    try {\n      const randomValues = new Uint8Array(ID_LENGTH);\n      window.crypto.getRandomValues(randomValues);\n\n      return Array.from(\n        randomValues,\n        (byte) => ID_CHARS[byte % ID_CHARS.length],\n      ).join('');\n    } catch (error) {\n      console.error('Error generating unique ID:', error);\n    }\n  }\n\n  // Fallback for environments without crypto API\n  // Using a combination of timestamp and a more robust random generation\n  const timestamp = Date.now().toString(36);\n\n  // Use performance.now() for additional entropy if available\n  const performanceTime =\n    typeof performance !== 'undefined' && performance.now\n      ? performance.now().toString().replace('.', '')\n      : Date.now().toString();\n\n  // Generate random part using timestamp-based seed for better distribution\n  const seed = parseInt(performanceTime.slice(-6), 10);\n  const randomPart = Array.from({ length: 8 }, (_, index) => {\n    // Simple LCG algorithm for better distribution than Math.random\n    const a = 1664525;\n    const c = 1013904223;\n    const m = Math.pow(2, 32);\n    const value = (a * (seed + index) + c) % m;\n    return ID_CHARS[value % ID_CHARS.length];\n  }).join('');\n\n  return `id-${timestamp}-${randomPart}`;\n};\n","/**\n * Simple runtime validation for Timeline props without external dependencies\n */\n\ninterface ValidationError {\n  path: string[];\n  message: string;\n}\n\nfunction isValidHexColor(color: string): boolean {\n  return /^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(color);\n}\n\nfunction isValidUrl(url: string): boolean {\n  try {\n    new URL(url);\n    return true;\n  } catch {\n    return false;\n  }\n}\n\n/**\n * Validates timeline props and returns validation errors\n * @param props - Timeline props to validate\n * @returns Array of validation errors (empty if valid)\n */\nexport function validateTimelineProps(props: any): ValidationError[] {\n  const errors: ValidationError[] = [];\n\n  // Validate items array\n  if (!props.items || !Array.isArray(props.items)) {\n    errors.push({ path: ['items'], message: 'Items must be an array' });\n  } else if (props.items.length === 0) {\n    errors.push({\n      path: ['items'],\n      message: 'At least one timeline item is required',\n    });\n  } else {\n    // Validate each item\n    props.items.forEach((item: any, index: number) => {\n      if (item.url && typeof item.url === 'string' && !isValidUrl(item.url)) {\n        errors.push({\n          path: ['items', index.toString(), 'url'],\n          message: 'Invalid URL format',\n        });\n      }\n\n      if (item.media?.source?.url && !isValidUrl(item.media.source.url)) {\n        errors.push({\n          path: ['items', index.toString(), 'media', 'source', 'url'],\n          message: 'Invalid media URL format',\n        });\n      }\n    });\n  }\n\n  // Validate mode\n  const validModes = ['VERTICAL', 'HORIZONTAL', 'VERTICAL_ALTERNATING'];\n  if (props.mode && !validModes.includes(props.mode)) {\n    errors.push({\n      path: ['mode'],\n      message: `Mode must be one of: ${validModes.join(', ')}`,\n    });\n  }\n\n  // Validate numeric props\n  const numericProps = [\n    'cardHeight',\n    'cardWidth',\n    'itemWidth',\n    'lineWidth',\n    'slideItemDuration',\n    'activeItemIndex',\n  ];\n  numericProps.forEach((prop) => {\n    const value = props[prop];\n    if (value !== undefined && (typeof value !== 'number' || value < 0)) {\n      errors.push({\n        path: [prop],\n        message: `${prop} must be a positive number`,\n      });\n    }\n  });\n\n  // Validate theme colors if present\n  if (props.theme && typeof props.theme === 'object') {\n    const colorProps = [\n      'primary',\n      'secondary',\n      'cardBgColor',\n      'cardForeColor',\n      'titleColor',\n      'titleColorActive',\n    ];\n    colorProps.forEach((prop) => {\n      const color = props.theme[prop];\n      if (color && typeof color === 'string' && !isValidHexColor(color)) {\n        errors.push({\n          path: ['theme', prop],\n          message: `${prop} must be a valid hex color (e.g., #ff0000 or #f00)`,\n        });\n      }\n    });\n  }\n\n  // Validate boolean props\n  const booleanProps = [\n    'slideShow',\n    'flipLayout',\n    'cardLess',\n    'hideControls',\n    'disableNavOnKey',\n  ];\n  booleanProps.forEach((prop) => {\n    const value = props[prop];\n    if (value !== undefined && typeof value !== 'boolean') {\n      errors.push({ path: [prop], message: `${prop} must be a boolean` });\n    }\n  });\n\n  return errors;\n}\n\n/**\n * Safely validates props without throwing, returns success/error result\n * @param props - Raw timeline props\n * @returns Success result or error result with validation errors\n */\nexport function safeValidateTimelineProps(\n  props: unknown,\n):\n  | { success: true; data: any }\n  | { success: false; errors: ValidationError[] } {\n  const errors = validateTimelineProps(props);\n\n  if (errors.length === 0) {\n    return { success: true, data: props };\n  } else {\n    return { success: false, errors };\n  }\n}\n","!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(e):(t=\"undefined\"!=typeof globalThis?globalThis:t||self).dayjs=e()}(this,(function(){\"use strict\";var t=1e3,e=6e4,n=36e5,r=\"millisecond\",i=\"second\",s=\"minute\",u=\"hour\",a=\"day\",o=\"week\",c=\"month\",f=\"quarter\",h=\"year\",d=\"date\",l=\"Invalid Date\",$=/^(\\d{4})[-/]?(\\d{1,2})?[-/]?(\\d{0,2})[Tt\\s]*(\\d{1,2})?:?(\\d{1,2})?:?(\\d{1,2})?[.:]?(\\d+)?$/,y=/\\[([^\\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,M={name:\"en\",weekdays:\"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday\".split(\"_\"),months:\"January_February_March_April_May_June_July_August_September_October_November_December\".split(\"_\"),ordinal:function(t){var e=[\"th\",\"st\",\"nd\",\"rd\"],n=t%100;return\"[\"+t+(e[(n-20)%10]||e[n]||e[0])+\"]\"}},m=function(t,e,n){var r=String(t);return!r||r.length>=e?t:\"\"+Array(e+1-r.length).join(n)+t},v={s:m,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),i=n%60;return(e<=0?\"+\":\"-\")+m(r,2,\"0\")+\":\"+m(i,2,\"0\")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),i=e.clone().add(r,c),s=n-i<0,u=e.clone().add(r+(s?-1:1),c);return+(-(r+(n-i)/(s?i-u:u-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:c,y:h,w:o,d:a,D:d,h:u,m:s,s:i,ms:r,Q:f}[t]||String(t||\"\").toLowerCase().replace(/s$/,\"\")},u:function(t){return void 0===t}},g=\"en\",D={};D[g]=M;var p=\"$isDayjsObject\",S=function(t){return t instanceof _||!(!t||!t[p])},w=function t(e,n,r){var i;if(!e)return g;if(\"string\"==typeof e){var s=e.toLowerCase();D[s]&&(i=s),n&&(D[s]=n,i=s);var u=e.split(\"-\");if(!i&&u.length>1)return t(u[0])}else{var a=e.name;D[a]=e,i=a}return!r&&i&&(g=i),i||!r&&g},O=function(t,e){if(S(t))return t.clone();var n=\"object\"==typeof e?e:{};return n.date=t,n.args=arguments,new _(n)},b=v;b.l=w,b.i=S,b.w=function(t,e){return O(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var _=function(){function M(t){this.$L=w(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[p]=!0}var m=M.prototype;return m.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(b.u(e))return new Date;if(e instanceof Date)return new Date(e);if(\"string\"==typeof e&&!/Z$/i.test(e)){var r=e.match($);if(r){var i=r[2]-1||0,s=(r[7]||\"0\").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)}}return new Date(e)}(t),this.init()},m.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},m.$utils=function(){return b},m.isValid=function(){return!(this.$d.toString()===l)},m.isSame=function(t,e){var n=O(t);return this.startOf(e)<=n&&n<=this.endOf(e)},m.isAfter=function(t,e){return O(t)<this.startOf(e)},m.isBefore=function(t,e){return this.endOf(e)<O(t)},m.$g=function(t,e,n){return b.u(t)?this[e]:this.set(n,t)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(t,e){var n=this,r=!!b.u(e)||e,f=b.p(t),l=function(t,e){var i=b.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return r?i:i.endOf(a)},$=function(t,e){return b.w(n.toDate()[t].apply(n.toDate(\"s\"),(r?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},y=this.$W,M=this.$M,m=this.$D,v=\"set\"+(this.$u?\"UTC\":\"\");switch(f){case h:return r?l(1,0):l(31,11);case c:return r?l(1,M):l(0,M+1);case o:var g=this.$locale().weekStart||0,D=(y<g?y+7:y)-g;return l(r?m-D:m+(6-D),M);case a:case d:return $(v+\"Hours\",0);case u:return $(v+\"Minutes\",1);case s:return $(v+\"Seconds\",2);case i:return $(v+\"Milliseconds\",3);default:return this.clone()}},m.endOf=function(t){return this.startOf(t,!1)},m.$set=function(t,e){var n,o=b.p(t),f=\"set\"+(this.$u?\"UTC\":\"\"),l=(n={},n[a]=f+\"Date\",n[d]=f+\"Date\",n[c]=f+\"Month\",n[h]=f+\"FullYear\",n[u]=f+\"Hours\",n[s]=f+\"Minutes\",n[i]=f+\"Seconds\",n[r]=f+\"Milliseconds\",n)[o],$=o===a?this.$D+(e-this.$W):e;if(o===c||o===h){var y=this.clone().set(d,1);y.$d[l]($),y.init(),this.$d=y.set(d,Math.min(this.$D,y.daysInMonth())).$d}else l&&this.$d[l]($);return this.init(),this},m.set=function(t,e){return this.clone().$set(t,e)},m.get=function(t){return this[b.p(t)]()},m.add=function(r,f){var d,l=this;r=Number(r);var $=b.p(f),y=function(t){var e=O(l);return b.w(e.date(e.date()+Math.round(t*r)),l)};if($===c)return this.set(c,this.$M+r);if($===h)return this.set(h,this.$y+r);if($===a)return y(1);if($===o)return y(7);var M=(d={},d[s]=e,d[u]=n,d[i]=t,d)[$]||1,m=this.$d.getTime()+r*M;return b.w(m,this)},m.subtract=function(t,e){return this.add(-1*t,e)},m.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||l;var r=t||\"YYYY-MM-DDTHH:mm:ssZ\",i=b.z(this),s=this.$H,u=this.$m,a=this.$M,o=n.weekdays,c=n.months,f=n.meridiem,h=function(t,n,i,s){return t&&(t[n]||t(e,r))||i[n].slice(0,s)},d=function(t){return b.s(s%12||12,t,\"0\")},$=f||function(t,e,n){var r=t<12?\"AM\":\"PM\";return n?r.toLowerCase():r};return r.replace(y,(function(t,r){return r||function(t){switch(t){case\"YY\":return String(e.$y).slice(-2);case\"YYYY\":return b.s(e.$y,4,\"0\");case\"M\":return a+1;case\"MM\":return b.s(a+1,2,\"0\");case\"MMM\":return h(n.monthsShort,a,c,3);case\"MMMM\":return h(c,a);case\"D\":return e.$D;case\"DD\":return b.s(e.$D,2,\"0\");case\"d\":return String(e.$W);case\"dd\":return h(n.weekdaysMin,e.$W,o,2);case\"ddd\":return h(n.weekdaysShort,e.$W,o,3);case\"dddd\":return o[e.$W];case\"H\":return String(s);case\"HH\":return b.s(s,2,\"0\");case\"h\":return d(1);case\"hh\":return d(2);case\"a\":return $(s,u,!0);case\"A\":return $(s,u,!1);case\"m\":return String(u);case\"mm\":return b.s(u,2,\"0\");case\"s\":return String(e.$s);case\"ss\":return b.s(e.$s,2,\"0\");case\"SSS\":return b.s(e.$ms,3,\"0\");case\"Z\":return i}return null}(t)||i.replace(\":\",\"\")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(r,d,l){var $,y=this,M=b.p(d),m=O(r),v=(m.utcOffset()-this.utcOffset())*e,g=this-m,D=function(){return b.m(y,m)};switch(M){case h:$=D()/12;break;case c:$=D();break;case f:$=D()/3;break;case o:$=(g-v)/6048e5;break;case a:$=(g-v)/864e5;break;case u:$=g/n;break;case s:$=g/e;break;case i:$=g/t;break;default:$=g}return l?$:b.a($)},m.daysInMonth=function(){return this.endOf(c).$D},m.$locale=function(){return D[this.$L]},m.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=w(t,e,!0);return r&&(n.$L=r),n},m.clone=function(){return b.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},M}(),k=_.prototype;return O.prototype=k,[[\"$ms\",r],[\"$s\",i],[\"$m\",s],[\"$H\",u],[\"$W\",a],[\"$M\",c],[\"$y\",h],[\"$D\",d]].forEach((function(t){k[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),O.extend=function(t,e){return t.$i||(t(e,_,O),t.$i=!0),O},O.locale=w,O.isDayjs=S,O.unix=function(t){return O(1e3*t)},O.en=D[g],O.Ls=D,O.p={},O}));","import{useRef as r,useEffect as n,useMemo as t,useState as e,useCallback as u}from\"react\";function c(e,u,c,i){var a=this,o=r(null),f=r(0),l=r(0),v=r(null),m=r([]),d=r(),g=r(),p=r(e),w=r(!0);p.current=e;var s=\"undefined\"!=typeof window,x=!u&&0!==u&&s;if(\"function\"!=typeof e)throw new TypeError(\"Expected a function\");u=+u||0;var h=!!(c=c||{}).leading,y=!(\"trailing\"in c)||!!c.trailing,F=\"maxWait\"in c,A=\"debounceOnServer\"in c&&!!c.debounceOnServer,D=F?Math.max(+c.maxWait||0,u):null;n(function(){return w.current=!0,function(){w.current=!1}},[]);var T=t(function(){var r=function(r){var n=m.current,t=d.current;return m.current=d.current=null,f.current=r,l.current=l.current||r,g.current=p.current.apply(t,n)},n=function(r,n){x&&cancelAnimationFrame(v.current),v.current=x?requestAnimationFrame(r):setTimeout(r,n)},t=function(r){if(!w.current)return!1;var n=r-o.current;return!o.current||n>=u||n<0||F&&r-f.current>=D},e=function(n){return v.current=null,y&&m.current?r(n):(m.current=d.current=null,g.current)},c=function r(){var c=Date.now();if(h&&l.current===f.current&&T(),t(c))return e(c);if(w.current){var i=u-(c-o.current),a=F?Math.min(i,D-(c-f.current)):i;n(r,a)}},T=function(){i&&i({})},W=function(){if(s||A){var e=Date.now(),i=t(e);if(m.current=[].slice.call(arguments),d.current=a,o.current=e,i){if(!v.current&&w.current)return f.current=o.current,n(c,u),h?r(o.current):g.current;if(F)return n(c,u),r(o.current)}return v.current||n(c,u),g.current}};return W.cancel=function(){var r=v.current;r&&(x?cancelAnimationFrame(v.current):clearTimeout(v.current)),f.current=0,m.current=o.current=d.current=v.current=null,r&&i&&i({})},W.isPending=function(){return!!v.current},W.flush=function(){return v.current?e(Date.now()):g.current},W},[h,F,u,D,y,x,s,A,i]);return T}function i(r,n){return r===n}function a(n,t,a){var o=a&&a.equalityFn||i,f=r(n),l=e({})[1],v=c(u(function(r){f.current=r,l({})},[l]),t,a,l),m=r(n);return o(m.current,n)||(v(n),m.current=n),[f.current,v]}function o(r,n,t){var e=void 0===t?{}:t,u=e.leading,i=e.trailing;return c(r,n,{maxWait:n,leading:void 0===u||u,trailing:void 0===i||i})}export{a as useDebounce,c as useDebouncedCallback,o as useThrottledCallback};\n//# sourceMappingURL=index.module.js.map\n","/**\n * Media query utility functions for handling responsive behaviors\n */\n\n/**\n * Creates and returns a MediaQueryList object\n * @param query - CSS media query string (e.g. '(max-width: 768px)')\n * @returns MediaQueryList object or null if browser doesn't support matchMedia\n */\nexport function createMediaQuery(query: string): MediaQueryList | null {\n  if (typeof window === 'undefined') return null;\n\n  try {\n    return window.matchMedia(query);\n  } catch (error) {\n    console.error('Error creating media query:', error);\n    return null;\n  }\n}\n\n/**\n * Adds change and resize listeners for the provided media query\n * @param currentMedia - MediaQueryList object to attach listeners to\n * @param handleMediaChange - Callback function for media query changes\n * @param handleResize - Callback function for window resize events\n */\nexport function addMediaListeners(\n  currentMedia: MediaQueryList | null,\n  handleMediaChange: (event: MediaQueryListEvent | MediaQueryList) => void,\n  handleResize: () => void,\n): void {\n  if (!currentMedia || typeof window === 'undefined') return;\n\n  try {\n    currentMedia.addEventListener('change', handleMediaChange);\n    window.addEventListener('resize', handleResize);\n  } catch (error) {\n    console.error('Error adding media listeners:', error);\n  }\n}\n\n/**\n * Removes change and resize listeners to prevent memory leaks\n * @param currentMedia - MediaQueryList object to detach listeners from\n * @param handleMediaChange - Callback function to remove from media query changes\n * @param handleResize - Callback function to remove from window resize events\n */\nexport function removeMediaListeners(\n  currentMedia: MediaQueryList | null,\n  handleMediaChange: (event: MediaQueryListEvent | MediaQueryList) => void,\n  handleResize: () => void,\n): void {\n  if (typeof window === 'undefined') return;\n\n  try {\n    if (currentMedia) {\n      currentMedia.removeEventListener('change', handleMediaChange);\n    }\n    window.removeEventListener('resize', handleResize);\n  } catch (error) {\n    console.error('Error removing media listeners:', error);\n  }\n}\n","import { useCallback, useEffect, useRef, useState } from 'react';\nimport { useDebouncedCallback } from 'use-debounce';\nimport {\n  createMediaQuery,\n  addMediaListeners,\n  removeMediaListeners,\n} from '../../utils/mediaQueryUtils';\n\n/**\n * Configuration options for the useMatchMedia hook\n */\ninterface MatchMediaOptions {\n  /** Callback function to execute when media query matches */\n  onMatch?: () => void;\n  /** Whether the hook is enabled */\n  enabled?: boolean;\n  /** Debounce delay in milliseconds */\n  debounceDelay?: number;\n}\n\n/**\n * Custom hook that tracks if a media query matches and executes a callback on matches\n *\n * @param query - The media query string to match against\n * @param options - Configuration options\n * @returns Boolean indicating if the media query currently matches\n *\n * @example\n * ```tsx\n * const isMobile = useMatchMedia('(max-width: 768px)', {\n *   onMatch: () => console.log('Mobile view detected'),\n *   debounceDelay: 200\n * });\n * ```\n */\nexport const useMatchMedia = (\n  query: string,\n  { onMatch, enabled = true, debounceDelay = 100 }: MatchMediaOptions = {},\n): boolean => {\n  const [matches, setMatches] = useState<boolean>(false);\n  const mediaQuery = useRef<MediaQueryList | null>(null);\n  const isCleanedUp = useRef<boolean>(false);\n\n  // Stable callback references to prevent unnecessary effect re-runs\n  const handleMediaChange = useCallback(\n    (event: MediaQueryListEvent | MediaQueryList) => {\n      if (isCleanedUp.current) return;\n      setMatches(event.matches);\n    },\n    [],\n  );\n\n  const handleResize = useDebouncedCallback(\n    () => {\n      if (!mediaQuery.current || isCleanedUp.current) return;\n\n      const currentMatches = mediaQuery.current.matches;\n      setMatches(currentMatches);\n    },\n    debounceDelay,\n    { maxWait: 1000 },\n  );\n\n  // Setup media query listener\n  useEffect(() => {\n    if (!enabled || typeof window === 'undefined') {\n      return;\n    }\n\n    isCleanedUp.current = false;\n\n    // Cleanup previous mediaQuery if it exists\n    if (mediaQuery.current) {\n      removeMediaListeners(mediaQuery.current, handleMediaChange, handleResize);\n    }\n\n    mediaQuery.current = createMediaQuery(query);\n    const currentMedia = mediaQuery.current;\n\n    if (!currentMedia) {\n      return;\n    }\n\n    // Initial check\n    handleMediaChange(currentMedia);\n\n    // Add event listeners\n    addMediaListeners(currentMedia, handleMediaChange, handleResize);\n\n    // Cleanup\n    return () => {\n      isCleanedUp.current = true;\n      if (currentMedia) {\n        removeMediaListeners(currentMedia, handleMediaChange, handleResize);\n      }\n      handleResize.cancel(); // Cancel any pending debounced calls\n      mediaQuery.current = null; // Clear the ref\n    };\n  }, [query, enabled, handleMediaChange, handleResize]); // Removed createMediaQuery dependency to avoid infinite loops\n\n  // Execute callback when matches changes - use ref to avoid stale closure\n  const onMatchRef = useRef(onMatch);\n  onMatchRef.current = onMatch;\n\n  useEffect(() => {\n    if (matches && onMatchRef.current) {\n      onMatchRef.current();\n    }\n  }, [matches]);\n\n  return matches;\n};\n","/**\n * Comprehensive internationalization configuration for React Chrono Timeline\n *\n * This interface provides complete localization support for all user-facing\n * text content within the timeline component, including navigation controls,\n * search functionality, accessibility labels, and interactive elements.\n */\n\n/**\n * Navigation control text labels\n */\nexport interface NavigationTexts {\n  /** Label for the first item button */\n  first?: string;\n  /** Label for the last item button */\n  last?: string;\n  /** Label for the next item button */\n  next?: string;\n  /** Label for the previous item button */\n  previous?: string;\n  /** Label for the play slideshow button */\n  play?: string;\n  /** Label for the stop/pause slideshow button */\n  stop?: string;\n  /** Label for the pause slideshow button */\n  pause?: string;\n  /** Label for the resume slideshow button */\n  resume?: string;\n}\n\n/**\n * Search functionality text labels\n */\nexport interface SearchTexts {\n  /** Placeholder text for search input field */\n  placeholder?: string;\n  /** ARIA label for search input field */\n  ariaLabel?: string;\n  /** Label for clear search button */\n  clearLabel?: string;\n  /** Label for next match button */\n  nextMatch?: string;\n  /** Label for previous match button */\n  previousMatch?: string;\n  /** Text template for search results count (uses {current} and {total} placeholders) */\n  resultsCount?: string;\n  /** Text when no search results found */\n  noResults?: string;\n  /** ARIA label for search navigation controls */\n  navigationLabel?: string;\n}\n\n/**\n * Theme and display mode text labels\n */\nexport interface ThemeTexts {\n  /** Label for dark mode button */\n  darkMode?: string;\n  /** Label for light mode button */\n  lightMode?: string;\n  /** Label for theme toggle button */\n  toggleTheme?: string;\n}\n\n/**\n * Layout and view mode text labels\n */\nexport interface LayoutTexts {\n  /** Label for vertical layout mode */\n  vertical?: string;\n  /** Label for horizontal layout mode */\n  horizontal?: string;\n  /** Label for alternating layout mode */\n  alternating?: string;\n  /** Label for horizontal-all layout mode */\n  horizontalAll?: string;\n  /** Label for layout switcher */\n  switchLayout?: string;\n  /** ARIA label for layout selection */\n  layoutSelection?: string;\n}\n\n/**\n * Fullscreen functionality text labels\n */\nexport interface FullscreenTexts {\n  /** Label for enter fullscreen button */\n  enterFullscreen?: string;\n  /** Label for exit fullscreen button */\n  exitFullscreen?: string;\n  /** Error message when fullscreen is not supported */\n  notSupported?: string;\n  /** Error message when fullscreen request fails */\n  errorMessage?: string;\n}\n\n/**\n * Quick navigation text labels\n */\nexport interface QuickJumpTexts {\n  /** Label for quick jump dropdown */\n  jumpTo?: string;\n  /** ARIA label for quick jump selection */\n  jumpToAriaLabel?: string;\n  /** Template for timeline item options in quick jump (uses {index} and {title} placeholders) */\n  itemTemplate?: string;\n}\n\n/**\n * Content interaction text labels\n */\nexport interface ContentTexts {\n  /** Label for read more button */\n  readMore?: string;\n  /** Label for show less button */\n  showLess?: string;\n  /** Label for expand content button */\n  expand?: string;\n  /** Label for collapse content button */\n  collapse?: string;\n  /** ARIA label for card interactions */\n  cardInteraction?: string;\n}\n\n/**\n * Loading and status text labels\n */\nexport interface StatusTexts {\n  /** Loading message */\n  loading?: string;\n  /** Error message for general errors */\n  error?: string;\n  /** Message when no items are available */\n  noItems?: string;\n  /** Message when timeline is empty */\n  empty?: string;\n}\n\n/**\n * Accessibility text labels for screen readers\n */\nexport interface AccessibilityTexts {\n  /** ARIA label for timeline navigation group */\n  timelineNavigation?: string;\n  /** ARIA label for timeline container */\n  timelineContainer?: string;\n  /** ARIA label for individual timeline items */\n  timelineItem?: string;\n  /** ARIA label for active timeline item */\n  activeItem?: string;\n  /** ARIA label for timeline point/marker */\n  timelinePoint?: string;\n  /** ARIA label for timeline card */\n  timelineCard?: string;\n  /** ARIA label for nested timeline items */\n  nestedItems?: string;\n  /** Template for item position announcement (uses {current} and {total} placeholders) */\n  itemPosition?: string;\n}\n\n/**\n * Density and view options text labels\n */\nexport interface ViewTexts {\n  /** Label for compact view */\n  compact?: string;\n  /** Label for detailed view */\n  detailed?: string;\n  /** Label for view density toggle */\n  toggleDensity?: string;\n  /** ARIA label for density selection */\n  densitySelection?: string;\n}\n\n/**\n * Keyboard navigation help text\n */\nexport interface KeyboardTexts {\n  /** Help text for arrow key navigation */\n  arrowKeys?: string;\n  /** Help text for home key */\n  homeKey?: string;\n  /** Help text for end key */\n  endKey?: string;\n  /** Help text for enter key */\n  enterKey?: string;\n  /** Help text for escape key */\n  escapeKey?: string;\n  /** Help text for tab navigation */\n  tabNavigation?: string;\n  /** General keyboard navigation help */\n  keyboardHelp?: string;\n}\n\n/**\n * Complete internationalization configuration interface\n */\nexport interface TimelineI18nConfig {\n  /** Navigation control labels */\n  navigation?: NavigationTexts;\n  /** Search functionality labels */\n  search?: SearchTexts;\n  /** Theme and display mode labels */\n  theme?: ThemeTexts;\n  /** Layout and view mode labels */\n  layout?: LayoutTexts;\n  /** Fullscreen functionality labels */\n  fullscreen?: FullscreenTexts;\n  /** Quick navigation labels */\n  quickJump?: QuickJumpTexts;\n  /** Content interaction labels */\n  content?: ContentTexts;\n  /** Loading and status labels */\n  status?: StatusTexts;\n  /** Accessibility labels for screen readers */\n  accessibility?: AccessibilityTexts;\n  /** Density and view options labels */\n  view?: ViewTexts;\n  /** Keyboard navigation help text */\n  keyboard?: KeyboardTexts;\n}\n\n/**\n * Default English text values for all internationalization strings\n */\nexport const defaultI18nTexts: Required<TimelineI18nConfig> = {\n  navigation: {\n    first: 'Go to first item',\n    last: 'Go to last item',\n    next: 'Next item',\n    previous: 'Previous item',\n    play: 'Start slideshow',\n    stop: 'Stop slideshow',\n    pause: 'Pause slideshow',\n    resume: 'Resume slideshow',\n  },\n  search: {\n    placeholder: 'Search Timeline',\n    ariaLabel: 'Search timeline content',\n    clearLabel: 'Clear Search',\n    nextMatch: 'Next Match (Enter)',\n    previousMatch: 'Previous Match (Shift+Enter)',\n    resultsCount: '{current} of {total}',\n    noResults: 'No results found',\n    navigationLabel: 'Search navigation',\n  },\n  theme: {\n    darkMode: 'Switch to dark mode',\n    lightMode: 'Switch to light mode',\n    toggleTheme: 'Toggle theme',\n  },\n  layout: {\n    vertical: 'Vertical layout',\n    horizontal: 'Horizontal layout',\n    alternating: 'Alternating layout',\n    horizontalAll: 'Horizontal all layout',\n    switchLayout: 'Switch layout',\n    layoutSelection: 'Layout selection',\n  },\n  fullscreen: {\n    enterFullscreen: 'Enter fullscreen',\n    exitFullscreen: 'Exit fullscreen',\n    notSupported: 'Fullscreen not supported',\n    errorMessage: 'Failed to enter fullscreen mode',\n  },\n  quickJump: {\n    jumpTo: 'Jump to item',\n    jumpToAriaLabel: 'Quick navigation to timeline items',\n    itemTemplate: '{index}: {title}',\n  },\n  content: {\n    readMore: 'Read More',\n    showLess: 'Show Less',\n    expand: 'Expand',\n    collapse: 'Collapse',\n    cardInteraction: 'Timeline card content',\n  },\n  status: {\n    loading: 'Loading timeline...',\n    error: 'Error loading timeline',\n    noItems: 'No timeline items available',\n    empty: 'Timeline is empty',\n  },\n  accessibility: {\n    timelineNavigation: 'Timeline Navigation',\n    timelineContainer: 'Timeline Container',\n    timelineItem: 'Timeline Item',\n    activeItem: 'Active Timeline Item',\n    timelinePoint: 'Timeline Point',\n    timelineCard: 'Timeline Card',\n    nestedItems: 'Nested Timeline Items',\n    itemPosition: 'Item {current} of {total}',\n  },\n  view: {\n    compact: 'Compact view',\n    detailed: 'Detailed view',\n    toggleDensity: 'Toggle view density',\n    densitySelection: 'View density selection',\n  },\n  keyboard: {\n    arrowKeys: 'Use arrow keys to navigate between items',\n    homeKey: 'Press Home to go to first item',\n    endKey: 'Press End to go to last item',\n    enterKey: 'Press Enter to select item',\n    escapeKey: 'Press Escape to exit fullscreen or pause slideshow',\n    tabNavigation: 'Use Tab to navigate controls',\n    keyboardHelp: 'Keyboard navigation available',\n  },\n};\n\n/**\n * Utility function to merge user-provided i18n config with defaults\n */\nexport function mergeI18nConfig(\n  userConfig?: TimelineI18nConfig,\n): Required<TimelineI18nConfig> {\n  if (!userConfig) return defaultI18nTexts;\n\n  return {\n    navigation: { ...defaultI18nTexts.navigation, ...userConfig.navigation },\n    search: { ...defaultI18nTexts.search, ...userConfig.search },\n    theme: { ...defaultI18nTexts.theme, ...userConfig.theme },\n    layout: { ...defaultI18nTexts.layout, ...userConfig.layout },\n    fullscreen: { ...defaultI18nTexts.fullscreen, ...userConfig.fullscreen },\n    quickJump: { ...defaultI18nTexts.quickJump, ...userConfig.quickJump },\n    content: { ...defaultI18nTexts.content, ...userConfig.content },\n    status: { ...defaultI18nTexts.status, ...userConfig.status },\n    accessibility: {\n      ...defaultI18nTexts.accessibility,\n      ...userConfig.accessibility,\n    },\n    view: { ...defaultI18nTexts.view, ...userConfig.view },\n    keyboard: { ...defaultI18nTexts.keyboard, ...userConfig.keyboard },\n  };\n}\n\n/**\n * Utility function to interpolate template strings with variables\n * Example: interpolateString('{current} of {total}', { current: 1, total: 5 }) => '1 of 5'\n */\nexport function interpolateString(\n  template: string,\n  variables: Record<string, string | number>,\n): string {\n  return template.replace(/\\{(\\w+)\\}/g, (match, key) => {\n    const value = variables[key];\n    return value !== undefined && value !== null ? value.toString() : match;\n  });\n}\n","import { useMemo } from 'react';\nimport {\n  TimelineI18nConfig,\n  mergeI18nConfig,\n  interpolateString,\n} from '../models/TimelineI18n';\n\n/**\n * Hook for managing internationalization in the timeline component\n */\nexport function useI18n(i18nConfig?: TimelineI18nConfig) {\n  // Merge user configuration with defaults\n  const texts = useMemo(() => mergeI18nConfig(i18nConfig), [i18nConfig]);\n\n  // Helper function to get text with interpolation support\n  const getText = useMemo(() => {\n    return <K extends keyof typeof texts>(\n      category: K,\n      key: keyof (typeof texts)[K],\n      variables?: Record<string, string | number>,\n    ): string => {\n      const text = texts[category][key] as string;\n      if (!text) return '';\n\n      if (variables) {\n        return interpolateString(text, variables);\n      }\n\n      return text;\n    };\n  }, [texts]);\n\n  // Shorthand functions for common text categories\n  const navigation = useMemo(\n    () => ({\n      first: () => getText('navigation', 'first'),\n      last: () => getText('navigation', 'last'),\n      next: () => getText('navigation', 'next'),\n      previous: () => getText('navigation', 'previous'),\n      play: () => getText('navigation', 'play'),\n      stop: () => getText('navigation', 'stop'),\n      pause: () => getText('navigation', 'pause'),\n      resume: () => getText('navigation', 'resume'),\n    }),\n    [getText],\n  );\n\n  const search = useMemo(\n    () => ({\n      placeholder: () => getText('search', 'placeholder'),\n      ariaLabel: () => getText('search', 'ariaLabel'),\n      clearLabel: () => getText('search', 'clearLabel'),\n      nextMatch: () => getText('search', 'nextMatch'),\n      previousMatch: () => getText('search', 'previousMatch'),\n      resultsCount: (current: number, total: number) =>\n        getText('search', 'resultsCount', { current, total }),\n      noResults: () => getText('search', 'noResults'),\n      navigationLabel: () => getText('search', 'navigationLabel'),\n    }),\n    [getText],\n  );\n\n  const theme = useMemo(\n    () => ({\n      darkMode: () => getText('theme', 'darkMode'),\n      lightMode: () => getText('theme', 'lightMode'),\n      toggleTheme: () => getText('theme', 'toggleTheme'),\n    }),\n    [getText],\n  );\n\n  const layout = useMemo(\n    () => ({\n      vertical: () => getText('layout', 'vertical'),\n      horizontal: () => getText('layout', 'horizontal'),\n      alternating: () => getText('layout', 'alternating'),\n      horizontalAll: () => getText('layout', 'horizontalAll'),\n      switchLayout: () => getText('layout', 'switchLayout'),\n      layoutSelection: () => getText('layout', 'layoutSelection'),\n    }),\n    [getText],\n  );\n\n  const fullscreen = useMemo(\n    () => ({\n      enterFullscreen: () => getText('fullscreen', 'enterFullscreen'),\n      exitFullscreen: () => getText('fullscreen', 'exitFullscreen'),\n      notSupported: () => getText('fullscreen', 'notSupported'),\n      errorMessage: () => getText('fullscreen', 'errorMessage'),\n    }),\n    [getText],\n  );\n\n  const quickJump = useMemo(\n    () => ({\n      jumpTo: () => getText('quickJump', 'jumpTo'),\n      jumpToAriaLabel: () => getText('quickJump', 'jumpToAriaLabel'),\n      itemTemplate: (index: number, title: string) =>\n        getText('quickJump', 'itemTemplate', { index, title }),\n    }),\n    [getText],\n  );\n\n  const content = useMemo(\n    () => ({\n      readMore: () => getText('content', 'readMore'),\n      showLess: () => getText('content', 'showLess'),\n      expand: () => getText('content', 'expand'),\n      collapse: () => getText('content', 'collapse'),\n      cardInteraction: () => getText('content', 'cardInteraction'),\n    }),\n    [getText],\n  );\n\n  const status = useMemo(\n    () => ({\n      loading: () => getText('status', 'loading'),\n      error: () => getText('status', 'error'),\n      noItems: () => getText('status', 'noItems'),\n      empty: () => getText('status', 'empty'),\n    }),\n    [getText],\n  );\n\n  const accessibility = useMemo(\n    () => ({\n      timelineNavigation: () => getText('accessibility', 'timelineNavigation'),\n      timelineContainer: () => getText('accessibility', 'timelineContainer'),\n      timelineItem: () => getText('accessibility', 'timelineItem'),\n      activeItem: () => getText('accessibility', 'activeItem'),\n      timelinePoint: () => getText('accessibility', 'timelinePoint'),\n      timelineCard: () => getText('accessibility', 'timelineCard'),\n      nestedItems: () => getText('accessibility', 'nestedItems'),\n      itemPosition: (current: number, total: number) =>\n        getText('accessibility', 'itemPosition', { current, total }),\n    }),\n    [getText],\n  );\n\n  const view = useMemo(\n    () => ({\n      compact: () => getText('view', 'compact'),\n      detailed: () => getText('view', 'detailed'),\n      toggleDensity: () => getText('view', 'toggleDensity'),\n      densitySelection: () => getText('view', 'densitySelection'),\n    }),\n    [getText],\n  );\n\n  const keyboard = useMemo(\n    () => ({\n      arrowKeys: () => getText('keyboard', 'arrowKeys'),\n      homeKey: () => getText('keyboard', 'homeKey'),\n      endKey: () => getText('keyboard', 'endKey'),\n      enterKey: () => getText('keyboard', 'enterKey'),\n      escapeKey: () => getText('keyboard', 'escapeKey'),\n      tabNavigation: () => getText('keyboard', 'tabNavigation'),\n      keyboardHelp: () => getText('keyboard', 'keyboardHelp'),\n    }),\n    [getText],\n  );\n\n  return {\n    // Raw text configuration\n    texts,\n    // Generic text getter with interpolation\n    getText,\n    // Category-specific helpers\n    navigation,\n    search,\n    theme,\n    layout,\n    fullscreen,\n    quickJump,\n    content,\n    status,\n    accessibility,\n    view,\n    keyboard,\n  };\n}\n\n/**\n * Legacy compatibility helper - maps new i18n structure to old buttonTexts format\n */\nexport function mapI18nToButtonTexts(i18nConfig?: TimelineI18nConfig) {\n  const { navigation, search, theme } = useI18n(i18nConfig);\n\n  return {\n    first: navigation.first(),\n    last: navigation.last(),\n    next: navigation.next(),\n    previous: navigation.previous(),\n    play: navigation.play(),\n    stop: navigation.stop(),\n    searchPlaceholder: search.placeholder(),\n    searchAriaLabel: search.ariaLabel(),\n    clearSearch: search.clearLabel(),\n    nextMatch: search.nextMatch(),\n    previousMatch: search.previousMatch(),\n    dark: theme.darkMode(),\n    light: theme.lightMode(),\n  };\n}\n","/**\n * Modular text resolver utility for timeline components\n *\n * This utility provides a clean, maintainable way to resolve text values\n * with support for i18n, legacy buttonTexts, and fallbacks.\n */\n\nimport { ButtonTexts } from '@models/TimelineModel';\nimport { useI18n } from '@hooks/useI18n';\n\n/**\n * Text resolver interface that provides type-safe text resolution\n */\nexport interface TextResolver {\n  // Navigation texts\n  firstItem(): string;\n  lastItem(): string;\n  nextItem(): string;\n  previousItem(): string;\n  playSlideshow(): string;\n  stopSlideshow(): string;\n  pauseSlideshow(): string;\n  resumeSlideshow(): string;\n\n  // Search texts\n  searchPlaceholder(): string;\n  searchAriaLabel(): string;\n  clearSearch(): string;\n  nextMatch(): string;\n  previousMatch(): string;\n  searchResults(current: number, total: number): string;\n  noSearchResults(): string;\n  searchNavigation(): string;\n\n  // Theme texts\n  darkMode(): string;\n  lightMode(): string;\n  toggleTheme(): string;\n\n  // Layout texts\n  verticalLayout(): string;\n  horizontalLayout(): string;\n  alternatingLayout(): string;\n  horizontalAllLayout(): string;\n  switchLayout(): string;\n\n  // Fullscreen texts\n  enterFullscreen(): string;\n  exitFullscreen(): string;\n  fullscreenNotSupported(): string;\n  fullscreenError(): string;\n\n  // Content texts\n  readMore(): string;\n  showLess(): string;\n  expandContent(): string;\n  collapseContent(): string;\n\n  // Accessibility texts\n  timelineNavigation(): string;\n  timelineContainer(): string;\n  timelineItem(): string;\n  activeItem(): string;\n  itemPosition(current: number, total: number): string;\n\n  // Status texts\n  loading(): string;\n  error(): string;\n  noItems(): string;\n  empty(): string;\n}\n\n/**\n * Creates a text resolver that handles i18n, legacy, and default fallbacks\n */\nexport function createTextResolver(\n  i18nHelper?: ReturnType<typeof useI18n>,\n  buttonTexts?: ButtonTexts,\n): TextResolver {\n  // Helper function to resolve text with priority: i18n > legacy > default\n  const resolve = (\n    i18nGetter: (() => string) | undefined,\n    legacyValue: string | undefined,\n    defaultValue: string,\n  ): string => {\n    if (i18nGetter) {\n      const i18nValue = i18nGetter();\n      if (i18nValue !== undefined) return i18nValue;\n    }\n    return legacyValue !== undefined ? legacyValue : defaultValue;\n  };\n\n  return {\n    // Navigation texts\n    firstItem: () =>\n      resolve(\n        i18nHelper?.navigation.first,\n        buttonTexts?.first,\n        'Go to first item',\n      ),\n\n    lastItem: () =>\n      resolve(\n        i18nHelper?.navigation.last,\n        buttonTexts?.last,\n        'Go to last item',\n      ),\n\n    nextItem: () =>\n      resolve(i18nHelper?.navigation.next, buttonTexts?.next, 'Next item'),\n\n    previousItem: () =>\n      resolve(\n        i18nHelper?.navigation.previous,\n        buttonTexts?.previous,\n        'Previous item',\n      ),\n\n    playSlideshow: () =>\n      resolve(\n        i18nHelper?.navigation.play,\n        buttonTexts?.play,\n        'Start slideshow',\n      ),\n\n    stopSlideshow: () =>\n      resolve(i18nHelper?.navigation.stop, buttonTexts?.stop, 'Stop slideshow'),\n\n    pauseSlideshow: () =>\n      resolve(i18nHelper?.navigation.pause, undefined, 'Pause slideshow'),\n\n    resumeSlideshow: () =>\n      resolve(i18nHelper?.navigation.resume, undefined, 'Resume slideshow'),\n\n    // Search texts\n    searchPlaceholder: () =>\n      resolve(\n        i18nHelper?.search.placeholder,\n        (buttonTexts as any)?.searchPlaceholder,\n        'Search Timeline',\n      ),\n\n    searchAriaLabel: () =>\n      resolve(\n        i18nHelper?.search.ariaLabel,\n        (buttonTexts as any)?.searchAriaLabel,\n        'Search timeline content',\n      ),\n\n    clearSearch: () =>\n      resolve(\n        i18nHelper?.search.clearLabel,\n        (buttonTexts as any)?.clearSearch,\n        'Clear Search',\n      ),\n\n    nextMatch: () =>\n      resolve(\n        i18nHelper?.search.nextMatch,\n        (buttonTexts as any)?.nextMatch,\n        'Next Match (Enter)',\n      ),\n\n    previousMatch: () =>\n      resolve(\n        i18nHelper?.search.previousMatch,\n        (buttonTexts as any)?.previousMatch,\n        'Previous Match (Shift+Enter)',\n      ),\n\n    searchResults: (current: number, total: number) => {\n      return (\n        i18nHelper?.search.resultsCount(current, total) ||\n        `${current} of ${total}`\n      );\n    },\n\n    noSearchResults: () =>\n      resolve(i18nHelper?.search.noResults, undefined, 'No results found'),\n\n    searchNavigation: () =>\n      resolve(\n        i18nHelper?.search.navigationLabel,\n        undefined,\n        'Search navigation',\n      ),\n\n    // Theme texts\n    darkMode: () =>\n      resolve(\n        i18nHelper?.theme.darkMode,\n        (buttonTexts as any)?.dark,\n        'Switch to dark mode',\n      ),\n\n    lightMode: () =>\n      resolve(\n        i18nHelper?.theme.lightMode,\n        (buttonTexts as any)?.light,\n        'Switch to light mode',\n      ),\n\n    toggleTheme: () =>\n      resolve(i18nHelper?.theme.toggleTheme, undefined, 'Toggle theme'),\n\n    // Layout texts\n    verticalLayout: () =>\n      resolve(i18nHelper?.layout.vertical, undefined, 'Vertical layout'),\n\n    horizontalLayout: () =>\n      resolve(i18nHelper?.layout.horizontal, undefined, 'Horizontal layout'),\n\n    alternatingLayout: () =>\n      resolve(i18nHelper?.layout.alternating, undefined, 'Alternating layout'),\n\n    horizontalAllLayout: () =>\n      resolve(\n        i18nHelper?.layout.horizontalAll,\n        undefined,\n        'Horizontal all layout',\n      ),\n\n    switchLayout: () =>\n      resolve(i18nHelper?.layout.switchLayout, undefined, 'Switch layout'),\n\n    // Fullscreen texts\n    enterFullscreen: () =>\n      resolve(\n        i18nHelper?.fullscreen.enterFullscreen,\n        undefined,\n        'Enter fullscreen',\n      ),\n\n    exitFullscreen: () =>\n      resolve(\n        i18nHelper?.fullscreen.exitFullscreen,\n        undefined,\n        'Exit fullscreen',\n      ),\n\n    fullscreenNotSupported: () =>\n      resolve(\n        i18nHelper?.fullscreen.notSupported,\n        undefined,\n        'Fullscreen not supported',\n      ),\n\n    fullscreenError: () =>\n      resolve(\n        i18nHelper?.fullscreen.errorMessage,\n        undefined,\n        'Failed to enter fullscreen mode',\n      ),\n\n    // Content texts\n    readMore: () =>\n      resolve(i18nHelper?.content.readMore, undefined, 'Read More'),\n\n    showLess: () =>\n      resolve(i18nHelper?.content.showLess, undefined, 'Show Less'),\n\n    expandContent: () =>\n      resolve(i18nHelper?.content.expand, undefined, 'Expand'),\n\n    collapseContent: () =>\n      resolve(i18nHelper?.content.collapse, undefined, 'Collapse'),\n\n    // Accessibility texts\n    timelineNavigation: () =>\n      resolve(\n        i18nHelper?.accessibility.timelineNavigation,\n        undefined,\n        'Timeline Navigation',\n      ),\n\n    timelineContainer: () =>\n      resolve(\n        i18nHelper?.accessibility.timelineContainer,\n        undefined,\n        'Timeline Container',\n      ),\n\n    timelineItem: () =>\n      resolve(\n        i18nHelper?.accessibility.timelineItem,\n        undefined,\n        'Timeline Item',\n      ),\n\n    activeItem: () =>\n      resolve(\n        i18nHelper?.accessibility.activeItem,\n        undefined,\n        'Active Timeline Item',\n      ),\n\n    itemPosition: (current: number, total: number) => {\n      return (\n        i18nHelper?.accessibility.itemPosition(current, total) ||\n        `Item ${current} of ${total}`\n      );\n    },\n\n    // Status texts\n    loading: () =>\n      resolve(i18nHelper?.status.loading, undefined, 'Loading timeline...'),\n\n    error: () =>\n      resolve(i18nHelper?.status.error, undefined, 'Error loading timeline'),\n\n    noItems: () =>\n      resolve(\n        i18nHelper?.status.noItems,\n        undefined,\n        'No timeline items available',\n      ),\n\n    empty: () =>\n      resolve(i18nHelper?.status.empty, undefined, 'Timeline is empty'),\n  };\n}\n\n/**\n * Hook that provides a configured text resolver from the timeline context\n * Note: This should only be used within components that are wrapped by TimelineContextProvider\n */\nexport function useTextResolver(): TextResolver {\n  // This will be implemented when needed, for now components can directly access textResolver from context\n  // Components should use: const { textResolver } = useTimelineContext();\n  throw new Error(\n    'useTextResolver should be implemented when needed. Use useTimelineContext().textResolver instead.',\n  );\n}\n","/**\n * Unified Timeline Context Provider\n *\n * This provider replaces the multiple context layers with a single,\n * clean context system that properly handles all timeline props.\n */\nimport React, {\n  FunctionComponent,\n  useCallback,\n  useMemo,\n  useState,\n  useEffect,\n  createContext,\n  useContext,\n} from 'react';\nimport {\n  TimelineProps as TimelinePropsModel,\n  TextDensity,\n  ButtonTexts,\n  SlideShowType,\n} from '@models/TimelineModel';\nimport { Theme } from '@models/Theme';\nimport {\n  getDefaultButtonTexts,\n  getDefaultClassNames,\n  getDefaultThemeOrDark,\n  getSlideShowType,\n} from '@utils/index';\nimport { useMatchMedia } from '../effects/useMatchMedia';\nimport { TimelineI18nConfig } from '@models/TimelineI18n';\nimport { useI18n } from '@hooks/useI18n';\nimport { createTextResolver, TextResolver } from '@utils/textResolver';\n\n// ==========================================\n// CONTEXT INTERFACES\n// ==========================================\n\n/**\n * Static configuration that rarely changes\n */\nexport interface TimelineStaticConfig {\n  // Core layout\n  mode: NonNullable<TimelinePropsModel['mode']>;\n  cardHeight: number;\n  cardWidth: number;\n  cardLess: boolean;\n  flipLayout: boolean;\n  itemWidth: number;\n  lineWidth: number;\n\n  // Media configuration\n  mediaHeight: number;\n  mediaSettings: {\n    align: 'left' | 'right' | 'center';\n    fit: 'cover' | 'contain' | 'fill' | 'none';\n  };\n\n  // Timeline point configuration\n  timelinePointDimension: number;\n  timelinePointShape: 'circle' | 'square' | 'diamond';\n\n  // Interaction settings\n  disableNavOnKey: boolean;\n  disableAutoScrollOnClick: boolean;\n  disableInteraction: boolean;\n  disableClickOnCircle: boolean;\n  disableTimelinePoint: boolean;\n\n  // UI features\n  enableBreakPoint: boolean;\n  enableDarkToggle: boolean;\n  enableLayoutSwitch: boolean;\n  enableQuickJump: boolean;\n  focusActiveItemOnLoad: boolean;\n  highlightCardsOnHover: boolean;\n\n  // Cards and content\n  borderLessCards: boolean;\n  cardPositionHorizontal: 'TOP' | 'BOTTOM';\n  parseDetailsAsHTML: boolean;\n  useReadMore: boolean;\n  textOverlay: boolean;\n\n  // Scrolling\n  scrollable: boolean | { scrollbar: boolean };\n\n  // Toolbar\n  toolbarPosition: 'top' | 'bottom';\n  disableToolbar: boolean;\n  toolbarSearchConfig:\n    | {\n        width?: string;\n        maxWidth?: string;\n        minWidth?: string;\n        inputWidth?: string;\n        inputMaxWidth?: string;\n      }\n    | undefined;\n\n  // Slideshow\n  slideItemDuration: number;\n  showProgressOnSlideshow: boolean;\n  showOverallSlideshowProgress: boolean;\n\n  // Misc\n  titleDateFormat: string;\n  uniqueId: string;\n  nestedCardHeight: number;\n  contentDetailsHeight: number;\n  responsiveBreakPoint: number;\n  noUniqueId: boolean;\n  isChild: boolean;\n}\n\n/**\n * Dynamic state that changes frequently\n */\nexport interface TimelineDynamicState {\n  isDarkMode: boolean;\n  isMobile: boolean;\n  showAllCardsHorizontal: boolean;\n  textContentDensity: TextDensity;\n\n  // Actions\n  toggleDarkMode: () => void;\n  updateShowAllCardsHorizontal: (state: boolean) => void;\n  updateTextContentDensity: (density: TextDensity) => void;\n}\n\n/**\n * Memoized objects that change less frequently\n */\nexport interface TimelineMemoizedObjects {\n  theme: Theme;\n  buttonTexts: ButtonTexts;\n  classNames: Record<string, string>;\n  fontSizes: Record<string, string>;\n  isDarkMode: boolean;\n  semanticTags: Record<string, string>;\n  slideShowType: SlideShowType;\n  googleFonts: any;\n  i18nConfig: TimelineI18nConfig | undefined;\n  i18nHelper: ReturnType<typeof useI18n>;\n  textResolver: TextResolver;\n}\n\n/**\n * Combined context interface\n */\nexport interface TimelineContextValue\n  extends TimelineStaticConfig,\n    TimelineDynamicState,\n    TimelineMemoizedObjects {\n  // Computed values\n  computedCardHeight: number;\n  computedActiveItemIndex: number;\n  computedMediaAlign: string;\n\n  // Timeline-specific data\n  items?: TimelinePropsModel['items'];\n  activeItemIndex?: number;\n\n  // Callbacks\n  onScrollEnd: () => void;\n  onThemeChange: () => void;\n}\n\n// ==========================================\n// CONTEXT CREATION\n// ==========================================\n\nconst TimelineContext = createContext<TimelineContextValue | null>(null);\n\n// ==========================================\n// PROVIDER PROPS AND COMPONENT\n// ==========================================\n\nexport interface TimelineContextProviderProps\n  extends Omit<Partial<TimelinePropsModel>, 'children'> {\n  children: React.ReactNode;\n  toolbarSearchConfig?: {\n    width?: string;\n    maxWidth?: string;\n    minWidth?: string;\n    inputWidth?: string;\n    inputMaxWidth?: string;\n  };\n  googleFonts?: {\n    fontFamily: string;\n    elements?: {\n      title?: { weight?: any; style?: any; size?: string };\n      cardTitle?: { weight?: any; style?: any; size?: string };\n      cardSubtitle?: { weight?: any; style?: any; size?: string };\n      cardText?: { weight?: any; style?: any; size?: string };\n      controls?: { weight?: any; style?: any; size?: string };\n    };\n    weights?: any[];\n    display?: string;\n    preconnect?: boolean;\n  };\n  i18nConfig?: TimelineI18nConfig;\n}\n\nexport const TimelineContextProvider: FunctionComponent<\n  TimelineContextProviderProps\n> = (props) => {\n  const {\n    children,\n    // Core props with defaults\n    mode = 'VERTICAL_ALTERNATING',\n    cardHeight = 200,\n    cardWidth,\n    cardLess = false,\n    flipLayout,\n    itemWidth = 200,\n    lineWidth = 3,\n\n    // Media props\n    mediaHeight = 200,\n    mediaSettings,\n\n    // Timeline point props\n    timelinePointDimension = 16,\n    timelinePointShape = 'circle',\n\n    // Interaction props\n    disableNavOnKey = false,\n    disableAutoScrollOnClick = false,\n    disableInteraction = false,\n    disableClickOnCircle = false,\n    disableTimelinePoint = false,\n\n    // UI feature props\n    enableBreakPoint = true,\n    enableDarkToggle = false,\n    enableLayoutSwitch = true,\n    enableQuickJump = true,\n    focusActiveItemOnLoad = false,\n    highlightCardsOnHover = false,\n\n    // Cards and content props\n    borderLessCards = false,\n    cardPositionHorizontal,\n    parseDetailsAsHTML = false,\n    useReadMore = true,\n    textOverlay,\n\n    // Scrolling props (default aligns with legacy behavior: no scrollbar)\n    scrollable = { scrollbar: false },\n\n    // Toolbar props\n    toolbarPosition = 'top',\n    disableToolbar = false,\n    toolbarSearchConfig,\n\n    // Slideshow props\n    slideItemDuration = 2000,\n    showProgressOnSlideshow = true,\n    showOverallSlideshowProgress,\n    slideShow,\n    slideShowType,\n\n    // Other props\n    titleDateFormat = 'MMM DD, YYYY',\n    uniqueId = 'react-chrono',\n    nestedCardHeight = 150,\n    contentDetailsHeight = 10,\n    responsiveBreakPoint = 1024,\n    noUniqueId = false,\n    isChild = false,\n\n    // Dynamic props\n    darkMode = false,\n    showAllCardsHorizontal = false,\n    textDensity = 'HIGH' as TextDensity,\n\n    // Customization props\n    theme,\n    buttonTexts,\n    classNames,\n    fontSizes,\n    semanticTags,\n\n    // i18n props\n    i18nConfig,\n\n    // Data props\n    items,\n    activeItemIndex = 0,\n\n    // Callbacks\n    onScrollEnd,\n    onThemeChange,\n  } = props;\n\n  // ==========================================\n  // DYNAMIC STATE\n  // ==========================================\n  const [isDarkMode, setIsDarkMode] = useState(darkMode);\n  const [showAllCards, setShowAllCards] = useState(\n    mode === 'HORIZONTAL_ALL' ? true : showAllCardsHorizontal,\n  );\n  const [isMobileDetected, setIsMobileDetected] = useState(false);\n  const [textContentDensity, setTextContentDensity] =\n    useState<TextDensity>(textDensity);\n\n  // ==========================================\n  // CALLBACKS\n  // ==========================================\n  const toggleDarkMode = useCallback(() => {\n    setIsDarkMode(!isDarkMode);\n    onThemeChange?.();\n  }, [isDarkMode, onThemeChange]);\n\n  const updateShowAllCardsHorizontal = useCallback((state: boolean) => {\n    setShowAllCards(state);\n  }, []);\n\n  const updateTextContentDensity = useCallback((density: TextDensity) => {\n    setTextContentDensity(density);\n  }, []);\n\n  // ==========================================\n  // MODE SYNCHRONIZATION\n  // ==========================================\n  // Update showAllCardsHorizontal when mode or prop changes\n  useEffect(() => {\n    if (mode === 'HORIZONTAL_ALL') {\n      setShowAllCards(true);\n    } else if (mode === 'HORIZONTAL') {\n      // Respect the incoming prop to allow HORIZONTAL + showAllCardsHorizontal\n      setShowAllCards(showAllCardsHorizontal);\n    }\n  }, [mode, showAllCardsHorizontal]);\n\n  // ==========================================\n  // RESPONSIVE DETECTION\n  // ==========================================\n  useMatchMedia(`(max-width: ${responsiveBreakPoint - 1}px)`, {\n    onMatch: () => setIsMobileDetected(true),\n    enabled: enableBreakPoint,\n  });\n\n  useMatchMedia(`(min-width: ${responsiveBreakPoint}px)`, {\n    onMatch: () => setIsMobileDetected(false),\n    enabled: enableBreakPoint,\n  });\n\n  // ==========================================\n  // COMPUTED VALUES\n  // ==========================================\n  const computedCardHeight = useMemo(\n    () => (cardLess ? Math.min(cardHeight, 80) : cardHeight),\n    [cardLess, cardHeight],\n  );\n\n  const computedActiveItemIndex = useMemo(\n    () => (flipLayout && items ? items.length - 1 : 0),\n    [flipLayout, items?.length],\n  );\n\n  const computedMediaAlign = useMemo(\n    () => (mode === 'VERTICAL' && !textOverlay ? 'left' : 'center'),\n    [mode, textOverlay],\n  );\n\n  // ==========================================\n  // MEMOIZED OBJECTS\n  // ==========================================\n  const memoizedTheme = useMemo(\n    () => ({\n      ...getDefaultThemeOrDark(isDarkMode),\n      ...theme,\n    }),\n    [isDarkMode, theme],\n  );\n\n  // Setup i18n helper first\n  const i18nHelper = useI18n(i18nConfig);\n\n  // Create text resolver with i18n and legacy support\n  const textResolver = useMemo(\n    () => createTextResolver(i18nHelper, buttonTexts),\n    [i18nHelper, buttonTexts],\n  );\n\n  const memoizedButtonTexts = useMemo(\n    () => ({\n      ...getDefaultButtonTexts(),\n      ...buttonTexts,\n    }),\n    [buttonTexts],\n  );\n\n  const memoizedClassNames = useMemo(\n    () => ({\n      ...getDefaultClassNames(),\n      ...classNames,\n    }),\n    [classNames],\n  );\n\n  const memoizedFontSizes = useMemo(\n    () => ({\n      cardSubtitle: '0.85rem',\n      cardText: '1rem',\n      cardTitle: '1rem',\n      title: '1rem',\n      ...fontSizes,\n    }),\n    [fontSizes],\n  );\n\n  // Google Fonts integration\n  const googleFontsConfig = useMemo(() => {\n    // If no Google Fonts specified, use a default one\n    if (!props.googleFonts) {\n      return {\n        fontFamily: 'Inter',\n        elements: {\n          title: { weight: 600, style: 'normal' },\n          cardTitle: { weight: 500, style: 'normal' },\n          cardSubtitle: { weight: 400, style: 'normal' },\n          cardText: { weight: 400, style: 'normal' },\n          controls: { weight: 500, style: 'normal' },\n        },\n        weights: [400, 500, 600],\n        display: 'swap',\n        preconnect: true,\n      };\n    }\n\n    // If we have both fontSizes and googleFonts, merge them\n    if (props.googleFonts) {\n      return {\n        ...props.googleFonts,\n        elements: {\n          ...props.googleFonts.elements,\n          // Override sizes from fontSizes if provided\n          ...(memoizedFontSizes.title && {\n            title: {\n              ...props.googleFonts.elements?.title,\n              size: memoizedFontSizes.title,\n            },\n          }),\n          ...(memoizedFontSizes.cardTitle && {\n            cardTitle: {\n              ...props.googleFonts.elements?.cardTitle,\n              size: memoizedFontSizes.cardTitle,\n            },\n          }),\n          ...(memoizedFontSizes.cardSubtitle && {\n            cardSubtitle: {\n              ...props.googleFonts.elements?.cardSubtitle,\n              size: memoizedFontSizes.cardSubtitle,\n            },\n          }),\n          ...(memoizedFontSizes.cardText && {\n            cardText: {\n              ...props.googleFonts.elements?.cardText,\n              size: memoizedFontSizes.cardText,\n            },\n          }),\n        },\n      };\n    }\n\n    return null;\n  }, [props.googleFonts, memoizedFontSizes]);\n\n  const memoizedMediaSettings = useMemo(\n    () => ({\n      align: computedMediaAlign as 'left' | 'right' | 'center',\n      fit: 'cover' as const,\n      ...mediaSettings,\n    }),\n    [computedMediaAlign, mediaSettings],\n  );\n\n  const memoizedSemanticTags = useMemo(\n    () => ({\n      cardTitle: 'span' as const,\n      cardSubtitle: 'span' as const,\n      ...semanticTags,\n    }),\n    [semanticTags],\n  );\n\n  const memoizedSlideShowType = useMemo(\n    () => slideShowType ?? getSlideShowType(mode),\n    [slideShowType, mode],\n  );\n\n  // ==========================================\n  // CONTEXT VALUE\n  // ==========================================\n  const contextValue = useMemo(\n    (): TimelineContextValue => ({\n      // Static configuration\n      mode,\n      cardHeight,\n      cardWidth: cardWidth || 400,\n      cardLess,\n      flipLayout: flipLayout || false,\n      itemWidth,\n      lineWidth,\n      mediaHeight,\n      mediaSettings: memoizedMediaSettings,\n      timelinePointDimension,\n      timelinePointShape,\n      disableNavOnKey,\n      disableAutoScrollOnClick: disableAutoScrollOnClick || disableInteraction,\n      disableInteraction,\n      disableClickOnCircle: disableClickOnCircle || disableInteraction,\n      disableTimelinePoint: disableTimelinePoint || disableInteraction,\n      enableBreakPoint,\n      enableDarkToggle,\n      enableLayoutSwitch,\n      enableQuickJump,\n      focusActiveItemOnLoad,\n      highlightCardsOnHover,\n      borderLessCards,\n      cardPositionHorizontal: cardPositionHorizontal ?? 'BOTTOM',\n      parseDetailsAsHTML,\n      useReadMore,\n      textOverlay: textOverlay || false,\n      scrollable,\n      toolbarPosition,\n      disableToolbar,\n      toolbarSearchConfig,\n      slideItemDuration,\n      showProgressOnSlideshow: showProgressOnSlideshow && !!slideShow,\n      showOverallSlideshowProgress: showOverallSlideshowProgress ?? !!slideShow,\n      titleDateFormat,\n      uniqueId,\n      nestedCardHeight,\n      contentDetailsHeight: Math.max(contentDetailsHeight, mediaHeight * 0.75),\n      responsiveBreakPoint,\n      noUniqueId,\n      isChild,\n\n      // Dynamic state\n      isDarkMode,\n      isMobile: isMobileDetected,\n      showAllCardsHorizontal: showAllCards,\n      textContentDensity,\n      toggleDarkMode,\n      updateShowAllCardsHorizontal,\n      updateTextContentDensity,\n\n      // Memoized objects\n      theme: memoizedTheme,\n      buttonTexts: memoizedButtonTexts,\n      classNames: memoizedClassNames,\n      fontSizes: memoizedFontSizes,\n      semanticTags: memoizedSemanticTags,\n      slideShowType: memoizedSlideShowType,\n      googleFonts: googleFontsConfig,\n      i18nConfig,\n      i18nHelper,\n      textResolver,\n\n      // Computed values\n      computedCardHeight,\n      computedActiveItemIndex,\n      computedMediaAlign,\n\n      // Timeline-specific data\n      items,\n      activeItemIndex,\n\n      // Callbacks\n      onScrollEnd: onScrollEnd || (() => {}),\n      onThemeChange: onThemeChange || (() => {}),\n    }),\n    [\n      // Static config dependencies\n      mode,\n      cardHeight,\n      cardWidth,\n      cardLess,\n      flipLayout,\n      itemWidth,\n      lineWidth,\n      mediaHeight,\n      memoizedMediaSettings,\n      timelinePointDimension,\n      timelinePointShape,\n      disableNavOnKey,\n      disableAutoScrollOnClick,\n      disableInteraction,\n      disableClickOnCircle,\n      disableTimelinePoint,\n      enableBreakPoint,\n      enableDarkToggle,\n      enableLayoutSwitch,\n      enableQuickJump,\n      focusActiveItemOnLoad,\n      highlightCardsOnHover,\n      borderLessCards,\n      cardPositionHorizontal,\n      parseDetailsAsHTML,\n      useReadMore,\n      textOverlay,\n      scrollable,\n      toolbarPosition,\n      disableToolbar,\n      toolbarSearchConfig,\n      slideItemDuration,\n      showProgressOnSlideshow,\n      showOverallSlideshowProgress,\n      slideShow,\n      titleDateFormat,\n      uniqueId,\n      nestedCardHeight,\n      contentDetailsHeight,\n      responsiveBreakPoint,\n      noUniqueId,\n      isChild,\n\n      // Dynamic state dependencies\n      isDarkMode,\n      isMobileDetected,\n      showAllCards,\n      textContentDensity,\n      toggleDarkMode,\n      updateShowAllCardsHorizontal,\n      updateTextContentDensity,\n\n      // Memoized objects dependencies\n      memoizedTheme,\n      memoizedButtonTexts,\n      memoizedClassNames,\n      memoizedFontSizes,\n      memoizedSemanticTags,\n      memoizedSlideShowType,\n      googleFontsConfig,\n      i18nConfig,\n      textResolver,\n\n      // Computed values dependencies\n      computedCardHeight,\n      computedActiveItemIndex,\n      computedMediaAlign,\n\n      // Data dependencies\n      items,\n      activeItemIndex,\n\n      // Callback dependencies\n      onScrollEnd,\n      onThemeChange,\n    ],\n  );\n\n  return (\n    <TimelineContext.Provider value={contextValue}>\n      {children}\n    </TimelineContext.Provider>\n  );\n};\n\n// ==========================================\n// CONTEXT HOOK\n// ==========================================\n\n/**\n * Hook to access the timeline context\n */\nexport const useTimelineContext = (): TimelineContextValue => {\n  const context = useContext(TimelineContext);\n\n  if (!context) {\n    throw new Error(\n      'useTimelineContext must be used within a TimelineContextProvider',\n    );\n  }\n\n  return context;\n};\n\n/**\n * Hook to access only static configuration (performance optimized)\n */\nexport const useTimelineStaticConfig = (): TimelineStaticConfig => {\n  const context = useTimelineContext();\n\n  return useMemo(\n    () => ({\n      mode: context.mode,\n      cardHeight: context.cardHeight,\n      cardWidth: context.cardWidth || 400,\n      cardLess: context.cardLess,\n      flipLayout: context.flipLayout || false,\n      itemWidth: context.itemWidth,\n      lineWidth: context.lineWidth,\n      mediaHeight: context.mediaHeight,\n      mediaSettings: context.mediaSettings,\n      timelinePointDimension: context.timelinePointDimension,\n      timelinePointShape: context.timelinePointShape,\n      disableNavOnKey: context.disableNavOnKey,\n      disableAutoScrollOnClick: context.disableAutoScrollOnClick,\n      disableInteraction: context.disableInteraction,\n      disableClickOnCircle: context.disableClickOnCircle,\n      disableTimelinePoint: context.disableTimelinePoint,\n      enableBreakPoint: context.enableBreakPoint,\n      enableDarkToggle: context.enableDarkToggle,\n      enableLayoutSwitch: context.enableLayoutSwitch,\n      enableQuickJump: context.enableQuickJump,\n      focusActiveItemOnLoad: context.focusActiveItemOnLoad,\n      highlightCardsOnHover: context.highlightCardsOnHover,\n      borderLessCards: context.borderLessCards,\n      cardPositionHorizontal: context.cardPositionHorizontal,\n      parseDetailsAsHTML: context.parseDetailsAsHTML,\n      useReadMore: context.useReadMore,\n      textOverlay: context.textOverlay,\n      scrollable: context.scrollable,\n      toolbarPosition: context.toolbarPosition,\n      disableToolbar: context.disableToolbar,\n      toolbarSearchConfig: context.toolbarSearchConfig,\n      slideItemDuration: context.slideItemDuration,\n      showProgressOnSlideshow: context.showProgressOnSlideshow,\n      showOverallSlideshowProgress: context.showOverallSlideshowProgress,\n      titleDateFormat: context.titleDateFormat,\n      uniqueId: context.uniqueId,\n      nestedCardHeight: context.nestedCardHeight,\n      contentDetailsHeight: context.contentDetailsHeight,\n      responsiveBreakPoint: context.responsiveBreakPoint,\n      noUniqueId: context.noUniqueId,\n      isChild: context.isChild,\n    }),\n    [context],\n  );\n};\n\n/**\n * Hook to access only dynamic state (performance optimized)\n */\nexport const useTimelineDynamicState = (): TimelineDynamicState => {\n  const context = useTimelineContext();\n\n  return useMemo(\n    () => ({\n      isDarkMode: context.isDarkMode,\n      isMobile: context.isMobile,\n      showAllCardsHorizontal: context.showAllCardsHorizontal,\n      textContentDensity: context.textContentDensity,\n      toggleDarkMode: context.toggleDarkMode,\n      updateShowAllCardsHorizontal: context.updateShowAllCardsHorizontal,\n      updateTextContentDensity: context.updateTextContentDensity,\n    }),\n    [context],\n  );\n};\n\n/**\n * Hook to access only memoized objects (performance optimized)\n */\nexport const useTimelineMemoizedObjects = (): TimelineMemoizedObjects => {\n  const context = useTimelineContext();\n\n  return useMemo(\n    () => ({\n      theme: context.theme,\n      buttonTexts: context.buttonTexts,\n      classNames: context.classNames,\n      fontSizes: context.fontSizes,\n      isDarkMode: context.isDarkMode,\n      semanticTags: context.semanticTags,\n      slideShowType: context.slideShowType,\n      googleFonts: context.googleFonts,\n      i18nConfig: context.i18nConfig,\n      i18nHelper: context.i18nHelper,\n      textResolver: context.textResolver,\n    }),\n    [context],\n  );\n};\n","/*!\n\tCopyright (c) 2018 Jed Watson.\n\tLicensed under the MIT License (MIT), see\n\thttp://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = '';\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (arg) {\n\t\t\t\tclasses = appendClass(classes, parseValue(arg));\n\t\t\t}\n\t\t}\n\n\t\treturn classes;\n\t}\n\n\tfunction parseValue (arg) {\n\t\tif (typeof arg === 'string' || typeof arg === 'number') {\n\t\t\treturn arg;\n\t\t}\n\n\t\tif (typeof arg !== 'object') {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (Array.isArray(arg)) {\n\t\t\treturn classNames.apply(null, arg);\n\t\t}\n\n\t\tif (arg.toString !== Object.prototype.toString && !arg.toString.toString().includes('[native code]')) {\n\t\t\treturn arg.toString();\n\t\t}\n\n\t\tvar classes = '';\n\n\t\tfor (var key in arg) {\n\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\tclasses = appendClass(classes, key);\n\t\t\t}\n\t\t}\n\n\t\treturn classes;\n\t}\n\n\tfunction appendClass (value, newClass) {\n\t\tif (!newClass) {\n\t\t\treturn value;\n\t\t}\n\t\n\t\tif (value) {\n\t\t\treturn value + ' ' + newClass;\n\t\t}\n\t\n\t\treturn value + newClass;\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","import { Scroll } from '@models/TimelineHorizontalModel';\nimport { TimelineMode } from '@models/TimelineModel';\nimport { useMemo, useState } from 'react';\n\n/**\n * Hook to calculate the new scroll position based on the given mode and item width.\n *\n * @param {TimelineMode} mode - The mode of the timeline (HORIZONTAL, VERTICAL, or VERTICAL_ALTERNATING).\n * @param {number} [itemWidth] - Optional item width for horizontal mode.\n * @returns {[number, (e: HTMLElement, s: Partial<Scroll>) => void]} - The new offset and a function to compute the new offset.\n */\nconst useNewScrollPosition = (\n  mode: TimelineMode,\n  itemWidth?: number,\n): [number, (e: HTMLElement, s: Partial<Scroll>) => void] => {\n  // State to hold the new offset value\n  const [newOffset, setNewOffset] = useState(0);\n\n  const computeHorizontalOffset = (\n    scrollLeft: number,\n    clientWidth: number,\n    pointOffset: number,\n    pointWidth: number,\n    itemWidth: number,\n    setNewOffset: (offset: number) => void,\n  ) => {\n    const contrRight = scrollLeft + clientWidth;\n    const circRight = pointOffset + pointWidth;\n\n    const isVisible = pointOffset >= scrollLeft && circRight <= contrRight;\n    const isPartiallyVisible =\n      (pointOffset < scrollLeft && circRight > scrollLeft) ||\n      (circRight > contrRight && pointOffset < contrRight);\n\n    const leftGap = pointOffset - scrollLeft;\n    const rightGap = contrRight - pointOffset;\n\n    if (\n      !(isVisible || isPartiallyVisible) ||\n      (leftGap <= itemWidth && leftGap >= 0) ||\n      (rightGap <= itemWidth && rightGap >= 0)\n    ) {\n      setNewOffset(pointOffset - itemWidth);\n    }\n  };\n\n  const computeVerticalOffset = (\n    scrollTop: number,\n    clientHeight: number,\n    contentOffset: number,\n    contentHeight: number,\n    setNewOffset: (offset: number) => void,\n  ) => {\n    const contrBottom = scrollTop + clientHeight;\n    const circBottom = contentOffset + contentHeight;\n\n    const isVisible = contentOffset >= scrollTop && circBottom <= contrBottom;\n    const isPartiallyVisible =\n      (contentOffset < scrollTop && circBottom > scrollTop) ||\n      (circBottom > contrBottom && contentOffset < contrBottom);\n\n    const nOffset = contentOffset - contentHeight;\n    const notVisible = !isVisible || isPartiallyVisible;\n\n    if (notVisible && nOffset + contentHeight < contrBottom) {\n      setNewOffset(nOffset + Math.round(contentHeight / 2));\n    } else if (notVisible) {\n      setNewOffset(nOffset);\n    }\n  };\n\n  // Memoized function to compute the new offset value\n  const computeNewOffset = useMemo(\n    () => (parent: HTMLElement, scroll: Partial<Scroll>) => {\n      const { clientWidth, scrollLeft, scrollTop, clientHeight } = parent;\n      const {\n        pointOffset = 0,\n        pointWidth = 0,\n        contentHeight = 0,\n        contentOffset = 0,\n      } = scroll;\n\n      if ((mode === 'HORIZONTAL' || mode === 'HORIZONTAL_ALL') && itemWidth) {\n        computeHorizontalOffset(\n          scrollLeft,\n          clientWidth,\n          pointOffset,\n          pointWidth,\n          itemWidth,\n          setNewOffset,\n        );\n      } else if (mode === 'VERTICAL' || mode === 'VERTICAL_ALTERNATING') {\n        computeVerticalOffset(\n          scrollTop,\n          clientHeight,\n          contentOffset,\n          contentHeight,\n          setNewOffset,\n        );\n      }\n    },\n    [mode, itemWidth], // Dependencies for useMemo\n  );\n\n  // Returning the new offset and the function to compute it\n  return [newOffset, computeNewOffset];\n};\n\nexport default useNewScrollPosition;\n","import { useCallback, useEffect, useState, useRef } from 'react';\n\ninterface UseSlideshowProgressProps {\n  /** Whether the slideshow is currently running */\n  slideShowRunning: boolean;\n  /** Current active timeline item index */\n  activeTimelineItem: number;\n}\n\ninterface SlideshowProgressState {\n  /** Whether the slideshow progress is paused */\n  isPaused: boolean;\n  /** Pause the slideshow progress */\n  pauseProgress: () => void;\n  /** Resume the slideshow progress */\n  resumeProgress: () => void;\n}\n\n/**\n * Custom hook to manage overall slideshow progress state\n * Optimized for performance with better timeout management\n */\nexport const useSlideshowProgress = ({\n  slideShowRunning,\n  activeTimelineItem,\n}: UseSlideshowProgressProps): SlideshowProgressState => {\n  const [isPaused, setIsPaused] = useState(false);\n  const lastActiveItem = useRef(activeTimelineItem);\n\n  // Clean up when slideshow stops\n  useEffect(() => {\n    if (!slideShowRunning) {\n      setIsPaused(false);\n    }\n  }, [slideShowRunning]);\n\n  // Reset pause state when active item changes (optimized)\n  useEffect(() => {\n    if (slideShowRunning && lastActiveItem.current !== activeTimelineItem) {\n      lastActiveItem.current = activeTimelineItem;\n      if (isPaused) setIsPaused(false);\n    }\n  }, [activeTimelineItem, slideShowRunning, isPaused]);\n\n  // Pause the progress\n  const pauseProgress = useCallback(() => {\n    if (slideShowRunning && !isPaused) {\n      setIsPaused(true);\n    }\n  }, [slideShowRunning, isPaused]);\n\n  // Resume the progress\n  const resumeProgress = useCallback(() => {\n    if (slideShowRunning && isPaused) {\n      setIsPaused(false);\n    }\n  }, [slideShowRunning, isPaused]);\n\n  return {\n    isPaused,\n    pauseProgress,\n    resumeProgress,\n  };\n};\n","function toPrimitive(t, r) {\n  if (\"object\" != typeof t || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != typeof i) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\n\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == typeof i ? i : String(i);\n}\n\nfunction _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\n\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread2(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      _defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\n\nfunction mapValues(input, fn) {\n  var result = {};\n  for (var _key in input) {\n    result[_key] = fn(input[_key], _key);\n  }\n  return result;\n}\n\nvar shouldApplyCompound = (compoundCheck, selections, defaultVariants) => {\n  for (var key of Object.keys(compoundCheck)) {\n    var _selections$key;\n    if (compoundCheck[key] !== ((_selections$key = selections[key]) !== null && _selections$key !== void 0 ? _selections$key : defaultVariants[key])) {\n      return false;\n    }\n  }\n  return true;\n};\nvar createRuntimeFn = config => {\n  var runtimeFn = options => {\n    var className = config.defaultClassName;\n    var selections = _objectSpread2(_objectSpread2({}, config.defaultVariants), options);\n    for (var variantName in selections) {\n      var _selections$variantNa;\n      var variantSelection = (_selections$variantNa = selections[variantName]) !== null && _selections$variantNa !== void 0 ? _selections$variantNa : config.defaultVariants[variantName];\n      if (variantSelection != null) {\n        var selection = variantSelection;\n        if (typeof selection === 'boolean') {\n          // @ts-expect-error\n          selection = selection === true ? 'true' : 'false';\n        }\n        var selectionClassName =\n        // @ts-expect-error\n        config.variantClassNames[variantName][selection];\n        if (selectionClassName) {\n          className += ' ' + selectionClassName;\n        }\n      }\n    }\n    for (var [compoundCheck, compoundClassName] of config.compoundVariants) {\n      if (shouldApplyCompound(compoundCheck, selections, config.defaultVariants)) {\n        className += ' ' + compoundClassName;\n      }\n    }\n    return className;\n  };\n  runtimeFn.variants = () => Object.keys(config.variantClassNames);\n  runtimeFn.classNames = {\n    get base() {\n      return config.defaultClassName.split(' ')[0];\n    },\n    get variants() {\n      return mapValues(config.variantClassNames, classNames => mapValues(classNames, className => className.split(' ')[0]));\n    }\n  };\n  return runtimeFn;\n};\n\nexport { createRuntimeFn as c, mapValues as m };\n","function getVarName(variable) {\n  var matches = variable.match(/^var\\((.*)\\)$/);\n  if (matches) {\n    return matches[1];\n  }\n  return variable;\n}\n\nfunction get(obj, path) {\n  var result = obj;\n  for (var key of path) {\n    if (!(key in result)) {\n      throw new Error(\"Path \".concat(path.join(' -> '), \" does not exist in object\"));\n    }\n    result = result[key];\n  }\n  return result;\n}\n\nfunction walkObject(obj, fn) {\n  var path = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n  var clone = {};\n  for (var key in obj) {\n    var _value = obj[key];\n    var currentPath = [...path, key];\n    if (typeof _value === 'string' || typeof _value === 'number' || _value == null) {\n      clone[key] = fn(_value, currentPath);\n    } else if (typeof _value === 'object' && !Array.isArray(_value)) {\n      clone[key] = walkObject(_value, fn, currentPath);\n    } else {\n      console.warn(\"Skipping invalid key \\\"\".concat(currentPath.join('.'), \"\\\". Should be a string, number, null or object. Received: \\\"\").concat(Array.isArray(_value) ? 'Array' : typeof _value, \"\\\"\"));\n    }\n  }\n  return clone;\n}\n\nexport { get, getVarName, walkObject };\n","import { walkObject, get, getVarName } from '@vanilla-extract/private';\n\nfunction assignInlineVars(varsOrContract, tokens) {\n  var styles = {};\n  if (typeof tokens === 'object') {\n    var _contract = varsOrContract;\n    walkObject(tokens, (value, path) => {\n      if (value == null) {\n        return;\n      }\n      var varName = get(_contract, path);\n      styles[getVarName(varName)] = String(value);\n    });\n  } else {\n    var _vars = varsOrContract;\n    for (var varName in _vars) {\n      var value = _vars[varName];\n      if (value == null) {\n        continue;\n      }\n      styles[getVarName(varName)] = value;\n    }\n  }\n  Object.defineProperty(styles, 'toString', {\n    value: function value() {\n      return Object.keys(this).map(key => \"\".concat(key, \":\").concat(this[key])).join(';');\n    },\n    writable: false\n  });\n  return styles;\n}\n\nfunction setVar(element, variable, value) {\n  element.style.setProperty(getVarName(variable), value);\n}\nfunction setElementVars(element, varsOrContract, tokens) {\n  if (typeof tokens === 'object') {\n    var _contract = varsOrContract;\n    walkObject(tokens, (value, path) => {\n      if (value == null) {\n        return;\n      }\n      setVar(element, get(_contract, path), String(value));\n    });\n  } else {\n    var _vars = varsOrContract;\n    for (var varName in _vars) {\n      var value = _vars[varName];\n      if (value == null) {\n        continue;\n      }\n      setVar(element, varName, _vars[varName]);\n    }\n  }\n}\n\nexport { assignInlineVars, setElementVars };\n","import type { CSSProperties } from 'react';\nimport type { Theme } from '../models/Theme';\nimport { vars } from './tokens.css';\nimport { tokens } from './tokens/index.css';\nimport { assignInlineVars } from '@vanilla-extract/dynamic';\n\n/**\n * Checks if a custom theme object has any user-defined properties\n */\nexport function hasCustomTheme(theme?: Theme): boolean {\n  return theme !== undefined && Object.keys(theme).length > 0;\n}\n\n/**\n * Computes CSS variables from a theme object.\n * Returns empty object for default themes to avoid CSS var duplication.\n * Only returns vars when custom theme properties are provided.\n */\nexport function computeCssVarsFromTheme(\n  theme: Theme | undefined,\n  isDarkMode?: boolean,\n): CSSProperties {\n  // If no custom theme provided, return empty - let vanilla-extract theme classes handle it\n  if (!hasCustomTheme(theme)) {\n    return {};\n  }\n\n  const t = theme ?? {};\n\n  // Determine if we're in dark mode based on explicit flag or theme properties\n  const darkMode =\n    isDarkMode ??\n    (t.timelineBgColor === '#000000' ||\n      t.cardBgColor === '#1f2937' ||\n      t.textColor === '#ffffff' ||\n      t.textColor === '#f9fafb');\n\n  // Default colors based on theme mode\n  const defaultBackground = darkMode ? '#1f2937' : '#ffffff';\n  const defaultText = darkMode ? '#f9fafb' : '#111827';\n  const defaultCardBg = darkMode ? '#374151' : '#ffffff';\n  const defaultMuted = darkMode ? '#9ca3af' : '#6b7280';\n  const defaultToolbarBg = darkMode ? '#1f2937' : '#f1f5f9';\n  const defaultToolbarBtnBg = darkMode ? '#374151' : '#ffffff';\n  const defaultToolbarText = darkMode ? '#f9fafb' : '#1e293b';\n  const defaultButtonBorder = darkMode ? '#4b5563' : '#e2e8f0';\n  const defaultButtonHoverBg = darkMode ? '#4b5563' : '#e2e8f0';\n  const defaultShadow = darkMode ? 'rgba(0,0,0,0.3)' : 'rgba(0,0,0,0.1)';\n\n  return {\n    // New comprehensive token system mapping\n    ...assignInlineVars({\n      // Semantic color tokens\n      [tokens.semantic.color.text.primary]: t.textColor ?? defaultText,\n      [tokens.semantic.color.text.secondary]:\n        t.cardSubtitleColor ?? (darkMode ? '#d1d5db' : '#374151'),\n      [tokens.semantic.color.text.muted]:\n        t.detailsColor ?? (darkMode ? '#9ca3af' : '#6b7280'),\n      [tokens.semantic.color.text.inverse]: darkMode\n        ? defaultBackground\n        : defaultText,\n\n      // Background colors\n      [tokens.semantic.color.background.primary]:\n        t.timelineBgColor ?? t.cardBgColor ?? defaultBackground,\n      [tokens.semantic.color.background.secondary]:\n        t.cardDetailsBackGround ?? (darkMode ? '#1f2937' : '#f8fafc'),\n      [tokens.semantic.color.background.elevated]:\n        t.cardBgColor ?? defaultCardBg,\n      [tokens.semantic.color.background.overlay]: darkMode\n        ? '#00000080'\n        : '#ffffff80',\n\n      // Interactive colors\n      [tokens.semantic.color.interactive.primary]: t.primary ?? '#3b82f6',\n      [tokens.semantic.color.interactive.primaryHover]:\n        t.buttonHoverBorderColor ?? t.primary ?? '#2563eb',\n      [tokens.semantic.color.interactive.primaryActive]:\n        t.titleColorActive ?? (darkMode ? '#60a5fa' : '#1d4ed8'),\n      [tokens.semantic.color.interactive.secondary]:\n        t.secondary ?? (darkMode ? '#94a3b8' : '#64748b'),\n      [tokens.semantic.color.interactive.secondaryHover]:\n        t.buttonHoverBgColor ?? defaultButtonHoverBg,\n      [tokens.semantic.color.interactive.muted]: defaultMuted,\n      [tokens.semantic.color.interactive.mutedHover]: defaultButtonHoverBg,\n\n      // Border colors\n      [tokens.semantic.color.border.default]:\n        t.buttonBorderColor ?? defaultButtonBorder,\n      [tokens.semantic.color.border.muted]: darkMode ? '#4b5563' : '#e5e7eb',\n      [tokens.semantic.color.border.emphasis]:\n        t.buttonActiveBorderColor ?? t.primary ?? '#3b82f6',\n      [tokens.semantic.color.border.interactive]:\n        t.buttonHoverBorderColor ?? t.primary ?? '#3b82f6',\n\n      // Status colors\n      [tokens.semantic.color.status.success]: '#22c55e',\n      [tokens.semantic.color.status.warning]: '#eab308',\n      [tokens.semantic.color.status.error]: '#ef4444',\n      [tokens.semantic.color.status.info]: t.primary ?? '#3b82f6',\n\n      // Icon colors\n      [tokens.semantic.color.icon.default]:\n        t.iconColor ?? t.primary ?? '#3b82f6',\n      [tokens.semantic.color.icon.muted]: darkMode ? '#9ca3af' : '#6b7280',\n      [tokens.semantic.color.icon.emphasis]: t.primary ?? '#3b82f6',\n\n      // Component-specific tokens\n      [tokens.component.timeline.line.color]: t.primary ?? '#3b82f6',\n      [tokens.component.timeline.line.width]: '2px',\n      [tokens.component.timeline.point.color.active]: t.primary ?? '#3b82f6',\n      [tokens.component.timeline.point.color.inactive]: defaultMuted,\n      [tokens.component.timeline.point.color.hover]:\n        t.buttonHoverBorderColor ?? t.primary ?? '#2563eb',\n      [tokens.component.timeline.point.size.sm]: '8px',\n      [tokens.component.timeline.point.size.md]: '12px',\n      [tokens.component.timeline.point.size.lg]: '16px',\n      [tokens.component.timeline.card.width.vertical]: '85%',\n      [tokens.component.timeline.card.width.horizontal]: '280px',\n      [tokens.component.timeline.card.width.min]: '280px',\n      [tokens.component.timeline.card.width.max]: '400px',\n      [tokens.component.timeline.card.spacing.vertical]: '1rem',\n      [tokens.component.timeline.card.spacing.horizontal]: '2rem',\n\n      // Spacing tokens\n      [tokens.semantic.spacing.xs]: '4px',\n      [tokens.semantic.spacing.sm]: '8px',\n      [tokens.semantic.spacing.md]: '16px',\n      [tokens.semantic.spacing.lg]: '24px',\n      [tokens.semantic.spacing.xl]: '32px',\n      [tokens.semantic.spacing['2xl']]: '48px',\n      [tokens.semantic.spacing['3xl']]: '64px',\n\n      // Typography tokens\n      [tokens.semantic.typography.fontSize.caption]: '12px',\n      [tokens.semantic.typography.fontSize.body]: '16px',\n      [tokens.semantic.typography.fontSize.heading3]: '18px',\n      [tokens.semantic.typography.fontSize.heading2]: '20px',\n      [tokens.semantic.typography.fontSize.heading1]: '24px',\n      [tokens.semantic.typography.lineHeight.tight]: '1.2',\n      [tokens.semantic.typography.lineHeight.normal]: '1.5',\n      [tokens.semantic.typography.lineHeight.relaxed]: '1.8',\n      [tokens.semantic.typography.fontWeight.normal]: '400',\n      [tokens.semantic.typography.fontWeight.medium]: '500',\n      [tokens.semantic.typography.fontWeight.semibold]: '600',\n      [tokens.semantic.typography.fontWeight.bold]: '700',\n\n      // Border radius tokens\n      [tokens.semantic.borderRadius.sm]: '4px',\n      [tokens.semantic.borderRadius.md]: '8px',\n      [tokens.semantic.borderRadius.lg]: '12px',\n      [tokens.semantic.borderRadius.xl]: '16px',\n      [tokens.semantic.borderRadius.full]: '9999px',\n\n      // Shadow tokens\n      [tokens.semantic.shadow.card]: darkMode\n        ? '0 2px 4px rgba(0, 0, 0, 0.3)'\n        : '0 2px 4px rgba(0, 0, 0, 0.1)',\n      [tokens.semantic.shadow.cardHover]: darkMode\n        ? '0 4px 8px rgba(0, 0, 0, 0.4)'\n        : '0 4px 8px rgba(0, 0, 0, 0.15)',\n      [tokens.semantic.shadow.cardActive]: darkMode\n        ? '0 1px 2px rgba(0, 0, 0, 0.5)'\n        : '0 1px 2px rgba(0, 0, 0, 0.2)',\n      [tokens.semantic.shadow.toolbar]: t.shadowColor ?? defaultShadow,\n      [tokens.semantic.shadow.modal]: darkMode\n        ? '0 8px 16px rgba(0, 0, 0, 0.6)'\n        : '0 8px 16px rgba(0, 0, 0, 0.12)',\n\n      // Motion tokens\n      [tokens.semantic.motion.duration.fast]: '150ms',\n      [tokens.semantic.motion.duration.normal]: '300ms',\n      [tokens.semantic.motion.duration.slow]: '500ms',\n      [tokens.semantic.motion.easing.standard]: 'cubic-bezier(0.4, 0, 0.2, 1)',\n      [tokens.semantic.motion.easing.emphasized]: 'cubic-bezier(0.2, 0, 0, 1)',\n\n      // Z-index tokens\n      [tokens.semantic.zIndex.timelineCard]: '10',\n      [tokens.semantic.zIndex.controls]: '1000',\n      [tokens.semantic.zIndex.popover]: '1100',\n      [tokens.semantic.zIndex.outline]: '50',\n\n      // Toolbar tokens\n      [tokens.component.toolbar.height]: '56px',\n      [tokens.component.toolbar.padding]: '16px',\n      [tokens.component.toolbar.background]:\n        t.toolbarBgColor ?? defaultToolbarBg,\n      [tokens.component.toolbar.button.size]: '32px',\n      [tokens.component.toolbar.button.spacing]: '4px',\n\n      // Maintain backward compatibility with old vars system\n      [vars.color.background]:\n        t.timelineBgColor ?? t.cardBgColor ?? defaultBackground,\n      [vars.color.text]: t.textColor ?? defaultText,\n      [vars.color.primary]: t.primary ?? '#3b82f6',\n      [vars.color.secondary]: t.secondary ?? (darkMode ? '#94a3b8' : '#64748b'),\n      [vars.color.muted]: defaultMuted,\n      [vars.color.cardBg]: t.cardBgColor ?? defaultCardBg,\n      [vars.color.cardTitle]: t.cardTitleColor ?? t.titleColor ?? defaultText,\n      [vars.color.cardSubtitle]:\n        t.cardSubtitleColor ?? (darkMode ? '#d1d5db' : '#374151'),\n      [vars.color.cardDetails]:\n        t.cardDetailsColor ?? (darkMode ? '#9ca3af' : '#4b5563'),\n      [vars.color.toolbarBg]: t.toolbarBgColor ?? defaultToolbarBg,\n      [vars.color.toolbarBtnBg]: t.toolbarBtnBgColor ?? defaultToolbarBtnBg,\n      [vars.color.toolbarText]: t.toolbarTextColor ?? defaultToolbarText,\n      [vars.color.icon]: t.iconColor ?? t.primary ?? '#3b82f6',\n      [vars.color.buttonBorder]: t.buttonBorderColor ?? defaultButtonBorder,\n      [vars.color.buttonHoverBorder]:\n        t.buttonHoverBorderColor ?? t.primary ?? '#3b82f6',\n      [vars.color.buttonHoverBg]: t.buttonHoverBgColor ?? defaultButtonHoverBg,\n      [vars.color.buttonActiveBg]:\n        t.buttonActiveBgColor ?? t.primary ?? '#3b82f6',\n      [vars.color.shadow]: t.shadowColor ?? defaultShadow,\n    }),\n    // Additional CSS custom properties for compatibility\n    ...({\n      '--timeline-bg-color':\n        t.timelineBgColor ?? t.cardBgColor ?? defaultBackground,\n      '--timeline-text-color': t.textColor ?? defaultText,\n      '--timeline-primary-color': t.primary ?? '#3b82f6',\n      '--timeline-secondary-color':\n        t.secondary ?? (darkMode ? '#94a3b8' : '#64748b'),\n      '--timeline-card-bg-color': t.cardBgColor ?? defaultCardBg,\n      '--timeline-muted-color': defaultMuted,\n      '--timeline-toolbar-bg-color': t.toolbarBgColor ?? defaultToolbarBg,\n      '--timeline-shadow-color': t.shadowColor ?? defaultShadow,\n\n      // Nested card custom properties\n      '--nested-card-bg-color':\n        t.nestedCardBgColor ?? (darkMode ? '#1f2937' : '#f8fafc'),\n      '--nested-card-title-color':\n        t.nestedCardTitleColor ?? (darkMode ? '#93c5fd' : '#1e40af'),\n      '--nested-card-subtitle-color':\n        t.nestedCardSubtitleColor ?? (darkMode ? '#cbd5e1' : '#475569'),\n      '--nested-card-details-color':\n        t.nestedCardDetailsColor ?? (darkMode ? '#9ca3af' : '#64748b'),\n\n      // Icon custom properties\n      '--icon-bg-color':\n        t.iconBackgroundColor ?? (darkMode ? '#374151' : '#e2e8f0'),\n      '--icon-color': t.iconColor ?? t.primary ?? '#3b82f6',\n\n      // Active state custom properties\n      '--title-active-color':\n        t.titleColorActive ?? (darkMode ? '#60a5fa' : '#1d4ed8'),\n      '--details-color': t.detailsColor ?? (darkMode ? '#cbd5e1' : '#475569'),\n\n      // Dark mode specific custom properties\n      '--search-highlight-color':\n        t.searchHighlightColor ?? (darkMode ? '#451a03' : '#fef3c7'),\n      '--glow-color': t.glowColor ?? 'rgba(37, 99, 235, 0.2)',\n    } as any),\n  };\n}\n","const ArrowDownIcon = () => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 24 24\"\n    fill=\"currentColor\"\n  >\n    <path d=\"M6 18h12v2H6zm5-14v8.586L6.707 8.293 5.293 9.707 12 16.414l6.707-6.707-1.414-1.414L13 12.586V4z\" />\n  </svg>\n)\nexport default ArrowDownIcon\n","const CheckIcon = () => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    strokeWidth={2}\n  >\n    <path d=\"M20 6 9 17l-5-5\" />\n  </svg>\n)\nexport default CheckIcon\n","import React from 'react';\n\nconst ChevDownIcon: React.FunctionComponent = () => (\n  <svg\n    data-testid=\"chev-down-icon\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"24\"\n    height=\"24\"\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    strokeWidth=\"2\"\n    style={{ display: 'block', width: '100%', height: '100%' }}\n  >\n    <path d=\"m6 9 6 6 6-6\" />\n  </svg>\n);\n\nexport default React.memo(ChevDownIcon);\n","import React from 'react';\n\nconst ChevronLeft: React.FunctionComponent = () => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"24\"\n    height=\"24\"\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth=\"2\"\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    style={{ display: 'block', width: '100%', height: '100%' }}\n  >\n    <polyline points=\"15 18 9 12 15 6\"></polyline>\n  </svg>\n);\n\nexport default React.memo(ChevronLeft);\n","import React from 'react';\n\nconst ChevronRightIcon: React.FunctionComponent = () => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"24\"\n    height=\"24\"\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth=\"2\"\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    style={{ display: 'block', width: '100%', height: '100%' }}\n  >\n    <polyline points=\"9 18 15 12 9 6\"></polyline>\n  </svg>\n);\n\nexport default React.memo(ChevronRightIcon);\n","import * as React from \"react\"\n\nfunction SvgComponent() {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width={24}\n      height={24}\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth={2}\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      className=\"prefix__feather prefix__feather-x\"\n    >\n      <path d=\"M18 6L6 18M6 6l12 12\" />\n    </svg>\n  )\n}\n\nexport default SvgComponent\n","const LayoutIcon = (props: any) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 24 24\"\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    fill='currentColor'\n  >\n    <path d=\"M19 3H5c-1.103 0-2 .897-2 2v4h18V5c0-1.103-.897-2-2-2zM3 19c0 1.103.897 2 2 2h8V11H3v8zm12 2h4c1.103 0 2-.897 2-2v-8h-6v10z\" />\n  </svg>\n)\nexport default LayoutIcon\n","import React from 'react';\n\nconst MaximizeIcon: React.FunctionComponent = () => (\n  <svg\n    data-testid=\"maximize-icon\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"24\"\n    height=\"24\"\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth=\"2\"\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-maximize-2\"\n  >\n    <path d=\"M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7\" />\n  </svg>\n);\n\nexport default React.memo(MaximizeIcon);\n","import React from 'react';\n\nconst MinimizeIcon: React.FunctionComponent = () => (\n  <svg\n    data-testid=\"minimize-icon\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"24\"\n    height=\"24\"\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth=\"2\"\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-minimize-2\"\n  >\n    <path d=\"M4 14h6v6M20 10h-6V4M14 10l7-7M3 21l7-7\" />\n  </svg>\n);\n\nexport default React.memo(MinimizeIcon);\n","\nimport React from 'react';\n\nconst MinusIcon: React.FunctionComponent = () => (\n  <svg\n    data-testid=\"minus-icon\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"24\"\n    height=\"24\"\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth=\"2\"\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    style={{ display: 'block', width: '100%', height: '100%' }}\n  >\n    <path d=\"M5 12h14\" />\n  </svg>\n);\n\nexport default React.memo(MinusIcon);\n","\nimport React from 'react';\n\nconst MoonIcon: React.FunctionComponent = () => (\n  <svg\n    data-testid=\"moon-icon\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"24\"\n    height=\"24\"\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth=\"2\"\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-moon\"\n  >\n    <path d=\"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z\" />\n  </svg>\n);\n\nexport default React.memo(MoonIcon);\n","\nimport React from 'react';\n\nconst PlusIcon: React.FunctionComponent = () => (\n  <svg\n    data-testid=\"plus-icon\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"24\"\n    height=\"24\"\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth=\"2\"\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    style={{ display: 'block', width: '100%', height: '100%' }}\n  >\n    <path d=\"M12 5v14M5 12h14\" />\n  </svg>\n);\n\nexport default React.memo(PlusIcon);\n","\nimport React from 'react';\n\nconst StopIcon: React.FunctionComponent = () => (\n  <svg\n    data-testid=\"stop-icon\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"24\"\n    height=\"24\"\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth=\"2\"\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-stop-circle\"\n  >\n    <circle cx=\"12\" cy=\"12\" r=\"10\" />\n    <path d=\"M9 9h6v6H9z\" />\n  </svg>\n);\n\nexport default React.memo(StopIcon);\n","\nimport React from 'react';\n\nconst SunIcon: React.FunctionComponent = () => (\n  <svg\n    data-testid=\"sun-icon\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"24\"\n    height=\"24\"\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth=\"2\"\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-sun\"\n  >\n    <circle cx=\"12\" cy=\"12\" r=\"5\" />\n    <path d=\"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42\" />\n  </svg>\n);\n\nexport default React.memo(SunIcon);\n","import React from 'react';\n\nconst ParaIcon: React.FunctionComponent = () => (\n  <svg\n    data-testid=\"para-icon\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"24\"\n    height=\"24\"\n    viewBox=\"0 0 24 24\"\n    fill=\"currentColor\"\n  >\n    <path d=\"M9 16h2v4h2V6h2v14h2V6h3V4H9c-3.309 0-6 2.691-6 6s2.691 6 6 6zM9 6h2v8H9c-2.206 0-4-1.794-4-4s1.794-4 4-4z\" />\n  </svg>\n);\n\nexport default React.memo(ParaIcon);\n","import React from 'react';\n\nconst ChevronLeft: React.FunctionComponent = () => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"24\"\n    height=\"24\"\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth=\"2\"\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-chevrons-left\"\n  >\n    <polyline points=\"11 17 6 12 11 7\"></polyline>\n    <polyline points=\"18 17 13 12 18 7\"></polyline>\n  </svg>\n);\n\nexport default React.memo(ChevronLeft);\n","import React from 'react';\n\nconst ChevronRightIcon: React.FunctionComponent = () => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"24\"\n    height=\"24\"\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth=\"2\"\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className=\"feather feather-chevrons-right\"\n  >\n    <polyline points=\"13 17 18 12 13 7\"></polyline>\n    <polyline points=\"6 17 11 12 6 7\"></polyline>\n  </svg>\n);\n\nexport default React.memo(ChevronRightIcon);\n","import React from 'react';\n\nconst ReplayIcon: React.FunctionComponent = () => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"24\"\n    height=\"24\"\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth=\"2\"\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n  >\n    <polygon points=\"5 3 19 12 5 21 5 3\"></polygon>\n  </svg>\n);\n\nexport default React.memo(ReplayIcon);\n","import { TimelineControlModel } from '@models/TimelineControlModel';\nimport cls from 'classnames';\nimport React, { useCallback, useMemo } from 'react';\nimport { useTimelineContext } from '../../contexts';\nimport { MoonIcon, StopIcon, SunIcon } from '../../icons';\nimport ChevronLeft from '../../icons/chev-left';\nimport ChevronRightIcon from '../../icons/chev-right';\nimport ChevronsLeftIcon from '../../icons/chevs-left';\nimport ChevronsRightIcon from '../../icons/chevs-right';\nimport ReplayIcon from '../../icons/replay-icon';\nimport {\n  navButton,\n  navButtonActive,\n  navButtonFocus,\n  navButtonHover,\n  navItem,\n  navItemDisabled,\n  navWrapper,\n  srOnly,\n  timelineControlContainer,\n  navButtonSvg,\n} from './timeline-control.css';\n\n/**\n * TimelineControl component\n * Provides navigation controls for a timeline, including next, previous, first, last, and slideshow buttons.\n * Optionally supports flipping the layout and dark mode toggle.\n *\n * @property {function} onNext - Function to go to the next item.\n * @property {function} onPrevious - Function to go to the previous item.\n * @property {function} onFirst - Function to jump to the first item.\n * @property {function} onLast - Function to jump to the last item.\n * @property {boolean} disableLeft - Whether to disable the left navigation buttons.\n * @property {boolean} disableRight - Whether to disable the right navigation buttons.\n * @property {boolean} slideShowRunning - Whether the slideshow is currently running.\n * @property {function} onReplay - Function to restart the slideshow.\n * @property {boolean} slideShowEnabled - Whether the slideshow feature is enabled.\n * @property {function} onToggleDarkMode - Function to toggle dark mode (if enabled).\n * @property {boolean} isDark - Whether dark mode is currently active.\n * @property {function} onPaused - Function to pause the slideshow (if running).\n * @returns {JSX.Element} The TimelineControl component.\n */\nconst Controls: React.FunctionComponent<TimelineControlModel> = ({\n  onNext,\n  onPrevious,\n  onFirst,\n  onLast,\n  disableLeft,\n  disableRight,\n  slideShowRunning,\n  onReplay,\n  slideShowEnabled,\n  onToggleDarkMode,\n  isDark,\n  onPaused,\n}: TimelineControlModel) => {\n  // Use unified context\n  const {\n    mode,\n    flipLayout,\n    disableInteraction,\n    buttonTexts,\n    classNames,\n    enableDarkToggle,\n  } = useTimelineContext();\n\n  const flippedHorizontally = useMemo(\n    () => flipLayout && mode === 'HORIZONTAL',\n    [flipLayout, mode],\n  );\n\n  const canDisableLeft = useMemo(\n    () => disableLeft || slideShowRunning,\n    [disableLeft, slideShowRunning],\n  );\n\n  const canDisableRight = useMemo(\n    () => disableRight || slideShowRunning,\n    [disableRight, slideShowRunning],\n  );\n\n  const handlePause = useCallback(() => {\n    onPaused?.();\n  }, [onPaused]);\n\n  const handlePlay = useCallback(() => {\n    onReplay?.();\n  }, [onReplay]);\n\n  const previousTitle = useMemo(\n    () => (flipLayout ? buttonTexts?.next : buttonTexts?.previous),\n    [flipLayout, buttonTexts?.next, buttonTexts?.previous],\n  );\n\n  const nextTitle = useMemo(\n    () => (flipLayout ? buttonTexts?.previous : buttonTexts?.next),\n    [flipLayout, buttonTexts?.previous, buttonTexts?.next],\n  );\n\n  const playOrPauseTile = useMemo(\n    () => (slideShowRunning ? buttonTexts?.stop : buttonTexts?.play),\n    [slideShowRunning, buttonTexts?.stop, buttonTexts?.play],\n  );\n\n  const jumpToLastTitle = useMemo(\n    () => (flipLayout ? buttonTexts?.first : buttonTexts?.last),\n    [flipLayout, buttonTexts?.first, buttonTexts?.last],\n  );\n\n  const jumpToFirstTitle = useMemo(\n    () => (flipLayout ? buttonTexts?.last : buttonTexts?.first),\n    [flipLayout, buttonTexts?.last, buttonTexts?.first],\n  );\n\n  // Create a message about current position for screen readers\n  const positionStatus = useMemo(() => {\n    return '';\n  }, []);\n\n  // Create a message about slideshow status for screen readers\n  const slideshowStatus = useMemo(() => '', []);\n\n  return (\n    <div className={timelineControlContainer} key=\"control-wrapper\">\n      {/* Visually hidden status information for screen readers */}\n      <output className={srOnly} aria-live=\"polite\">\n        {positionStatus}\n        {slideshowStatus && ` ${slideshowStatus}`}\n      </output>\n\n      <div\n        className={cls(navWrapper, 'timeline-controls', classNames?.controls)}\n        aria-label=\"Timeline Navigation\"\n        role=\"toolbar\"\n      >\n        {/* jump to first */}\n        {disableInteraction ? null : (\n          <>\n            <div\n              className={cls(navItem, { [navItemDisabled]: canDisableLeft })}\n            >\n              <button\n                className={cls(\n                  navButton,\n                  navButtonHover,\n                  navButtonActive,\n                  navButtonFocus,\n                )}\n                onClick={flippedHorizontally ? onLast : onFirst}\n                title={jumpToFirstTitle}\n                aria-label={jumpToFirstTitle}\n                aria-disabled={disableLeft}\n                aria-controls=\"timeline-main-wrapper\"\n                tabIndex={!disableLeft ? 0 : -1}\n                data-test-id=\"jump-to-first\"\n              >\n                <span className={navButtonSvg}>\n                  <ChevronsLeftIcon />\n                </span>\n              </button>\n            </div>\n\n            {/* previous */}\n            <div\n              className={cls(navItem, { [navItemDisabled]: canDisableLeft })}\n            >\n              <button\n                className={cls(\n                  navButton,\n                  navButtonHover,\n                  navButtonActive,\n                  navButtonFocus,\n                )}\n                onClick={flippedHorizontally ? onNext : onPrevious}\n                title={previousTitle}\n                aria-label={previousTitle}\n                aria-disabled={disableLeft}\n                aria-controls=\"timeline-main-wrapper\"\n                tabIndex={!disableLeft ? 0 : -1}\n                data-test-id=\"previous\"\n              >\n                <span className={navButtonSvg}>\n                  <ChevronLeft />\n                </span>\n              </button>\n            </div>\n\n            {/* next */}\n            <div\n              className={cls(navItem, { [navItemDisabled]: canDisableRight })}\n            >\n              <button\n                className={cls(\n                  navButton,\n                  navButtonHover,\n                  navButtonActive,\n                  navButtonFocus,\n                )}\n                onClick={flippedHorizontally ? onPrevious : onNext}\n                title={nextTitle}\n                aria-label={nextTitle}\n                aria-disabled={disableRight}\n                aria-controls=\"timeline-main-wrapper\"\n                tabIndex={!disableRight ? 0 : -1}\n                data-test-id=\"next\"\n              >\n                <span className={navButtonSvg}>\n                  <ChevronRightIcon />\n                </span>\n              </button>\n            </div>\n\n            {/* jump to last */}\n            <div\n              className={cls(navItem, { [navItemDisabled]: canDisableRight })}\n            >\n              <button\n                className={cls(\n                  navButton,\n                  navButtonHover,\n                  navButtonActive,\n                  navButtonFocus,\n                )}\n                onClick={flippedHorizontally ? onFirst : onLast}\n                title={jumpToLastTitle}\n                aria-label={jumpToLastTitle}\n                aria-disabled={disableRight}\n                aria-controls=\"timeline-main-wrapper\"\n                tabIndex={!disableRight ? 0 : -1}\n                data-test-id=\"jump-to-last\"\n              >\n                <span className={navButtonSvg}>\n                  <ChevronsRightIcon />\n                </span>\n              </button>\n            </div>\n          </>\n        )}\n\n        {/* slideshow button */}\n        <div className={navItem}>\n          {slideShowEnabled && (\n            <button\n              className={cls(\n                navButton,\n                navButtonHover,\n                navButtonActive,\n                navButtonFocus,\n              )}\n              onClick={slideShowRunning ? handlePause : handlePlay}\n              title={playOrPauseTile}\n              tabIndex={0}\n              aria-controls=\"timeline-main-wrapper\"\n              aria-label={playOrPauseTile}\n              aria-pressed={slideShowRunning ? 'true' : 'false'}\n              data-test-id=\"play-pause\"\n            >\n              <span className={navButtonSvg}>\n                {slideShowRunning ? <StopIcon /> : <ReplayIcon />}\n              </span>\n            </button>\n          )}\n        </div>\n\n        {/* dark toggle button */}\n        {enableDarkToggle ? (\n          <div\n            className={cls(navItem, { [navItemDisabled]: slideShowRunning })}\n          >\n            <button\n              className={cls(\n                navButton,\n                navButtonHover,\n                navButtonActive,\n                navButtonFocus,\n              )}\n              onClick={onToggleDarkMode}\n              title={isDark ? buttonTexts?.light : buttonTexts?.dark}\n              tabIndex={0}\n              aria-controls=\"timeline-main-wrapper\"\n              aria-label={isDark ? buttonTexts?.light : buttonTexts?.dark}\n              aria-pressed={isDark ? 'true' : 'false'}\n              data-test-id=\"dark-toggle\"\n            >\n              <span className={navButtonSvg}>\n                {isDark ? <SunIcon /> : <MoonIcon />}\n              </span>\n            </button>\n          </div>\n        ) : null}\n      </div>\n    </div>\n  );\n};\n\nControls.displayName = 'Timeline Control';\n\nexport default Controls;\n","import { useCallback, useEffect, useState, RefObject } from 'react';\n\n/**\n * Browser detection utility for fullscreen API differences\n * Enhanced to detect specific browser versions and capabilities\n */\nconst getBrowserInfo = () => {\n  const userAgent = typeof navigator !== 'undefined' ? navigator.userAgent : '';\n  const vendor = typeof navigator !== 'undefined' ? navigator.vendor : '';\n\n  return {\n    isChrome: /Chrome/.test(userAgent) && !/Edge/.test(userAgent),\n    isFirefox: /Firefox/.test(userAgent),\n    isSafari:\n      /Safari/.test(userAgent) &&\n      !/Chrome/.test(userAgent) &&\n      /Apple/.test(vendor),\n    isEdge: /Edge/.test(userAgent) || /Edg\\//.test(userAgent),\n    isIE: /Trident/.test(userAgent),\n    isMobile: /Mobi|Android/i.test(userAgent),\n    // Safari version detection for method selection\n    safariVersion:\n      /Safari/.test(userAgent) && !/Chrome/.test(userAgent)\n        ? parseFloat(\n            (userAgent.match(/Version\\/(\\d+\\.\\d+)/) || ['', '0'])[1] || '0',\n          )\n        : 0,\n    // Chrome version for modern API support\n    chromeVersion: /Chrome/.test(userAgent)\n      ? parseInt((userAgent.match(/Chrome\\/(\\d+)/) || ['', '0'])[1] || '0', 10)\n      : 0,\n  };\n};\n\n/**\n * Fullscreen API interface for better TypeScript support\n * Covers all browser implementations including Safari's unique behavior\n */\ninterface FullscreenDocument extends Document {\n  fullscreenElement: Element | null;\n  mozFullScreenElement?: Element | null;\n  webkitFullscreenElement?: Element | null;\n  msFullscreenElement?: Element | null;\n  // Support properties\n  fullscreenEnabled: boolean;\n  mozFullScreenEnabled?: boolean;\n  webkitFullscreenEnabled?: boolean;\n  msFullscreenEnabled?: boolean;\n  // Exit methods\n  exitFullscreen: () => Promise<void>;\n  mozCancelFullScreen?: () => Promise<void>;\n  webkitExitFullscreen?: () => Promise<void>;\n  webkitCancelFullScreen?: () => Promise<void>; // Safari alternative\n  msExitFullscreen?: () => Promise<void>;\n}\n\ninterface FullscreenElement extends Element {\n  requestFullscreen: (options?: FullscreenOptions) => Promise<void>;\n  mozRequestFullScreen?: (options?: any) => Promise<void>;\n  webkitRequestFullscreen?: (options?: any) => Promise<void>;\n  webkitRequestFullScreen?: (options?: any) => Promise<void>; // Safari alternative\n  msRequestFullscreen?: (options?: any) => Promise<void>;\n}\n\n// Fullscreen options for modern browsers\ninterface FullscreenOptions {\n  navigationUI?: 'auto' | 'show' | 'hide';\n}\n\n/**\n * Hook return type\n */\ninterface UseFullscreenReturn {\n  isFullscreen: boolean;\n  isSupported: boolean;\n  toggleFullscreen: () => Promise<void>;\n  enterFullscreen: () => Promise<void>;\n  exitFullscreen: () => Promise<void>;\n  error: string | null;\n}\n\n/**\n * Hook options\n */\ninterface UseFullscreenOptions {\n  onEnter?: () => void;\n  onExit?: () => void;\n  onError?: (error: string) => void;\n}\n\n/**\n * Custom hook for managing fullscreen functionality\n * Provides cross-browser compatible fullscreen API with proper error handling\n *\n * @param elementRef - Ref to the element to make fullscreen\n * @param options - Optional callbacks for fullscreen events\n * @returns Object with fullscreen state and control functions\n *\n * @example\n * ```tsx\n * const containerRef = useRef<HTMLDivElement>(null);\n * const { isFullscreen, toggleFullscreen, isSupported } = useFullscreen(containerRef, {\n *   onEnter: () => console.log('Entered fullscreen'),\n *   onExit: () => console.log('Exited fullscreen'),\n * });\n * ```\n */\nexport const useFullscreen = (\n  elementRef: RefObject<HTMLElement>,\n  options: UseFullscreenOptions = {},\n): UseFullscreenReturn => {\n  const [isFullscreen, setIsFullscreen] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  // Check if fullscreen API is supported - comprehensive cross-browser check\n  const isSupported = useCallback((): boolean => {\n    if (typeof document === 'undefined' || typeof navigator === 'undefined')\n      return false;\n\n    const doc = document as FullscreenDocument;\n    const element = document.createElement('div') as FullscreenElement;\n    const browserInfo = getBrowserInfo();\n\n    // Check for support properties\n    const hasEnabledProperty = !!(\n      doc.fullscreenEnabled ||\n      doc.mozFullScreenEnabled ||\n      doc.webkitFullscreenEnabled ||\n      doc.msFullscreenEnabled\n    );\n\n    // Check for request methods on elements\n    const hasRequestMethod = !!(\n      element.requestFullscreen ||\n      element.mozRequestFullScreen ||\n      element.webkitRequestFullscreen ||\n      element.webkitRequestFullScreen ||\n      element.msRequestFullscreen\n    );\n\n    // Check for exit methods on document\n    const hasExitMethod = !!(\n      doc.exitFullscreen ||\n      doc.mozCancelFullScreen ||\n      doc.webkitExitFullscreen ||\n      doc.webkitCancelFullScreen ||\n      doc.msExitFullscreen\n    );\n\n    // Additional browser-specific checks\n    if (browserInfo.isSafari && browserInfo.isMobile) {\n      // Mobile Safari has limited fullscreen support\n      return false;\n    }\n\n    // Check if we're in a secure context (required for some browsers)\n    const isSecureContext =\n      typeof window !== 'undefined' &&\n      (window.isSecureContext ||\n        location.protocol === 'https:' ||\n        location.hostname === 'localhost');\n\n    return (\n      hasEnabledProperty && hasRequestMethod && hasExitMethod && isSecureContext\n    );\n  }, []);\n\n  // Get the current fullscreen element - comprehensive cross-browser check\n  const getFullscreenElement = useCallback((): Element | null => {\n    if (typeof document === 'undefined') return null;\n\n    const doc = document as FullscreenDocument;\n\n    // Try standard first, then vendor prefixes\n    const element =\n      doc.fullscreenElement ||\n      doc.mozFullScreenElement ||\n      doc.webkitFullscreenElement ||\n      doc.msFullscreenElement ||\n      null;\n\n    return element;\n  }, []);\n\n  // Enter fullscreen mode - comprehensive cross-browser implementation\n  const enterFullscreen = useCallback(async (): Promise<void> => {\n    if (!isSupported() || !elementRef.current) {\n      const errorMsg = !isSupported()\n        ? 'Fullscreen API is not supported in this browser'\n        : 'Element reference is not available';\n      setError(errorMsg);\n      options.onError?.(errorMsg);\n      throw new Error(errorMsg);\n    }\n\n    try {\n      setError(null);\n      const element = elementRef.current as FullscreenElement;\n      const browserInfo = getBrowserInfo();\n\n      // Browser-specific method selection with fallback chain\n      let requestMethod: (() => Promise<void>) | null = null;\n\n      if (element.requestFullscreen) {\n        // Standard API - supported by modern browsers\n        requestMethod = () =>\n          element.requestFullscreen({ navigationUI: 'hide' });\n      } else if (browserInfo.isSafari) {\n        // Safari-specific handling - try both variants\n        if (element.webkitRequestFullscreen) {\n          requestMethod = () =>\n            element.webkitRequestFullscreen?.() || Promise.resolve();\n        } else if (element.webkitRequestFullScreen) {\n          // Older Safari versions\n          requestMethod = () =>\n            element.webkitRequestFullScreen?.() || Promise.resolve();\n        }\n      } else if (browserInfo.isChrome && element.webkitRequestFullscreen) {\n        // Chrome and Chromium-based browsers\n        requestMethod = () =>\n          element.webkitRequestFullscreen?.() || Promise.resolve();\n      } else if (browserInfo.isFirefox && element.mozRequestFullScreen) {\n        // Firefox\n        requestMethod = () =>\n          element.mozRequestFullScreen?.() || Promise.resolve();\n      } else if (browserInfo.isEdge && element.msRequestFullscreen) {\n        // Legacy Edge\n        requestMethod = () =>\n          element.msRequestFullscreen?.() || Promise.resolve();\n      } else {\n        // Fallback chain for undetected browsers\n        if (element.webkitRequestFullscreen) {\n          requestMethod = () =>\n            element.webkitRequestFullscreen?.() || Promise.resolve();\n        } else if (element.webkitRequestFullScreen) {\n          requestMethod = () =>\n            element.webkitRequestFullScreen?.() || Promise.resolve();\n        } else if (element.mozRequestFullScreen) {\n          requestMethod = () =>\n            element.mozRequestFullScreen?.() || Promise.resolve();\n        } else if (element.msRequestFullscreen) {\n          requestMethod = () =>\n            element.msRequestFullscreen?.() || Promise.resolve();\n        }\n      }\n\n      if (!requestMethod) {\n        throw new Error(\n          'No compatible fullscreen method found for this browser',\n        );\n      }\n\n      await requestMethod();\n    } catch (err) {\n      // Enhanced error handling for specific browser issues\n      let errorMsg = 'Failed to enter fullscreen';\n\n      if (err instanceof Error) {\n        const { message } = err;\n        const browserInfo = getBrowserInfo();\n\n        if (message.includes('denied') || message.includes('not allowed')) {\n          errorMsg =\n            'Fullscreen request denied. User interaction may be required.';\n        } else if (\n          message.includes('security') ||\n          message.includes('permission')\n        ) {\n          errorMsg =\n            'Fullscreen blocked for security reasons. Ensure HTTPS or localhost.';\n        } else if (browserInfo.isSafari && message.includes('not supported')) {\n          errorMsg =\n            'Fullscreen not supported in this Safari version. Try updating your browser.';\n        } else if (browserInfo.isFirefox && message.includes('unavailable')) {\n          errorMsg = 'Firefox fullscreen unavailable. Check browser settings.';\n        } else {\n          errorMsg = message;\n        }\n      }\n\n      setError(errorMsg);\n      options.onError?.(errorMsg);\n      throw new Error(errorMsg);\n    }\n  }, [elementRef, isSupported, options]);\n\n  // Exit fullscreen mode - comprehensive cross-browser implementation\n  const exitFullscreen = useCallback(async (): Promise<void> => {\n    if (!isSupported()) {\n      const errorMsg = 'Fullscreen API is not supported in this browser';\n      setError(errorMsg);\n      options.onError?.(errorMsg);\n      throw new Error(errorMsg);\n    }\n\n    try {\n      setError(null);\n      const doc = document as FullscreenDocument;\n      const browserInfo = getBrowserInfo();\n\n      // Browser-specific method selection with fallback chain\n      let exitMethod: (() => Promise<void>) | null = null;\n\n      if (doc.exitFullscreen) {\n        // Standard API - supported by modern browsers\n        exitMethod = () => doc.exitFullscreen();\n      } else if (browserInfo.isSafari) {\n        // Safari-specific handling - try both variants\n        if (doc.webkitExitFullscreen) {\n          exitMethod = () => doc.webkitExitFullscreen?.() || Promise.resolve();\n        } else if (doc.webkitCancelFullScreen) {\n          // Older Safari versions\n          exitMethod = () =>\n            doc.webkitCancelFullScreen?.() || Promise.resolve();\n        }\n      } else if (browserInfo.isChrome && doc.webkitExitFullscreen) {\n        // Chrome and Chromium-based browsers\n        exitMethod = () => doc.webkitExitFullscreen?.() || Promise.resolve();\n      } else if (browserInfo.isFirefox && doc.mozCancelFullScreen) {\n        // Firefox\n        exitMethod = () => doc.mozCancelFullScreen?.() || Promise.resolve();\n      } else if (browserInfo.isEdge && doc.msExitFullscreen) {\n        // Legacy Edge\n        exitMethod = () => doc.msExitFullscreen?.() || Promise.resolve();\n      } else {\n        // Fallback chain for undetected browsers\n        if (doc.webkitExitFullscreen) {\n          exitMethod = () => doc.webkitExitFullscreen?.() || Promise.resolve();\n        } else if (doc.webkitCancelFullScreen) {\n          exitMethod = () =>\n            doc.webkitCancelFullScreen?.() || Promise.resolve();\n        } else if (doc.mozCancelFullScreen) {\n          exitMethod = () => doc.mozCancelFullScreen?.() || Promise.resolve();\n        } else if (doc.msExitFullscreen) {\n          exitMethod = () => doc.msExitFullscreen?.() || Promise.resolve();\n        }\n      }\n\n      if (!exitMethod) {\n        throw new Error(\n          'No compatible exit fullscreen method found for this browser',\n        );\n      }\n\n      await exitMethod();\n    } catch (err) {\n      // Enhanced error handling for exit fullscreen issues\n      let errorMsg = 'Failed to exit fullscreen';\n\n      if (err instanceof Error) {\n        const { message } = err;\n        const browserInfo = getBrowserInfo();\n\n        if (message.includes('denied') || message.includes('not allowed')) {\n          errorMsg = 'Exit fullscreen request denied. Try pressing Escape key.';\n        } else if (browserInfo.isSafari && message.includes('not supported')) {\n          errorMsg = 'Exit fullscreen not supported in this Safari version.';\n        } else if (browserInfo.isFirefox && message.includes('unavailable')) {\n          errorMsg = 'Firefox exit fullscreen unavailable. Try Escape key.';\n        } else {\n          errorMsg = message;\n        }\n      }\n\n      setError(errorMsg);\n      options.onError?.(errorMsg);\n      throw new Error(errorMsg);\n    }\n  }, [isSupported, options]);\n\n  // Toggle fullscreen mode\n  const toggleFullscreen = useCallback(async (): Promise<void> => {\n    if (isFullscreen) {\n      await exitFullscreen();\n    } else {\n      await enterFullscreen();\n    }\n  }, [isFullscreen, enterFullscreen, exitFullscreen]);\n\n  // Update fullscreen state\n  const updateFullscreenState = useCallback(() => {\n    const fullscreenElement = getFullscreenElement();\n    const newIsFullscreen =\n      !!fullscreenElement && fullscreenElement === elementRef.current;\n\n    if (newIsFullscreen !== isFullscreen) {\n      setIsFullscreen(newIsFullscreen);\n\n      if (newIsFullscreen) {\n        options.onEnter?.();\n      } else {\n        options.onExit?.();\n      }\n    }\n  }, [getFullscreenElement, elementRef, isFullscreen, options]);\n\n  // Set up event listeners for fullscreen changes\n  useEffect(() => {\n    if (!isSupported()) return;\n\n    // Comprehensive list of fullscreen change events for all browsers\n    const events = [\n      'fullscreenchange', // Standard\n      'mozfullscreenchange', // Firefox\n      'webkitfullscreenchange', // Chrome, Opera, newer Safari\n      'msfullscreenchange', // Internet Explorer/Edge\n    ];\n\n    // Additional error events for better error handling\n    const errorEvents = [\n      'fullscreenerror',\n      'mozfullscreenerror',\n      'webkitfullscreenerror',\n      'msfullscreenerror',\n    ];\n\n    // Error handler for fullscreen errors\n    const handleFullscreenError = () => {\n      setError('Fullscreen request was denied or failed');\n      options.onError?.('Fullscreen request was denied or failed');\n    };\n\n    // Add change event listeners\n    events.forEach((event) => {\n      document.addEventListener(event, updateFullscreenState);\n    });\n\n    // Add error event listeners\n    errorEvents.forEach((event) => {\n      document.addEventListener(event, handleFullscreenError);\n    });\n\n    // Initial state check\n    updateFullscreenState();\n\n    return () => {\n      events.forEach((event) => {\n        document.removeEventListener(event, updateFullscreenState);\n      });\n      errorEvents.forEach((event) => {\n        document.removeEventListener(event, handleFullscreenError);\n      });\n    };\n  }, [isSupported, updateFullscreenState]);\n\n  // Handle escape key to exit fullscreen\n  useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (event.key === 'Escape' && isFullscreen) {\n        exitFullscreen();\n      }\n    };\n\n    if (isFullscreen) {\n      document.addEventListener('keydown', handleKeyDown);\n    }\n\n    return () => {\n      document.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [isFullscreen, exitFullscreen]);\n\n  return {\n    isFullscreen,\n    isSupported: isSupported(),\n    toggleFullscreen,\n    enterFullscreen,\n    exitFullscreen,\n    error,\n  };\n};\n","import React, { forwardRef, memo } from 'react';\nimport { MaximizeIcon, MinimizeIcon } from '../../icons';\nimport { FullscreenButtonProps } from './fullscreen-button.model';\nimport { fullscreenButton } from './fullscreen-button.css';\n\n/**\n * FullscreenButton Component\n *\n * A reusable button component for toggling fullscreen mode with proper accessibility\n * and theming support. Switches between maximize and minimize icons based on state.\n *\n * @component\n * @example\n * ```tsx\n * <FullscreenButton\n *   isFullscreen={false}\n *   onToggle={() => toggleFullscreen()}\n *   theme={theme}\n *   disabled={false}\n *   size=\"medium\"\n * />\n * ```\n */\nconst FullscreenButton = memo(\n  forwardRef<HTMLButtonElement, FullscreenButtonProps>(\n    (\n      {\n        isFullscreen = false,\n        onToggle,\n        theme,\n        disabled = false,\n        size = 'medium',\n        className,\n        ariaLabel,\n        title,\n        testId = 'fullscreen-button',\n        children,\n        ...rest\n      },\n      ref,\n    ) => {\n      // Determine button content and labels\n      const defaultAriaLabel = isFullscreen\n        ? 'Exit fullscreen'\n        : 'Enter fullscreen';\n      const defaultTitle = isFullscreen\n        ? 'Exit Fullscreen (Esc)'\n        : 'Enter Fullscreen';\n\n      const buttonAriaLabel = ariaLabel || defaultAriaLabel;\n      const buttonTitle = title || defaultTitle;\n\n      // Handle button click\n      const handleClick = (event: React.MouseEvent<HTMLButtonElement>) => {\n        event.preventDefault();\n        event.stopPropagation();\n\n        if (!disabled) {\n          onToggle?.();\n        }\n      };\n\n      // Handle keyboard interaction\n      const handleKeyDown = (event: React.KeyboardEvent<HTMLButtonElement>) => {\n        if ((event.key === 'Enter' || event.key === ' ') && !disabled) {\n          event.preventDefault();\n          onToggle?.();\n        }\n      };\n\n      const classNameComputed = fullscreenButton({\n        size,\n        isFullscreen: isFullscreen ? 'true' : 'false',\n      } as any);\n\n      return (\n        <button\n          ref={ref}\n          className={`${className ?? ''} ${classNameComputed}`}\n          onClick={handleClick}\n          onKeyDown={handleKeyDown}\n          disabled={disabled}\n          aria-label={buttonAriaLabel}\n          title={buttonTitle}\n          data-testid={testId}\n          type=\"button\"\n          role=\"button\"\n          {...rest}\n        >\n          {children || (isFullscreen ? <MinimizeIcon /> : <MaximizeIcon />)}\n        </button>\n      );\n    },\n  ),\n);\n\nFullscreenButton.displayName = 'FullscreenButton';\n\nexport { FullscreenButton };\nexport type { FullscreenButtonProps };\n","/**\n * Utility functions for handling optional props and conditional spreading\n */\n\n/**\n * Creates an object with only the defined (non-undefined) properties\n * @param props - Object with potentially undefined values\n * @returns Object with only defined values\n */\nexport function filterDefinedProps<T extends Record<string, unknown>>(\n  props: T,\n): Partial<T> {\n  const result: Partial<T> = {};\n\n  for (const [key, value] of Object.entries(props)) {\n    if (value !== undefined) {\n      (result as Record<string, unknown>)[key] = value;\n    }\n  }\n\n  return result;\n}\n\n/**\n * Creates an object with only the truthy properties\n * @param props - Object with potentially falsy values\n * @returns Object with only truthy values\n */\nexport function filterTruthyProps<T extends Record<string, unknown>>(\n  props: T,\n): Partial<T> {\n  const result: Partial<T> = {};\n\n  for (const [key, value] of Object.entries(props)) {\n    if (value) {\n      (result as Record<string, unknown>)[key] = value;\n    }\n  }\n\n  return result;\n}\n\n/**\n * Conditionally includes props based on conditions\n * @param conditions - Object mapping prop names to their conditions and values\n * @returns Object with conditionally included props\n */\nexport function conditionalProps<T extends Record<string, unknown>>(\n  conditions: Record<string, { condition: boolean; value: unknown }>,\n): Partial<T> {\n  const result: Partial<T> = {};\n\n  for (const [key, { condition, value }] of Object.entries(conditions)) {\n    if (condition) {\n      (result as Record<string, unknown>)[key] = value;\n    }\n  }\n\n  return result;\n}\n\n/**\n * More specific utility for the most common pattern in this codebase:\n * Include prop only if value is defined and not null\n */\nexport function includeIfDefined<T>(\n  key: string,\n  value: T,\n): Record<string, T> | {} {\n  return value !== undefined && value !== null ? { [key]: value } : {};\n}\n\n/**\n * Include prop only if value is truthy\n */\nexport function includeIfTruthy<T>(\n  key: string,\n  value: T,\n): Record<string, T> | {} {\n  return value ? { [key]: value } : {};\n}\n\n/**\n * Batch version for multiple props - most efficient for the timeline use case\n */\nexport interface PropCondition<T = any> {\n  key: string;\n  value: T;\n  condition?: 'defined' | 'truthy' | boolean;\n}\n\nexport function buildProps(conditions: PropCondition[]): Record<string, any> {\n  const result: Record<string, any> = {};\n\n  for (const { key, value, condition = 'defined' } of conditions) {\n    let shouldInclude = false;\n\n    if (typeof condition === 'boolean') {\n      shouldInclude = condition;\n    } else if (condition === 'defined') {\n      shouldInclude = value !== undefined && value !== null;\n    } else if (condition === 'truthy') {\n      shouldInclude = Boolean(value);\n    }\n\n    if (shouldInclude) {\n      result[key] = value;\n    }\n  }\n\n  return result;\n}\n\n/**\n * Simple object-based approach - most readable and maintainable\n */\nexport function pickDefined<T extends Record<string, any>>(obj: T): Partial<T> {\n  return Object.fromEntries(\n    Object.entries(obj).filter(([_, value]) => value !== undefined),\n  ) as Partial<T>;\n}\n\nexport function pickTruthy<T extends Record<string, any>>(obj: T): Partial<T> {\n  return Object.fromEntries(\n    Object.entries(obj).filter(([_, value]) => Boolean(value)),\n  ) as Partial<T>;\n}\n","import React, { forwardRef, memo, RefObject } from 'react';\nimport { useFullscreen } from '../../../hooks/useFullscreen';\nimport { FullscreenButton } from '../fullscreen-button';\nimport { FullscreenControlProps } from './fullscreen-control.model';\nimport { pickDefined } from '../../../utils/propUtils';\n\n/**\n * FullscreenControl Component\n *\n * A high-level component that combines the fullscreen hook with the fullscreen button\n * to provide complete fullscreen functionality for any target element.\n *\n * @component\n * @example\n * ```tsx\n * const timelineRef = useRef<HTMLDivElement>(null);\n *\n * <FullscreenControl\n *   targetRef={timelineRef}\n *   theme={theme}\n *   onEnterFullscreen={() => console.log('Entered fullscreen')}\n *   onExitFullscreen={() => console.log('Exited fullscreen')}\n *   size=\"medium\"\n * />\n * ```\n */\nconst FullscreenControl = memo(\n  forwardRef<HTMLButtonElement, FullscreenControlProps>(\n    (\n      {\n        targetRef,\n        theme,\n        onEnterFullscreen,\n        onExitFullscreen,\n        onError,\n        size = 'medium',\n        disabled = false,\n        className,\n        ariaLabel,\n        title,\n        testId = 'fullscreen-control',\n        ...rest\n      },\n      ref,\n    ) => {\n      // Use the fullscreen hook\n      const { isFullscreen, isSupported, toggleFullscreen, error } =\n        useFullscreen(targetRef, {\n          onEnter: onEnterFullscreen || (() => {}),\n          onExit: onExitFullscreen || (() => {}),\n          onError: onError || (() => {}),\n        });\n\n      // Don't render if fullscreen is not supported\n      if (!isSupported) {\n        return null;\n      }\n\n      return (\n        <FullscreenButton\n          {...rest}\n          ref={ref}\n          isFullscreen={isFullscreen}\n          onToggle={() => {\n            toggleFullscreen().catch((err) => {\n              const errorMessage =\n                err instanceof Error\n                  ? err.message\n                  : 'Fullscreen operation failed';\n              onError?.(errorMessage);\n            });\n          }}\n          theme={theme}\n          disabled={disabled || !!error}\n          size={size}\n          testId={testId}\n          {...pickDefined({\n            className,\n            ariaLabel,\n          })}\n          {...(title || error\n            ? { title: title || `Fullscreen unavailable: ${error}` }\n            : {})}\n        />\n      );\n    },\n  ),\n);\n\nFullscreenControl.displayName = 'FullscreenControl';\n\nexport { FullscreenControl };\nexport type { FullscreenControlProps };\n","import { FunctionComponent, KeyboardEvent, memo, useCallback } from 'react';\nimport { CheckIcon } from 'src/components/icons';\nimport { ListItemModel } from './list.model';\nimport {\n  checkbox,\n  checkboxSelected,\n  checkboxWrapper,\n  description as descriptionClass,\n  listItem,\n  listItemActive,\n  styleAndDescription,\n  title as titleClass,\n} from './list.css';\nimport { listItemRecipe } from './list.css';\n\n/**\n * ListItem component displays a selectable/clickable item with title and description\n * @component\n * @param {Object} props - Component props\n * @param {string} props.title - The title text of the list item\n * @param {string} props.id - Unique identifier for the list item\n * @param {string} props.description - Optional description text below the title\n * @param {Theme} props.theme - Theme object for styling\n * @param {(id: string) => void} props.onClick - Click handler function\n * @param {boolean} props.active - Whether the item is in active state\n * @param {boolean} [props.selected=false] - Whether the item is selected (for checkbox mode)\n * @param {boolean} [props.selectable=false] - Whether the item shows a checkbox\n * @returns {JSX.Element} Rendered ListItem component\n */\nconst ListItem: FunctionComponent<ListItemModel> = memo(\n  ({\n    title,\n    id,\n    description,\n    theme,\n    onClick,\n    active,\n    selected = false,\n    selectable = false,\n  }: ListItemModel) => {\n    /**\n     * Memoized click handler\n     * @param {string} id - Item identifier\n     */\n    const handleOnClick = useCallback((id: string) => onClick?.(id), [onClick]);\n\n    /**\n     * Keyboard event handler for accessibility\n     * @param {KeyboardEvent} ev - Keyboard event\n     * @param {string} id - Item identifier\n     */\n    const handleKeyPress = useCallback((ev: KeyboardEvent, id: string) => {\n      if (ev.key === 'Enter') {\n        handleOnClick(id);\n      }\n    }, []);\n\n    const itemClass = `${listItem} ${active ? listItemActive : ''} ${listItemRecipe({ active: !!active })}`;\n    return (\n      <li\n        data-testid=\"list-item\"\n        key={id}\n        onClick={() => handleOnClick(id)}\n        tabIndex={0}\n        onKeyUp={(ev) => handleKeyPress(ev, id)}\n        className={itemClass}\n      >\n        {selectable ? (\n          <span className={checkboxWrapper}>\n            <span\n              role=\"checkbox\"\n              aria-checked={selected}\n              className={`${checkbox} ${selected ? checkboxSelected : ''}`}\n            >\n              {selected && <CheckIcon />}\n            </span>\n          </span>\n        ) : null}\n        <div className={styleAndDescription}>\n          <h1 className={titleClass}>{title}</h1>\n          {description && <p className={descriptionClass}>{description}</p>}\n        </div>\n      </li>\n    );\n  },\n);\n\nListItem.displayName = 'ListItem';\n\nexport { ListItem };\n","import { getUniqueID } from '@utils/index';\nimport {\n  FunctionComponent,\n  startTransition,\n  useCallback,\n  useMemo,\n} from 'react';\nimport { ListItem } from './list-item';\nimport { ListModel } from './list.model';\nimport { list } from './list.css';\nimport { defaultTheme } from '../../common/themes';\n\n/**\n * Extends the base list item with a unique identifier\n * @typedef {Object} EnhancedListItem\n * @extends {ListModel['items'][0]}\n * @property {string} id - Unique identifier for the list item\n */\ntype EnhancedListItem = ListModel['items'][0] & { id: string };\n\n/**\n * List component that renders selectable items with optional multi-select capability\n * @component\n * @param {Object} props - Component props\n * @param {Array<ListModel['items'][0]>} props.items - Array of items to render in the list\n * @param {string} props.theme - Theme configuration for styling\n * @param {(id: string) => void} [props.onClick] - Callback function when an item is clicked\n * @param {number} [props.activeItemIndex] - Index of the currently active item\n * @param {boolean} [props.multiSelectable=false] - Enable multi-select functionality\n * @returns {JSX.Element} Rendered list component\n */\nconst List: FunctionComponent<ListModel> = ({\n  items,\n  theme,\n  onClick,\n  activeItemIndex,\n  multiSelectable = false,\n}) => {\n  /**\n   * Memoized list items with generated unique IDs\n   */\n  const listItems = useMemo(\n    () => items.map((item) => ({ ...item, id: item.id || getUniqueID() })),\n    [items],\n  );\n\n  /**\n   * Handles item selection and triggers appropriate callbacks\n   * @param {string} id - Item identifier\n   * @param {EnhancedListItem} item - Selected list item\n   */\n  const handleItemSelection = useCallback(\n    (id: string, item: EnhancedListItem) => {\n      if (multiSelectable && item.onSelect) {\n        startTransition(() => {\n          item.onSelect?.();\n        });\n      } else {\n        onClick?.(id);\n      }\n    },\n    [multiSelectable, onClick],\n  );\n\n  /**\n   * Renders individual list items with proper props\n   * @param {EnhancedListItem} item - Item to render\n   * @param {number} index - Item index in the list\n   * @returns {JSX.Element} Rendered list item\n   */\n  const renderListItem = useCallback(\n    (item: EnhancedListItem, index: number) => {\n      const handleClick = useCallback(\n        () => handleItemSelection(item.id, item),\n        [item, handleItemSelection],\n      );\n\n      return (\n        <ListItem\n          key={item.id}\n          {...item}\n          theme={theme || defaultTheme}\n          onClick={handleClick}\n          selectable={multiSelectable}\n          active={activeItemIndex === index}\n        />\n      );\n    },\n    [theme, handleItemSelection, multiSelectable, activeItemIndex],\n  );\n\n  return <ul className={list}>{listItems.map(renderListItem)}</ul>;\n};\n\nexport { List };\n","import { useCallback, useRef, useEffect, MutableRefObject } from 'react';\n\n/**\n * Hook that provides a stable callback reference that always calls the latest version\n * @param callback - The callback function\n * @returns A stable callback reference\n */\nexport const useStableCallback = <T extends (...args: any[]) => any>(\n  callback: T,\n): T => {\n  const ref = useRef(callback);\n\n  useEffect(() => {\n    ref.current = callback;\n  }, [callback]);\n\n  return useCallback((...args: Parameters<T>) => ref.current(...args), []) as T;\n};\n\n/**\n * Hook that provides a stable ref that updates without causing re-renders\n * @param value - The value to store in the ref\n * @returns A ref containing the latest value\n */\nexport const useLatestRef = <T>(value: T): MutableRefObject<T> => {\n  const ref = useRef(value);\n\n  useEffect(() => {\n    ref.current = value;\n  });\n\n  return ref;\n};\n\n/**\n * Hook that runs a cleanup function on unmount\n * @param cleanup - The cleanup function to run\n */\nexport const useUnmount = (cleanup: () => void): void => {\n  const cleanupRef = useRef(cleanup);\n\n  useEffect(() => {\n    cleanupRef.current = cleanup;\n  }, [cleanup]);\n\n  useEffect(() => {\n    return () => {\n      cleanupRef.current();\n    };\n  }, []);\n};\n\n/**\n * Hook that provides RAF-based throttling\n * @param callback - The callback to throttle\n * @returns Throttled callback\n */\nexport const useRAFThrottle = <T extends (...args: any[]) => void>(\n  callback: T,\n): T => {\n  const frameRef = useRef<number | undefined>(undefined);\n  const argsRef = useRef<any[] | undefined>(undefined);\n  const callbackRef = useRef(callback);\n\n  useEffect(() => {\n    callbackRef.current = callback;\n  }, [callback]);\n\n  const throttled = useCallback((...args: Parameters<T>) => {\n    argsRef.current = args;\n\n    if (frameRef.current) return;\n\n    frameRef.current = requestAnimationFrame(() => {\n      if (argsRef.current) {\n        callbackRef.current(...argsRef.current);\n      }\n      frameRef.current = undefined;\n    });\n  }, []) as T;\n\n  useEffect(() => {\n    return () => {\n      if (frameRef.current) {\n        cancelAnimationFrame(frameRef.current);\n      }\n    };\n  }, []);\n\n  return throttled;\n};\n\n/**\n * Color format detection utilities\n */\nexport const HEX_COLOR_REGEX = /^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/;\nexport const RGB_COLOR_REGEX = /^rgb\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)$/;\nexport const RGBA_COLOR_REGEX =\n  /^rgba\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*([\\d.]+)\\s*\\)$/;\nexport const HSL_COLOR_REGEX = /^hsl\\(\\s*(\\d+)\\s*,\\s*(\\d+)%\\s*,\\s*(\\d+)%\\s*\\)$/;\nexport const HSLA_COLOR_REGEX =\n  /^hsla\\(\\s*(\\d+)\\s*,\\s*(\\d+)%\\s*,\\s*(\\d+)%\\s*,\\s*([\\d.]+)\\s*\\)$/;\n\nexport type ColorFormat = 'hex' | 'rgb' | 'rgba' | 'hsl' | 'hsla' | 'unknown';\n\nexport const detectColorFormat = (color: string): ColorFormat => {\n  if (HEX_COLOR_REGEX.test(color)) return 'hex';\n  if (RGB_COLOR_REGEX.test(color)) return 'rgb';\n  if (RGBA_COLOR_REGEX.test(color)) return 'rgba';\n  if (HSL_COLOR_REGEX.test(color)) return 'hsl';\n  if (HSLA_COLOR_REGEX.test(color)) return 'hsla';\n  return 'unknown';\n};\n\n/**\n * Adjusts RGB color opacity\n */\nexport const adjustRGBOpacity = (color: string, opacity: number): string => {\n  const match = RGB_COLOR_REGEX.exec(color) || RGBA_COLOR_REGEX.exec(color);\n  if (!match) return '';\n\n  const [, r, g, b] = match;\n  return `rgba(${r}, ${g}, ${b}, ${opacity})`;\n};\n\n/**\n * Adjusts HSL color opacity\n */\nexport const adjustHSLOpacity = (color: string, opacity: number): string => {\n  const match = HSL_COLOR_REGEX.exec(color) || HSLA_COLOR_REGEX.exec(color);\n  if (!match) return '';\n\n  const [, h, s, l] = match;\n  return `hsla(${h}, ${s}%, ${l}%, ${opacity})`;\n};\n","import { RefObject, useEffect, useCallback, useRef, useMemo } from 'react';\nimport { useStableCallback } from './utils';\n\ninterface UseOutsideClickOptions {\n  eventType?: 'click' | 'mousedown' | 'touchstart';\n  enabled?: boolean;\n  preventDefault?: boolean;\n  stopPropagation?: boolean;\n  excludeRefs?: RefObject<HTMLElement | null>[];\n}\n\n/**\n * Hook that triggers callback when clicking outside referenced element(s)\n * @param el - The element ref(s) to check clicks outside of\n * @param callback - Function to call when clicking outside\n * @param options - Configuration options\n */\nexport default function useOutsideClick(\n  el: RefObject<HTMLElement | null> | RefObject<HTMLElement | null>[],\n  callback: () => void,\n  options: UseOutsideClickOptions = {},\n) {\n  const {\n    eventType = 'click',\n    enabled = true,\n    preventDefault = false,\n    stopPropagation = false,\n    excludeRefs = [],\n  } = options;\n\n  const stableCallback = useStableCallback(callback);\n  const lastEnabled = useRef(enabled);\n\n  // Normalize refs to array\n  const refs = Array.isArray(el) ? el : [el];\n  const allRefs = useMemo(() => [...refs, ...excludeRefs], [refs, excludeRefs]);\n\n  const handleClick = useCallback(\n    (e: MouseEvent | TouchEvent) => {\n      // Early return for better performance\n      if (!lastEnabled.current) return;\n\n      const target = e.target as Node;\n\n      // Check if click is inside any of the refs\n      const isInsideAnyRef = allRefs.some((ref) => {\n        const element = ref.current;\n        return element && element.contains(target);\n      });\n\n      if (!isInsideAnyRef) {\n        if (preventDefault) e.preventDefault();\n        if (stopPropagation) e.stopPropagation();\n        stableCallback();\n      }\n    },\n    [allRefs, preventDefault, stopPropagation, stableCallback],\n  );\n\n  useEffect(() => {\n    lastEnabled.current = enabled;\n\n    if (!enabled) return;\n\n    // Use passive listeners where possible for better scroll performance\n    const listenerOptions =\n      preventDefault || stopPropagation || eventType === 'touchstart'\n        ? { passive: false }\n        : { passive: true };\n\n    document.addEventListener(eventType, handleClick, listenerOptions);\n\n    return () => {\n      document.removeEventListener(eventType, handleClick);\n    };\n  }, [eventType, handleClick, enabled, preventDefault, stopPropagation]);\n}\n","import { useEffect, useCallback, useRef } from 'react';\nimport { useStableCallback } from './utils';\n\ninterface UseKeyHandlerOptions {\n  enabled?: boolean;\n  keys?: string | string[];\n  keyCodes?: number | number[];\n  eventType?: 'keyup' | 'keydown' | 'keypress';\n  preventDefault?: boolean;\n  stopPropagation?: boolean;\n  metaKey?: boolean;\n  ctrlKey?: boolean;\n  altKey?: boolean;\n  shiftKey?: boolean;\n}\n\n/**\n * Hook that triggers callback on specific key press(es)\n * Supports multiple keys and key combinations\n * @param callback - Function to call when key(s) are pressed\n * @param options - Configuration options\n */\nexport function useKeyHandler(\n  callback: (event: KeyboardEvent) => void,\n  options: UseKeyHandlerOptions = {},\n) {\n  const {\n    enabled = true,\n    keys = 'Escape',\n    keyCodes = 27,\n    eventType = 'keyup',\n    preventDefault = true,\n    stopPropagation = false,\n    metaKey = false,\n    ctrlKey = false,\n    altKey = false,\n    shiftKey = false,\n  } = options;\n\n  const stableCallback = useStableCallback(callback);\n  const lastEnabled = useRef(enabled);\n\n  // Normalize keys and keyCodes to arrays\n  const keyArray = Array.isArray(keys) ? keys : [keys];\n  const keyCodeArray = Array.isArray(keyCodes) ? keyCodes : [keyCodes];\n\n  const handleKey = useCallback(\n    (e: KeyboardEvent) => {\n      // Early return for better performance\n      if (!lastEnabled.current) return;\n\n      // Check modifier keys\n      if (metaKey && !e.metaKey) return;\n      if (ctrlKey && !e.ctrlKey) return;\n      if (altKey && !e.altKey) return;\n      if (shiftKey && !e.shiftKey) return;\n\n      // Check if the pressed key matches any of the target keys\n      const keyMatch = keyArray.includes(e.key);\n      const keyCodeMatch =\n        e.key === undefined && keyCodeArray.includes(e.keyCode);\n\n      if (keyMatch || keyCodeMatch) {\n        if (preventDefault) e.preventDefault();\n        if (stopPropagation) e.stopPropagation();\n        stableCallback(e);\n      }\n    },\n    [\n      keyArray,\n      keyCodeArray,\n      preventDefault,\n      stopPropagation,\n      metaKey,\n      ctrlKey,\n      altKey,\n      shiftKey,\n      stableCallback,\n    ],\n  );\n\n  useEffect(() => {\n    lastEnabled.current = enabled;\n\n    if (!enabled) return;\n\n    // Use passive listeners where possible for better scroll performance\n    const listenerOptions =\n      preventDefault || stopPropagation\n        ? { passive: false }\n        : { passive: true };\n\n    document.addEventListener(eventType, handleKey, listenerOptions);\n\n    return () => {\n      document.removeEventListener(eventType, handleKey);\n    };\n  }, [eventType, handleKey, enabled, preventDefault, stopPropagation]);\n}\n\n/**\n * Legacy hook for backward compatibility\n * @deprecated Use useKeyHandler instead\n */\nexport default function useEscapeKey(\n  callback: () => void,\n  options: UseKeyHandlerOptions = {},\n) {\n  useKeyHandler(() => callback(), options);\n}\n","import { RefObject } from 'react';\nimport useOutsideClick from '../../hooks/useOutsideClick';\nimport useEscapeKey from '../../hooks/useEscapeKey';\n\n/**\n * Custom hook that handles click outside and escape key events\n * @param el - Reference to the DOM element to watch for outside clicks\n * @param callback - Function to call when a click outside or escape key is detected\n */\nexport default function useCloseClickOutside(\n  el: RefObject<HTMLElement | null>,\n  callback: () => void,\n) {\n  useOutsideClick(el, callback);\n  useEscapeKey(callback);\n}\n","import React, {\n  FunctionComponent,\n  useCallback,\n  useEffect,\n  useLayoutEffect,\n  useReducer,\n  useRef,\n  memo,\n  useState,\n} from 'react';\nimport ReactDOM from 'react-dom';\nimport useCloseClickOutside from 'src/components/effects/useCloseClickOutside';\nimport { ChevronDown, CloseIcon } from 'src/components/icons';\nimport { PopOverModel } from './popover.model';\nimport {\n  closeButton,\n  content,\n  header,\n  popoverHolder,\n  popoverWrapper,\n  selecter,\n  selecterIcon,\n  selecterIconOpen,\n  selecterLabel,\n} from './popover.css';\nimport { popoverHolderRecipe } from './popover.css';\nimport { computeCssVarsFromTheme } from '../../../styles/theme-bridge';\n\n// Memoized content wrapper applying the class from CSS module\nconst MemoizedContent = memo(({ children }: { children: React.ReactNode }) => (\n  <div className={content}>{children}</div>\n));\n\n// Reducer for state management\ntype State = { open: boolean; isVisible: boolean };\ntype Action =\n  | { type: 'TOGGLE' }\n  | { type: 'CLOSE' }\n  | { type: 'SET_VISIBLE'; payload: boolean };\n\nconst popoverReducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case 'TOGGLE':\n      return { ...state, open: !state.open };\n    case 'CLOSE':\n      return { ...state, open: false };\n    case 'SET_VISIBLE':\n      return { ...state, isVisible: action.payload };\n    default:\n      return state;\n  }\n};\n\n/**\n * A customizable popover component that displays content in a floating panel\n * @param {PopOverModel} props - Component props\n * @returns {JSX.Element} PopOver component\n */\nconst PopOver: FunctionComponent<PopOverModel> = ({\n  children,\n  position,\n  placeholder,\n  theme,\n  width = 350,\n  isDarkMode = false,\n  icon,\n  $isMobile = false,\n}) => {\n  const ref = useRef<HTMLDivElement>(null);\n  const popoverRef = useRef<HTMLDivElement>(null);\n  const [state, dispatch] = useReducer(popoverReducer, {\n    open: false,\n    isVisible: false,\n  });\n  const [horizontalPosition, setHorizontalPosition] = useState<\n    'left' | 'right' | 'center'\n  >('center');\n  const [popoverPosition, setPopoverPosition] = useState({\n    top: 0,\n    left: 0,\n    width: 0,\n  });\n  const [portalContainer, setPortalContainer] = useState<HTMLElement>(\n    document.body,\n  );\n\n  // Get the current fullscreen element (with vendor prefix support)\n  const getFullscreenElement = useCallback((): HTMLElement | null => {\n    if (typeof document === 'undefined') return null;\n\n    const doc = document as Document & {\n      fullscreenElement?: Element;\n      webkitFullscreenElement?: Element;\n      mozFullScreenElement?: Element;\n      msFullscreenElement?: Element;\n    };\n\n    const fullscreenEl =\n      doc.fullscreenElement ||\n      doc.webkitFullscreenElement ||\n      doc.mozFullScreenElement ||\n      doc.msFullscreenElement ||\n      null;\n\n    return fullscreenEl as HTMLElement | null;\n  }, []);\n\n  // Update portal container when fullscreen state changes\n  useEffect(() => {\n    const updatePortalContainer = () => {\n      const fullscreenEl = getFullscreenElement();\n      setPortalContainer(fullscreenEl || document.body);\n    };\n\n    // Update immediately\n    updatePortalContainer();\n\n    // Listen for fullscreen changes\n    const events = [\n      'fullscreenchange',\n      'webkitfullscreenchange',\n      'mozfullscreenchange',\n      'msfullscreenchange',\n    ];\n\n    events.forEach((event) => {\n      document.addEventListener(event, updatePortalContainer);\n    });\n\n    return () => {\n      events.forEach((event) => {\n        document.removeEventListener(event, updatePortalContainer);\n      });\n    };\n  }, [getFullscreenElement]);\n\n  const toggleOpen = useCallback(() => {\n    dispatch({ type: 'TOGGLE' });\n  }, []);\n\n  const closePopover = useCallback(() => {\n    dispatch({ type: 'CLOSE' });\n  }, []);\n\n  const handleKeyPress = useCallback((ev: React.KeyboardEvent) => {\n    if (ev.key === 'Enter') {\n      dispatch({ type: 'TOGGLE' });\n    }\n  }, []);\n\n  useCloseClickOutside(ref, closePopover);\n\n  // Calculate optimal positioning for portal rendering\n  const calculatePopoverPosition = useCallback(() => {\n    if (!ref.current) return;\n\n    const triggerRect = ref.current.getBoundingClientRect();\n    const viewportWidth = window.innerWidth;\n    const viewportHeight = window.innerHeight;\n    const popoverWidth = $isMobile ? Math.min(320, viewportWidth * 0.9) : width;\n\n    // Calculate horizontal position - center the popover under the button\n    let left = triggerRect.left;\n    let horizontalPos: 'left' | 'right' | 'center' = 'left';\n\n    if ($isMobile) {\n      // Center on mobile\n      left = (viewportWidth - popoverWidth) / 2;\n      horizontalPos = 'center';\n    } else {\n      // First try to center the popover horizontally under the button\n      const buttonCenterX = triggerRect.left + triggerRect.width / 2;\n      let preferredLeft = buttonCenterX - popoverWidth / 2;\n\n      // Check if the preferred position fits within viewport\n      if (\n        preferredLeft >= 16 &&\n        preferredLeft + popoverWidth <= viewportWidth - 16\n      ) {\n        // Center alignment works\n        left = preferredLeft;\n        horizontalPos = 'center';\n      } else if (triggerRect.left + popoverWidth <= viewportWidth - 16) {\n        // Align with left edge of button\n        left = triggerRect.left;\n        horizontalPos = 'left';\n      } else if (triggerRect.right - popoverWidth >= 16) {\n        // Align with right edge of button\n        left = triggerRect.right - popoverWidth;\n        horizontalPos = 'right';\n      } else {\n        // Fallback: fit within viewport\n        left = Math.max(\n          16,\n          Math.min(triggerRect.left, viewportWidth - popoverWidth - 16),\n        );\n        horizontalPos = 'left';\n      }\n    }\n\n    // Calculate vertical position - directly below the button\n    const gap = 8; // Smaller gap for tighter positioning\n    let top = triggerRect.bottom + gap;\n\n    // Check if there's enough space below\n    const popoverHeight = 400; // Estimated height\n    const spaceBelow = viewportHeight - triggerRect.bottom - gap;\n    const spaceAbove = triggerRect.top - gap;\n\n    if (spaceBelow < popoverHeight && spaceAbove > popoverHeight) {\n      // Position above if not enough space below\n      top = triggerRect.top - popoverHeight - gap;\n    } else {\n      // Keep below, but ensure it doesn't go off-screen\n      top = Math.min(top, viewportHeight - popoverHeight - 16);\n    }\n\n    // Ensure minimum distance from viewport edge\n    top = Math.max(16, top);\n\n    setPopoverPosition({ top, left, width: popoverWidth });\n    setHorizontalPosition(horizontalPos);\n  }, [width, $isMobile, position]);\n\n  // Position calculation on layout changes and scroll/resize\n  useLayoutEffect(() => {\n    if (state.open) {\n      calculatePopoverPosition();\n    }\n  }, [state.open, calculatePopoverPosition]);\n\n  // Recalculate position on scroll or resize\n  useEffect(() => {\n    if (!state.open) return;\n\n    const handlePositionUpdate = () => {\n      if (state.open) {\n        calculatePopoverPosition();\n      }\n    };\n\n    window.addEventListener('scroll', handlePositionUpdate, { passive: true });\n    window.addEventListener('resize', handlePositionUpdate, { passive: true });\n\n    return () => {\n      window.removeEventListener('scroll', handlePositionUpdate);\n      window.removeEventListener('resize', handlePositionUpdate);\n    };\n  }, [state.open, calculatePopoverPosition]);\n\n  // Use CSS transition instead of setTimeout\n  useEffect(() => {\n    if (state.open) {\n      requestAnimationFrame(() => {\n        dispatch({ type: 'SET_VISIBLE', payload: true });\n      });\n    } else {\n      dispatch({ type: 'SET_VISIBLE', payload: false });\n    }\n  }, [state.open]);\n\n  return (\n    <>\n      <div className={popoverWrapper} ref={ref}>\n        <button\n          type=\"button\"\n          onClick={toggleOpen}\n          onKeyDown={handleKeyPress}\n          title={placeholder}\n          className={selecter}\n          style={computeCssVarsFromTheme(theme)}\n          aria-expanded={state.open}\n          aria-haspopup=\"dialog\"\n          aria-label={placeholder || 'Open menu'}\n        >\n          {placeholder && <span className={selecterLabel}>{placeholder}</span>}\n          <span\n            className={[selecterIcon, state.open ? selecterIconOpen : ''].join(\n              ' ',\n            )}\n          >\n            {icon || <ChevronDown />}\n          </span>\n        </button>\n        {state.open &&\n          ReactDOM.createPortal(\n            <div\n              ref={popoverRef}\n              className={[\n                popoverHolder,\n                popoverHolderRecipe({\n                  visible: state.isVisible,\n                  position: position === 'bottom' ? 'bottom' : 'top',\n                  leftMobile: !!$isMobile,\n                }),\n              ].join(' ')}\n              style={{\n                ...computeCssVarsFromTheme(theme),\n                width: `${popoverPosition.width}px`,\n                position: 'fixed',\n                zIndex: 99999,\n                left: `${popoverPosition.left}px`,\n                top: `${popoverPosition.top}px`,\n                transform: 'none',\n              }}\n              data-position-x={horizontalPosition}\n              role=\"dialog\"\n              aria-modal=\"false\"\n              aria-labelledby={placeholder ? undefined : 'popover-content'}\n            >\n              <div className={header}>\n                <button\n                  className={closeButton}\n                  onClick={closePopover}\n                  type=\"button\"\n                  aria-label=\"Close menu\"\n                  title=\"Close menu\"\n                >\n                  <CloseIcon />\n                </button>\n              </div>\n              <MemoizedContent>{children}</MemoizedContent>\n            </div>,\n            portalContainer,\n          )}\n      </div>\n    </>\n  );\n};\n\nexport default memo(PopOver);\n","import { FunctionComponent, useMemo } from 'react';\nimport { useTimelineContext } from '../contexts';\nimport { List } from '../elements/list/list';\nimport PopOver from '../elements/popover';\nimport { ArrowDownIcon, LayoutIcon, ParaIcon } from '../icons';\nimport {\n  ChangeDensityProp,\n  LayoutSwitcherProp,\n  QuickJumpProp,\n} from './timeline-popover.model';\n\nconst LayoutSwitcher: FunctionComponent<LayoutSwitcherProp> = ({\n  onUpdateTimelineMode,\n  theme,\n  mode,\n  isDarkMode,\n  position,\n  isMobile,\n}: LayoutSwitcherProp) => {\n  const { buttonTexts, showAllCardsHorizontal } = useTimelineContext();\n\n  const LayoutIconMemo = useMemo(() => <LayoutIcon />, []);\n\n  const activeTimelineMode = useMemo(\n    () => mode,\n    [showAllCardsHorizontal, mode],\n  );\n\n  const layoutOptions = useMemo(\n    () => ({\n      alternating: buttonTexts?.changeLayoutOptions?.alternating,\n      horizontal: buttonTexts?.changeLayoutOptions?.horizontal,\n      horizontal_all: buttonTexts?.changeLayoutOptions?.horizontal_all,\n      vertical: buttonTexts?.changeLayoutOptions?.vertical,\n    }),\n    [buttonTexts],\n  );\n\n  const verticalItems = useMemo(\n    () => [\n      {\n        description: layoutOptions.vertical?.helpText || '',\n        id: 'VERTICAL',\n        onSelect: () => onUpdateTimelineMode('VERTICAL'),\n        selected: activeTimelineMode === 'VERTICAL',\n        title: layoutOptions.vertical?.text || 'Vertical',\n      },\n      {\n        description: layoutOptions.alternating?.helpText || '',\n        id: 'VERTICAL_ALTERNATING',\n        onSelect: () => onUpdateTimelineMode('VERTICAL_ALTERNATING'),\n        selected: activeTimelineMode === 'VERTICAL_ALTERNATING',\n        title: layoutOptions.alternating?.text || 'Alternating',\n      },\n    ],\n    [activeTimelineMode, layoutOptions],\n  );\n\n  // horizontal list OF options when the mode is `HORIZONTAL`\n  const horizontalItems = useMemo(\n    () => [\n      {\n        description: layoutOptions.horizontal?.helpText || '',\n        id: 'HORIZONTAL',\n        onSelect: () => {\n          onUpdateTimelineMode('HORIZONTAL');\n        },\n        selected: activeTimelineMode === 'HORIZONTAL',\n        title: layoutOptions.horizontal?.text || 'Horizontal',\n      },\n      {\n        description: layoutOptions.horizontal_all?.helpText || '',\n        id: 'HORIZONTAL_ALL',\n        onSelect: () => {\n          onUpdateTimelineMode('HORIZONTAL_ALL');\n        },\n        selected: activeTimelineMode === 'HORIZONTAL_ALL',\n        title: layoutOptions.horizontal?.text || 'Horizontal All',\n      },\n    ],\n    [activeTimelineMode, layoutOptions],\n  );\n\n  return (\n    <PopOver\n      placeholder={buttonTexts?.changeLayout || 'Change layout'}\n      position={position}\n      theme={theme}\n      isDarkMode={isDarkMode}\n      icon={LayoutIconMemo}\n      $isMobile={isMobile}\n    >\n      <List\n        items={\n          mode === 'HORIZONTAL' || mode === 'HORIZONTAL_ALL'\n            ? horizontalItems\n            : verticalItems\n        }\n        theme={theme}\n        multiSelectable\n      />\n    </PopOver>\n  );\n};\n\nconst QuickJump: FunctionComponent<QuickJumpProp> = ({\n  activeItem,\n  items,\n  theme,\n  onActivateItem,\n  isDarkMode,\n  position,\n  isMobile,\n}: QuickJumpProp) => {\n  const { buttonTexts } = useTimelineContext();\n\n  const ArrowDownIconMemo = useMemo(() => <ArrowDownIcon />, []);\n\n  return (\n    <PopOver\n      placeholder={buttonTexts?.jumpTo || 'Jump to timeline item'}\n      position={position}\n      theme={theme}\n      width={400}\n      isDarkMode={isDarkMode}\n      $isMobile={isMobile}\n      icon={ArrowDownIconMemo}\n    >\n      <List\n        items={items.map((item, index) => ({\n          active: index === activeItem,\n          description: item.description,\n          id: item.id,\n          label: item.title,\n          onSelect: () => {},\n          title: item.title ?? `Item ${index + 1}`,\n        }))}\n        theme={theme}\n        onClick={(id?: string) => id && onActivateItem(id)}\n      />\n    </PopOver>\n  );\n};\n\nconst ChangeDensity: FunctionComponent<ChangeDensityProp> = ({\n  onChange,\n  selectedDensity,\n  theme,\n  isDarkMode,\n  position,\n  isMobile,\n}) => {\n  const { buttonTexts } = useTimelineContext();\n\n  const ParaIconMemo = useMemo(() => <ParaIcon />, []);\n\n  const items = useMemo(\n    () => [\n      {\n        description: 'Show less text',\n        id: 'LOW',\n        onSelect: () => onChange('LOW'),\n        selected: selectedDensity === 'LOW',\n        title: 'Low',\n      },\n      {\n        description: 'Show more text',\n        id: 'HIGH',\n        onSelect: () => onChange('HIGH'),\n        selected: selectedDensity === 'HIGH',\n        title: 'High',\n      },\n    ],\n    [selectedDensity],\n  );\n\n  return (\n    <PopOver\n      placeholder={buttonTexts?.changeDensity || 'Change text density'}\n      theme={theme}\n      isDarkMode={isDarkMode}\n      position={position}\n      $isMobile={isMobile}\n      width={300}\n      icon={ParaIconMemo}\n    >\n      <List items={items} theme={theme} multiSelectable />\n    </PopOver>\n  );\n};\n\nexport { ChangeDensity, LayoutSwitcher, QuickJump };\n","// Import necessary dependencies\nimport React, { FunctionComponent, useMemo } from 'react';\nimport { useTimelineContext } from '../contexts';\nimport Controls from '../timeline-elements/timeline-control/timeline-control';\nimport { FullscreenControl } from '../timeline-elements/fullscreen-control';\nimport { pickDefined } from '../../utils/propUtils';\n// Removed direct styled import; buttons use native <button> with classes now\nimport { ChevronLeft, ChevronRight, CloseIcon } from '../icons';\nimport {\n  ChangeDensity,\n  LayoutSwitcher,\n  QuickJump,\n} from './timeline-popover-elements';\nimport { TimelineToolbarProps } from './timeline-toolbar.model';\nimport { TimelineMode } from '@models/TimelineModel';\nimport {\n  actionGroup as veActionGroup,\n  navigationGroup as veNavigationGroup,\n  searchControls as veSearchControls,\n  searchGroup as veSearchGroup,\n  searchInfo as veSearchInfo,\n  searchInput as veSearchInput,\n  searchWrapper as veSearchWrapper,\n  extraControls as veExtraControls,\n  toolbarWrapper as veToolbarWrapper,\n  searchButton as veSearchButton,\n  searchButtonIcon as veSearchButtonIcon,\n  hideOnMobile,\n} from '../toolbar/toolbar.css';\n\n// Helper function to convert ReactNode to string safely\nconst getTextFromNode = (\n  content: React.ReactNode | string | undefined,\n): string => {\n  if (content === null || content === undefined) {\n    return '';\n  }\n  if (typeof content === 'string') {\n    return content;\n  }\n  if (typeof content === 'number' || typeof content === 'boolean') {\n    return String(content);\n  }\n  // For any other ReactNode, return empty string\n  return '';\n};\n\n// Define the TimelineToolbar component\nconst TimelineToolbar: FunctionComponent<TimelineToolbarProps> = ({\n  activeTimelineItem,\n  slideShowEnabled,\n  slideShowRunning,\n  flipLayout,\n  toggleDarkMode,\n  onPaused,\n  onFirst,\n  onLast,\n  onNext,\n  onPrevious,\n  onRestartSlideshow,\n  totalItems,\n  items = [],\n  id,\n  onActivateTimelineItem,\n  onUpdateTimelineMode,\n  onUpdateTextContentDensity,\n  mode,\n  searchQuery,\n  onSearchChange,\n  onClearSearch,\n  onNextMatch,\n  onPreviousMatch,\n  totalMatches,\n  currentMatchIndex,\n  onSearchKeyDown,\n  searchInputRef,\n  timelineRef,\n  onEnterFullscreen,\n  onExitFullscreen,\n  onFullscreenError,\n  stickyToolbar,\n}: TimelineToolbarProps) => {\n  // Access the stable and dynamic contexts\n  const {\n    cardLess,\n    enableQuickJump,\n    toolbarPosition,\n    enableLayoutSwitch,\n    buttonTexts,\n    theme,\n    isDarkMode: darkMode,\n    textContentDensity: textDensity,\n    isMobile,\n    textResolver,\n  } = useTimelineContext();\n\n  // Prepare QuickJump items with proper string conversions\n  const quickJumpItems = useMemo(() => {\n    return items.map((item) => ({\n      id: item.id ?? '',\n      title: getTextFromNode(item.title),\n      description: getTextFromNode(item.cardSubtitle),\n      ...pickDefined({\n        active: item.active,\n      }),\n    }));\n  }, [items]);\n\n  // Define methods to determine button state\n  const isLeftDisabled = useMemo(() => {\n    if (flipLayout) {\n      return activeTimelineItem === totalItems - 1;\n    }\n    return activeTimelineItem === 0;\n  }, [flipLayout, activeTimelineItem, totalItems]);\n\n  // Determine if the right arrow should be disabled\n  const isRightDisabled = useMemo(() => {\n    if (flipLayout) {\n      return activeTimelineItem === 0;\n    }\n    return activeTimelineItem === totalItems - 1;\n  }, [flipLayout, activeTimelineItem, totalItems]);\n\n  const hideExtraControls = useMemo(() => {\n    return cardLess || slideShowRunning;\n  }, [cardLess, slideShowRunning]);\n\n  const canShowDensity = useMemo(() => {\n    return items.every((item) => item.cardDetailedText);\n  }, []);\n\n  const handleInputChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    onSearchChange(event.target.value);\n  };\n\n  // Prevent search input from losing focus when timeline elements are clicked\n  const handleSearchInputBlur = (event: React.FocusEvent<HTMLInputElement>) => {\n    // Check if the new focus target is a timeline card or navigation element\n    const relatedTarget = event.relatedTarget as HTMLElement;\n\n    // If focus is moving to a timeline card or navigation, prevent blur\n    if (\n      relatedTarget &&\n      (relatedTarget.closest('[data-testid*=\"timeline\"]') ||\n        relatedTarget.closest('.timeline-card') ||\n        relatedTarget.closest('.timeline-item'))\n    ) {\n      // Restore focus to search input after a short delay\n      setTimeout(() => {\n        if (searchInputRef?.current) {\n          searchInputRef.current.focus();\n        }\n      }, 10);\n    }\n  };\n\n  // Handle clear search and focus the input\n  const handleClearSearch = () => {\n    onClearSearch();\n    // The focus restoration is now handled in the hook\n  };\n\n  // Add KeyDown handler for Enter key navigation\n  const handleSearchKeyDown = (\n    event: React.KeyboardEvent<HTMLInputElement>,\n  ) => {\n    if (event.key === 'Enter' && totalMatches > 0) {\n      event.preventDefault(); // Prevent potential form submission\n\n      // Navigate to next match - focus restoration is handled in the hook\n      if (onSearchKeyDown) {\n        onSearchKeyDown(event);\n      } else {\n        onNextMatch();\n      }\n    }\n  };\n\n  // Disable search navigation if no matches or slideshow running\n  const disableSearchNav = useMemo(\n    () => totalMatches === 0 || slideShowRunning,\n    [totalMatches, slideShowRunning],\n  );\n\n  // ARIA: tie the input to the live match count\n  const searchInfoId = useMemo(() => {\n    return id ? `timeline-search-info-${id}` : 'timeline-search-info';\n  }, [id]);\n\n  // Render the TimelineToolbar component\n  return (\n    <div\n      className={veToolbarWrapper({ sticky: Boolean(stickyToolbar) })}\n      role=\"toolbar\"\n      aria-label=\"Timeline toolbar\"\n      aria-orientation=\"horizontal\"\n    >\n      <div\n        className={veNavigationGroup}\n        role=\"group\"\n        aria-label=\"Timeline navigation controls\"\n      >\n        <Controls\n          disableLeft={isLeftDisabled}\n          disableRight={isRightDisabled}\n          id={id}\n          isDark={darkMode}\n          onToggleDarkMode={toggleDarkMode}\n          activeTimelineItem={activeTimelineItem || 0}\n          totalItems={totalItems}\n          {...pickDefined({\n            onFirst,\n            onLast,\n            onNext,\n            onPrevious,\n            onReplay: onRestartSlideshow,\n            slideShowEnabled,\n            slideShowRunning,\n            onPaused,\n          })}\n        />\n      </div>\n      <div\n        className={`${veSearchGroup} ${hideOnMobile}`}\n        role=\"search\"\n        aria-label=\"Timeline search\"\n      >\n        <div className={veSearchWrapper}>\n          <input\n            ref={searchInputRef}\n            type=\"search\"\n            placeholder={textResolver.searchPlaceholder()}\n            value={searchQuery}\n            onChange={handleInputChange}\n            onKeyDown={(event) => {\n              // Support Enter for next, Shift+Enter for previous, Escape to clear\n              if (event.key === 'Escape') {\n                event.preventDefault();\n                handleClearSearch();\n                return;\n              }\n              if (event.key === 'Enter' && totalMatches > 0) {\n                event.preventDefault();\n                if (event.shiftKey) {\n                  onPreviousMatch();\n                } else {\n                  onNextMatch();\n                }\n                return;\n              }\n              handleSearchKeyDown(event);\n            }}\n            onBlur={handleSearchInputBlur}\n            aria-label={textResolver.searchAriaLabel()}\n            disabled={slideShowRunning}\n            aria-keyshortcuts=\"Enter Shift+Enter Escape\"\n            aria-describedby={\n              searchQuery && totalMatches > 0 ? searchInfoId : undefined\n            }\n            autoComplete=\"off\"\n            spellCheck=\"false\"\n            className={veSearchInput}\n          />\n          {searchQuery && (\n            <button\n              className={veSearchButton}\n              onClick={handleClearSearch}\n              title={textResolver.clearSearch()}\n              aria-label={textResolver.clearSearch()}\n              type=\"button\"\n            >\n              <span className={veSearchButtonIcon}>\n                <CloseIcon />\n              </span>\n            </button>\n          )}\n          <div\n            className={veSearchControls}\n            role=\"group\"\n            aria-label=\"Search navigation\"\n          >\n            {totalMatches > 0 && (\n              <span\n                id={searchInfoId}\n                role=\"status\"\n                aria-live=\"polite\"\n                aria-atomic=\"true\"\n                className={veSearchInfo}\n                aria-label={`Search result ${currentMatchIndex + 1} of ${totalMatches}`}\n              >\n                {`${currentMatchIndex + 1} / ${totalMatches}`}\n              </span>\n            )}\n            {searchQuery && totalMatches === 0 && (\n              <span\n                role=\"status\"\n                aria-live=\"polite\"\n                aria-atomic=\"true\"\n                style={{\n                  position: 'absolute',\n                  width: 1,\n                  height: 1,\n                  padding: 0,\n                  margin: -1,\n                  overflow: 'hidden',\n                  clip: 'rect(0, 0, 0, 0)',\n                  whiteSpace: 'nowrap',\n                  border: 0,\n                }}\n              >\n                {textResolver.noSearchResults()}\n              </span>\n            )}\n            {searchQuery && (\n              <>\n                <button\n                  className={veSearchButton}\n                  onClick={onPreviousMatch}\n                  title={textResolver.previousMatch()}\n                  aria-label={textResolver.previousMatch()}\n                  disabled={disableSearchNav}\n                  type=\"button\"\n                >\n                  <span className={veSearchButtonIcon}>\n                    <ChevronLeft />\n                  </span>\n                </button>\n                <button\n                  className={veSearchButton}\n                  onClick={onNextMatch}\n                  title={textResolver.nextMatch()}\n                  aria-label={textResolver.nextMatch()}\n                  disabled={disableSearchNav}\n                  type=\"button\"\n                >\n                  <span className={veSearchButtonIcon}>\n                    <ChevronRight />\n                  </span>\n                </button>\n              </>\n            )}\n          </div>\n        </div>\n      </div>\n      <div className={veActionGroup} role=\"group\" aria-label=\"Timeline actions\">\n        <div\n          className={`${veExtraControls} ${hideOnMobile}`}\n          key=\"timeline-extra-controls\"\n          style={{ visibility: hideExtraControls ? 'hidden' : 'visible' }}\n          role=\"group\"\n          aria-label=\"Additional timeline controls\"\n        >\n          <div className=\"control-wrapper\" key=\"quick-jump\">\n            {enableQuickJump ? (\n              <QuickJump\n                activeItem={activeTimelineItem ?? 0}\n                isDarkMode={darkMode}\n                items={quickJumpItems}\n                onActivateItem={onActivateTimelineItem}\n                theme={theme}\n                position={toolbarPosition}\n                isMobile={isMobile}\n              />\n            ) : null}\n          </div>\n          <div className=\"control-wrapper\" key=\"layout-switcher\">\n            {!cardLess && enableLayoutSwitch ? (\n              <LayoutSwitcher\n                isDarkMode={darkMode}\n                theme={theme}\n                onUpdateTimelineMode={(modeString: string) =>\n                  onUpdateTimelineMode(modeString as TimelineMode)\n                }\n                position={toolbarPosition}\n                isMobile={isMobile}\n                {...pickDefined({\n                  mode,\n                })}\n              />\n            ) : null}\n          </div>\n          {canShowDensity ? (\n            <div className=\"control-wrapper\" key=\"change-density\">\n              <ChangeDensity\n                isDarkMode={darkMode}\n                theme={theme}\n                onChange={onUpdateTextContentDensity}\n                position={toolbarPosition}\n                selectedDensity={textDensity}\n                isMobile={isMobile}\n              ></ChangeDensity>\n            </div>\n          ) : null}\n          <div className=\"control-wrapper\" key=\"fullscreen-control\">\n            {timelineRef && (\n              <FullscreenControl\n                targetRef={timelineRef}\n                theme={theme}\n                size=\"medium\"\n                disabled={false}\n                {...pickDefined({\n                  onEnterFullscreen,\n                  onExitFullscreen,\n                  onError: onFullscreenError,\n                })}\n              />\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Export the TimelineToolbar component\nexport { TimelineToolbar };\n","import React from 'react';\n\n/**\n * Timeline utility functions for managing timeline functionality\n */\n\n/**\n * Safely extracts searchable text from potentially complex React node content\n * Recursively processes React nodes into plain text for search operations\n * @param content - React node (string, array, or component) to extract text from\n * @returns Plain text string suitable for searching\n */\nexport const getSearchableText = (content: React.ReactNode): string => {\n  if (content === null || content === undefined) {\n    return '';\n  }\n  if (typeof content === 'string') {\n    return content;\n  }\n  if (Array.isArray(content)) {\n    return content\n      .map((item) => getSearchableText(item))\n      .filter(Boolean)\n      .join(' ');\n  }\n  // Handle React elements with children or other complex node types\n  if (React.isValidElement(content)) {\n    const elementProps = content.props as { children?: React.ReactNode };\n    if (elementProps.children) {\n      return getSearchableText(elementProps.children);\n    }\n  }\n  return '';\n};\n\n/**\n * Safely validates if a URL belongs to a trusted video platform\n * @param url - URL to validate\n * @returns Object with validation result and platform info\n */\nconst validateVideoUrl = (\n  url: string,\n): { isValid: boolean; platform?: string; origin?: string } => {\n  try {\n    const parsedUrl = new URL(url);\n    const hostname = parsedUrl.hostname.toLowerCase();\n\n    // YouTube domains\n    if (\n      hostname === 'www.youtube.com' ||\n      hostname === 'youtube.com' ||\n      hostname === 'youtu.be'\n    ) {\n      return {\n        isValid: true,\n        platform: 'youtube',\n        origin: 'https://www.youtube.com',\n      };\n    }\n\n    // Vimeo domains\n    if (hostname === 'vimeo.com' || hostname === 'player.vimeo.com') {\n      return { isValid: true, platform: 'vimeo', origin: 'https://vimeo.com' };\n    }\n\n    // For other HTTPS origins, return the actual origin\n    if (parsedUrl.protocol === 'https:') {\n      return { isValid: true, platform: 'other', origin: parsedUrl.origin };\n    }\n\n    return { isValid: false };\n  } catch {\n    return { isValid: false };\n  }\n};\n\n/**\n * Pauses video embeds (primarily YouTube) within an element\n * @param element - HTML element containing video iframes to pause\n */\nexport const pauseVideoEmbeds = (element: HTMLElement | null): void => {\n  if (!element) return;\n\n  try {\n    const iframes = element.querySelectorAll('iframe');\n    iframes.forEach((iframe) => {\n      const src = iframe.getAttribute('src') || '';\n      if (!src || !iframe.contentWindow) return;\n\n      const validation = validateVideoUrl(src);\n      if (!validation.isValid) return;\n\n      const targetOrigin = validation.origin || '*';\n\n      try {\n        // Send appropriate pause command based on platform\n        let message = '';\n        if (validation.platform === 'youtube') {\n          message = '{\"event\":\"command\",\"func\":\"stopVideo\",\"args\":\"\"}';\n        } else if (validation.platform === 'vimeo') {\n          message = '{\"method\":\"pause\"}';\n        } else {\n          // Generic pause attempt for other platforms\n          message = '{\"event\":\"command\",\"func\":\"pause\",\"args\":\"\"}';\n        }\n\n        iframe.contentWindow.postMessage(message, targetOrigin);\n      } catch (error) {\n        console.error('Error sending message to iframe:', error);\n      }\n    });\n  } catch (error) {\n    console.error('Error pausing video embeds:', error);\n  }\n};\n\n/**\n * Toggles visibility of media elements (images and videos) within an element\n * @param element - HTML element containing media elements\n * @param isVisible - Whether media elements should be visible\n */\nexport const toggleMediaVisibility = (\n  element: HTMLElement | null,\n  isVisible: boolean,\n): void => {\n  if (!element) return;\n\n  try {\n    const mediaElements = element.querySelectorAll('img,video');\n    mediaElements.forEach((ele) => {\n      if (ele instanceof HTMLElement) {\n        ele.style.visibility = isVisible ? 'visible' : 'hidden';\n      }\n    });\n  } catch (error) {\n    console.error('Error toggling media visibility:', error);\n  }\n};\n\n/**\n * Finds a timeline item element by its ID in either the main timeline or portal\n * @param itemId - ID of the timeline item to find\n * @param timelineMode - Current timeline mode (HORIZONTAL, VERTICAL, etc.)\n * @param portalId - ID of the portal container for horizontal timeline modes\n * @returns HTML element of the timeline item or null if not found\n */\nexport const findTimelineElement = (\n  itemId: string,\n  timelineMode: string,\n  portalId: string,\n): HTMLElement | null => {\n  if (!itemId || !timelineMode) return null;\n\n  try {\n    const elementId = `timeline-${timelineMode.toLowerCase()}-item-${itemId}`;\n    let targetElement = document.getElementById(elementId);\n\n    // Check in portal for horizontal modes\n    if (\n      !targetElement &&\n      portalId &&\n      (timelineMode === 'HORIZONTAL' || timelineMode === 'HORIZONTAL_ALL')\n    ) {\n      const portalContainer = document.getElementById(portalId);\n      if (portalContainer) {\n        targetElement = portalContainer.querySelector(\n          `#timeline-card-${itemId}`,\n        );\n      }\n    }\n\n    return targetElement;\n  } catch (error) {\n    console.error('Error finding timeline element:', error);\n    return null;\n  }\n};\n","import { useCallback, useState, useRef, useMemo, useEffect } from 'react';\nimport { TimelineCardModel } from '@models/TimelineItemModel';\nimport { getSearchableText } from '../utils/timelineUtils';\nimport { useDebouncedCallback } from 'use-debounce';\n\ninterface UseTimelineSearchProps {\n  items: TimelineCardModel[];\n  onTimelineUpdated?: (index: number) => void;\n  handleTimelineItemClick: (itemId?: string) => void;\n}\n\nexport const useTimelineSearch = ({\n  items,\n  onTimelineUpdated,\n  handleTimelineItemClick,\n}: UseTimelineSearchProps) => {\n  const [searchQuery, setSearchQuery] = useState('');\n  const [searchResults, setSearchResults] = useState<number[]>([]);\n  const [currentMatchIndex, setCurrentMatchIndex] = useState(-1);\n  const searchInputRef = useRef<HTMLInputElement>(null);\n  const activeItemIndex = useRef<number>(0);\n  const searchTimeoutRef = useRef<ReturnType<typeof setTimeout> | undefined>(\n    undefined,\n  );\n  const isFirstSearchRef = useRef<boolean>(true);\n\n  // Cache callback refs to prevent unnecessary re-renders\n  const onTimelineUpdatedRef = useRef(onTimelineUpdated);\n  const handleTimelineItemClickRef = useRef(handleTimelineItemClick);\n\n  onTimelineUpdatedRef.current = onTimelineUpdated;\n  handleTimelineItemClickRef.current = handleTimelineItemClick;\n\n  // Memoize searchable content with better caching strategy\n  const searchableContent = useMemo(() => {\n    return items.map((item, index) => {\n      const textParts = [\n        getSearchableText(item.title),\n        getSearchableText(item.cardTitle),\n        getSearchableText(item.cardSubtitle),\n        Array.isArray(item.cardDetailedText)\n          ? item.cardDetailedText.map(getSearchableText).join(' ')\n          : getSearchableText(item.cardDetailedText),\n      ];\n\n      return {\n        index,\n        content: textParts.filter(Boolean).join(' ').toLowerCase(),\n        id: item.id,\n      };\n    });\n  }, [items]);\n\n  // Optimized focus helper - only focus when needed, not during typing\n  const focusSearchInput = useCallback((forceRefocus = false) => {\n    // Only refocus if the search input is not currently focused or if forced\n    if (!forceRefocus && document.activeElement === searchInputRef.current) {\n      return;\n    }\n\n    // Use requestAnimationFrame for better performance\n    requestAnimationFrame(() => {\n      if (\n        searchInputRef.current &&\n        (forceRefocus || document.activeElement !== searchInputRef.current)\n      ) {\n        searchInputRef.current.focus();\n        const length = searchInputRef.current.value.length;\n        searchInputRef.current.setSelectionRange(length, length);\n      }\n    });\n  }, []);\n\n  // Enhanced search with better performance\n  const findMatches = useCallback(\n    (query: string) => {\n      const trimmedQuery = query.trim();\n      if (!trimmedQuery) {\n        setSearchResults([]);\n        setCurrentMatchIndex(-1);\n        return;\n      }\n\n      const queryLower = trimmedQuery.toLowerCase();\n      const results: number[] = [];\n      const maxResults = 100; // Limit results for performance\n\n      // Use for-loop with early break for better performance\n      for (let i = 0; i < searchableContent.length; i++) {\n        if (searchableContent[i]?.content?.includes(queryLower)) {\n          results.push(i);\n\n          // Early break if we have enough results\n          if (results.length >= maxResults) {\n            break;\n          }\n        }\n      }\n\n      setSearchResults(results);\n\n      if (results.length > 0) {\n        setCurrentMatchIndex(0);\n        const firstResult = results[0];\n        const firstMatchData =\n          firstResult !== undefined\n            ? searchableContent[firstResult]\n            : undefined;\n        if (firstMatchData?.id && firstResult !== undefined) {\n          activeItemIndex.current = firstResult;\n\n          // Clear any existing timeout\n          if (searchTimeoutRef.current) {\n            clearTimeout(searchTimeoutRef.current);\n          }\n\n          // On first search, focus immediately. On subsequent searches, use delay\n          const delay = isFirstSearchRef.current ? 100 : 400;\n          isFirstSearchRef.current = false;\n\n          searchTimeoutRef.current = setTimeout(() => {\n            onTimelineUpdatedRef.current?.(firstResult);\n            handleTimelineItemClickRef.current(firstMatchData.id);\n            // After navigating to first match, focus the item row/card\n            requestAnimationFrame(() => {\n              const itemId = firstMatchData.id;\n              // Try vertical first\n              const verticalRow = document.querySelector(\n                `[data-testid=\"vertical-item-row\"][data-item-id=\"${itemId}\"]`,\n              ) as HTMLElement | null;\n              const target =\n                verticalRow ||\n                (document.getElementById(\n                  `timeline-card-${itemId}`,\n                ) as HTMLElement | null);\n              try {\n                target?.focus?.({ preventScroll: true });\n              } catch {}\n            });\n          }, delay);\n        }\n      } else {\n        setCurrentMatchIndex(-1);\n      }\n    },\n    [searchableContent],\n  );\n\n  // Optimized debounced search with better performance\n  const debouncedSearch = useDebouncedCallback(findMatches, 200, {\n    maxWait: 600,\n    leading: false,\n    trailing: true,\n  });\n\n  const handleSearchChange = useCallback(\n    (query: string) => {\n      setSearchQuery(query);\n      debouncedSearch(query);\n    },\n    [debouncedSearch],\n  );\n\n  const clearSearch = useCallback(\n    (preservePosition = false) => {\n      setSearchQuery('');\n      setSearchResults([]);\n      setCurrentMatchIndex(-1);\n      debouncedSearch.cancel();\n\n      // Clear any pending auto-focus timeout\n      if (searchTimeoutRef.current) {\n        clearTimeout(searchTimeoutRef.current);\n      }\n\n      // Reset first search flag when clearing\n      isFirstSearchRef.current = true;\n\n      if (items.length > 0 && !preservePosition) {\n        activeItemIndex.current = 0;\n        onTimelineUpdatedRef.current?.(0);\n\n        const firstItem = items[0];\n        if (firstItem?.id) {\n          handleTimelineItemClickRef.current(firstItem.id);\n        }\n      }\n\n      // Force refocus after clearing (only when user explicitly clears)\n      if (!preservePosition) {\n        focusSearchInput(true);\n      }\n    },\n    [items, debouncedSearch, focusSearchInput],\n  );\n\n  // Optimized navigation with bounds checking\n  const navigateMatches = useCallback(\n    (direction: 'next' | 'prev') => {\n      if (searchResults.length === 0) return;\n\n      const nextIndex =\n        direction === 'next'\n          ? (currentMatchIndex + 1) % searchResults.length\n          : (currentMatchIndex - 1 + searchResults.length) %\n            searchResults.length;\n\n      if (nextIndex === currentMatchIndex) return;\n\n      const newTimelineIndex = searchResults[nextIndex];\n      const matchData =\n        newTimelineIndex !== undefined\n          ? searchableContent[newTimelineIndex]\n          : undefined;\n\n      setCurrentMatchIndex(nextIndex);\n      if (newTimelineIndex !== undefined) {\n        activeItemIndex.current = newTimelineIndex;\n        onTimelineUpdatedRef.current?.(newTimelineIndex);\n      }\n\n      if (matchData?.id) {\n        handleTimelineItemClickRef.current(matchData.id);\n        // Focus the matched item to make it visible to screen readers\n        requestAnimationFrame(() => {\n          const itemId = matchData.id;\n          const verticalRow = document.querySelector(\n            `[data-testid=\"vertical-item-row\"][data-item-id=\"${itemId}\"]`,\n          ) as HTMLElement | null;\n          const target =\n            verticalRow ||\n            (document.getElementById(\n              `timeline-card-${itemId}`,\n            ) as HTMLElement | null);\n          try {\n            target?.focus?.({ preventScroll: true });\n          } catch {}\n        });\n        // Then return focus to search for continued navigation\n        focusSearchInput(true);\n      }\n    },\n    [searchResults, currentMatchIndex, searchableContent, focusSearchInput],\n  );\n\n  const handleNextMatch = useCallback(\n    () => navigateMatches('next'),\n    [navigateMatches],\n  );\n\n  const handlePreviousMatch = useCallback(\n    () => navigateMatches('prev'),\n    [navigateMatches],\n  );\n\n  const handleSearchKeyDown = useCallback(\n    (e: React.KeyboardEvent) => {\n      switch (e.key) {\n        case 'Enter':\n          if (searchResults.length > 0) {\n            e.preventDefault();\n            handleNextMatch();\n          }\n          break;\n        case 'Escape':\n          e.preventDefault();\n          clearSearch();\n          break;\n      }\n    },\n    [searchResults.length, handleNextMatch, clearSearch],\n  );\n\n  // Cleanup on unmount\n  useEffect(() => {\n    return () => {\n      if (searchTimeoutRef.current) {\n        clearTimeout(searchTimeoutRef.current);\n      }\n    };\n  }, []);\n\n  return {\n    searchQuery,\n    searchResults,\n    currentMatchIndex,\n    searchInputRef,\n    activeItemIndex,\n    handleSearchChange,\n    clearSearch,\n    handleNextMatch,\n    handlePreviousMatch,\n    handleSearchKeyDown,\n  };\n};\n","import { useCallback } from 'react';\n\ninterface UseTimelineKeyboardNavigationProps {\n  mode: string;\n  hasFocus: boolean;\n  flipLayout?: boolean;\n  onNext: () => void;\n  onPrevious: () => void;\n  onFirst: () => void;\n  onLast: () => void;\n}\n\n/**\n * Hook for handling timeline keyboard navigation\n */\nexport const useTimelineKeyboardNavigation = ({\n  mode,\n  hasFocus,\n  flipLayout = false,\n  onNext,\n  onPrevious,\n  onFirst,\n  onLast,\n}: UseTimelineKeyboardNavigationProps) => {\n  const handleKeySelection = useCallback(\n    (event: React.KeyboardEvent<HTMLDivElement>) => {\n      if (!hasFocus) return;\n\n      const { key } = event;\n\n      // Common handlers\n      switch (key) {\n        case 'Home':\n          event.preventDefault();\n          onFirst();\n          return;\n        case 'End':\n          event.preventDefault();\n          onLast();\n          return;\n      }\n\n      // Mode-specific handlers\n      if (mode === 'HORIZONTAL' || mode === 'HORIZONTAL_ALL') {\n        if (key === 'ArrowRight') {\n          event.preventDefault();\n          flipLayout ? onPrevious() : onNext();\n        } else if (key === 'ArrowLeft') {\n          event.preventDefault();\n          flipLayout ? onNext() : onPrevious();\n        }\n      } else if (mode === 'VERTICAL' || mode === 'VERTICAL_ALTERNATING') {\n        if (key === 'ArrowDown') {\n          event.preventDefault();\n          event.stopPropagation();\n          onNext();\n        } else if (key === 'ArrowUp') {\n          event.preventDefault();\n          event.stopPropagation();\n          onPrevious();\n        }\n      }\n    },\n    [mode, flipLayout, hasFocus, onNext, onPrevious, onFirst, onLast],\n  );\n\n  return { handleKeySelection };\n};\n","import { useCallback, useEffect, useRef } from 'react';\n\ntype ScrollOptions = {\n  behavior: ScrollBehavior;\n  block: ScrollLogicalPosition;\n  inline: ScrollLogicalPosition;\n};\n\nconst SCROLL_OPTIONS: Record<'HORIZONTAL' | 'VERTICAL', ScrollOptions> = {\n  HORIZONTAL: {\n    behavior: 'smooth',\n    block: 'nearest',\n    inline: 'center',\n  },\n  VERTICAL: {\n    behavior: 'smooth',\n    block: 'center',\n    inline: 'center',\n  },\n};\n\n// Default scroll duration that balances smoothness with responsiveness\nconst DEFAULT_SCROLL_DURATION = 300; // Further reduced for more responsive keyboard navigation\n\n/**\n * Smooth scroll with improved easing function for more fluid motion\n */\nconst easeInOutCubic = (t: number): number => {\n  return t < 0.5 ? 4 * t * t * t : 1 - Math.pow(-2 * t + 2, 3) / 2;\n};\n\n/**\n * Even smoother easing function for gradual movement\n */\nconst easeInOutQuart = (t: number): number => {\n  return t < 0.5 ? 8 * t * t * t * t : 1 - 8 * Math.pow(-t + 1, 4);\n};\n\n/**\n * Custom smooth scroll implementation for better control and smoother animation\n */\nconst smoothScrollTo = (\n  container: Element,\n  targetPosition: number,\n  duration: number = DEFAULT_SCROLL_DURATION,\n  isHorizontal: boolean = false,\n  onComplete?: () => void,\n) => {\n  const startPosition = isHorizontal\n    ? container.scrollLeft\n    : container.scrollTop;\n  const distance = targetPosition - startPosition;\n  const startTime = performance.now();\n\n  const animateScroll = (currentTime: number) => {\n    const elapsed = currentTime - startTime;\n    const progress = Math.min(elapsed / duration, 1);\n    const easedProgress = easeInOutQuart(progress);\n    const newPosition = startPosition + distance * easedProgress;\n\n    if (isHorizontal) {\n      container.scrollLeft = newPosition;\n    } else {\n      container.scrollTop = newPosition;\n    }\n\n    if (progress < 1) {\n      requestAnimationFrame(animateScroll);\n    } else if (onComplete) {\n      // Call completion callback when animation is done\n      onComplete();\n    }\n  };\n\n  requestAnimationFrame(animateScroll);\n};\n\n/**\n * Hook for handling timeline scrolling with smooth animation\n */\nexport const useTimelineScrolling = () => {\n  const scrollTimeoutRef = useRef<number | null>(null);\n  const lastScrollTarget = useRef<HTMLElement | null>(null);\n  // Timeout to clear last target after animation ends\n  const clearLastTargetTimeoutRef = useRef<ReturnType<\n    typeof setTimeout\n  > | null>(null);\n\n  // Cleanup any pending clear-timeout on unmount\n  useEffect(() => {\n    return () => {\n      if (clearLastTargetTimeoutRef.current) {\n        clearTimeout(clearLastTargetTimeoutRef.current);\n        clearLastTargetTimeoutRef.current = null;\n      }\n      if (scrollTimeoutRef.current) {\n        cancelAnimationFrame(scrollTimeoutRef.current);\n        scrollTimeoutRef.current = null;\n      }\n    };\n  }, []);\n\n  const scrollToElement = useCallback(\n    (element: HTMLElement, mode: string, forceScroll?: boolean) => {\n      if (!element) return;\n\n      // Prevent scrolling to the same element repeatedly (unless forced for keyboard navigation)\n      if (lastScrollTarget.current === element && !forceScroll) {\n        return;\n      }\n\n      // Clear any pending scroll or animation\n      if (scrollTimeoutRef.current) {\n        cancelAnimationFrame(scrollTimeoutRef.current);\n      }\n\n      // Schedule the scroll for the next animation frame\n      scrollTimeoutRef.current = requestAnimationFrame(() => {\n        // Start scrolling immediately since we're now doing predictive centering\n        const isVerticalMode =\n          mode === 'VERTICAL' || mode === 'VERTICAL_ALTERNATING';\n\n        // Find the scrollable container - handle test environment gracefully\n        let container: Element | null = null;\n\n        if (typeof element.closest === 'function') {\n          container = element.closest('[data-testid=\"timeline-main-wrapper\"]');\n        }\n\n        if (!container) {\n          container = element.parentElement?.parentElement || null;\n        }\n\n        if (!container) {\n          // Fallback to native scrollIntoView if available\n          if (typeof element.scrollIntoView === 'function') {\n            element.scrollIntoView({\n              behavior: 'smooth',\n              block: isVerticalMode ? 'center' : 'nearest',\n              inline: isVerticalMode ? 'center' : 'center',\n            });\n          }\n          return;\n        }\n\n        // Calculate target position to center the element\n        const containerRect = container.getBoundingClientRect();\n        const elementRect = element.getBoundingClientRect();\n\n        if (isVerticalMode) {\n          // Center vertically with improved positioning\n          const targetScrollTop =\n            container.scrollTop +\n            (elementRect.top - containerRect.top) -\n            containerRect.height / 2 +\n            elementRect.height / 2;\n\n          // Use appropriate duration for smooth but responsive scrolling\n          smoothScrollTo(\n            container,\n            targetScrollTop,\n            DEFAULT_SCROLL_DURATION,\n            false,\n          );\n        } else {\n          // Center horizontally with improved positioning\n          const targetScrollLeft =\n            container.scrollLeft +\n            (elementRect.left - containerRect.left) -\n            containerRect.width / 2 +\n            elementRect.width / 2;\n\n          // Use appropriate duration for smooth but responsive scrolling\n          smoothScrollTo(\n            container,\n            targetScrollLeft,\n            DEFAULT_SCROLL_DURATION,\n            true,\n          );\n        }\n\n        lastScrollTarget.current = element;\n\n        // Clear the target after scrolling completes\n        if (clearLastTargetTimeoutRef.current) {\n          clearTimeout(clearLastTargetTimeoutRef.current);\n        }\n        clearLastTargetTimeoutRef.current = setTimeout(() => {\n          lastScrollTarget.current = null;\n          clearLastTargetTimeoutRef.current = null;\n        }, DEFAULT_SCROLL_DURATION + 100); // Add small buffer after scroll completes\n\n        scrollTimeoutRef.current = null;\n      });\n    },\n    [],\n  );\n\n  return { scrollToElement };\n};\n","import { useCallback, useRef, useMemo } from 'react';\nimport { findTimelineElement } from '../utils/timelineUtils';\nimport { useTimelineScrolling } from './useTimelineScrolling';\nimport { useStableCallback } from './utils';\n\ninterface UseTimelineItemNavigationProps {\n  items: any[];\n  mode: string;\n  timelineId: string;\n  slideShowRunning?: boolean;\n  onTimelineUpdated?: (index: number) => void;\n}\n\n/**\n * Hook for handling timeline item navigation\n */\nexport const useTimelineItemNavigation = ({\n  items,\n  mode,\n  timelineId,\n  slideShowRunning = false,\n  onTimelineUpdated,\n}: UseTimelineItemNavigationProps) => {\n  const activeItemIndex = useRef<number>(-1); // -1 indicates no selection initially\n  const { scrollToElement } = useTimelineScrolling();\n  const stableOnTimelineUpdated = useStableCallback(\n    onTimelineUpdated || (() => {}),\n  );\n\n  // Memoize items lookup map for O(1) access\n  const itemsMap = useMemo(() => {\n    const map = new Map<string, number>();\n    items.forEach((item, index) => {\n      if (item?.id) {\n        map.set(item.id, index);\n      }\n    });\n    return map;\n  }, [items]);\n\n  // Find target element in the DOM with focus capability\n  const findTargetElement = useCallback(\n    (itemId: string) => {\n      if (mode === 'VERTICAL' || mode === 'VERTICAL_ALTERNATING') {\n        // For vertical modes, directly search for the vertical-item-row\n        const verticalItemRow = document.querySelector(\n          `[data-testid=\"vertical-item-row\"][data-item-id=\"${itemId}\"]`,\n        ) as HTMLElement;\n        if (verticalItemRow) {\n          // Ensure the element can receive focus\n          if (!verticalItemRow.hasAttribute('tabindex')) {\n            verticalItemRow.setAttribute('tabindex', '-1');\n          }\n          return verticalItemRow;\n        }\n\n        // Fallback: try to find the card content element and then get its parent row\n        const cardContent = document.querySelector(\n          `.timeline-card-content[data-item-id=\"${itemId}\"]`,\n        );\n        if (cardContent) {\n          const row = cardContent.closest(\n            '[data-testid=\"vertical-item-row\"]',\n          ) as HTMLElement;\n          if (row) {\n            if (!row.hasAttribute('tabindex')) {\n              row.setAttribute('tabindex', '-1');\n            }\n            return row;\n          }\n        }\n\n        // Additional fallback: try to find any element with the item ID\n        const anyElement = document.querySelector(`[data-item-id=\"${itemId}\"]`);\n        if (anyElement) {\n          const row = anyElement.closest(\n            '[data-testid=\"vertical-item-row\"]',\n          ) as HTMLElement;\n          if (row) {\n            if (!row.hasAttribute('tabindex')) {\n              row.setAttribute('tabindex', '-1');\n            }\n            return row;\n          }\n        }\n      } else {\n        // For horizontal modes, prefer focusing the card container first\n        const cardElement = document.getElementById(\n          `timeline-card-${itemId}`,\n        ) as any;\n        if (cardElement) {\n          try {\n            if (cardElement.hasAttribute && cardElement.setAttribute) {\n              if (!cardElement.hasAttribute('tabindex')) {\n                cardElement.setAttribute('tabindex', '-1');\n              }\n            }\n          } catch {}\n          return cardElement as unknown as HTMLElement;\n        }\n\n        // Fallback to the timeline point wrapper element\n        const timelinePointElement = document.getElementById(\n          `timeline-${mode.toLowerCase()}-item-${itemId}`,\n        ) as any;\n        if (timelinePointElement) {\n          try {\n            if (\n              !timelinePointElement.hasAttribute ||\n              !timelinePointElement.setAttribute\n            ) {\n              // Not a full HTMLElement (test mock). Return as-is.\n              return timelinePointElement as unknown as HTMLElement;\n            }\n            if (!timelinePointElement.hasAttribute('tabindex')) {\n              timelinePointElement.setAttribute('tabindex', '-1');\n            }\n          } catch {\n            // Ignore attribute errors in test environment\n          }\n          return timelinePointElement as unknown as HTMLElement;\n        }\n\n        // Try to find any element with the item ID\n        const anyElement = document.querySelector(\n          `[data-item-id=\"${itemId}\"]`,\n        ) as any;\n        if (anyElement) {\n          try {\n            if (anyElement.hasAttribute && anyElement.setAttribute) {\n              if (!anyElement.hasAttribute('tabindex')) {\n                anyElement.setAttribute('tabindex', '-1');\n              }\n            }\n          } catch {}\n          return anyElement as unknown as HTMLElement;\n        }\n      }\n\n      // Default behavior: use the utility function\n      const element = findTimelineElement(itemId, mode, timelineId) as any;\n      if (element) {\n        try {\n          if (element.hasAttribute && element.setAttribute) {\n            if (!element.hasAttribute('tabindex')) {\n              element.setAttribute('tabindex', '-1');\n            }\n          }\n        } catch {}\n      }\n      return element as unknown as HTMLElement;\n    },\n    [mode, timelineId],\n  );\n\n  // Update timeline position\n  const updateTimelinePosition = useCallback(\n    (targetIndex: number, isSlideShow?: boolean) => {\n      activeItemIndex.current = targetIndex;\n\n      // Fixed: Don't add +1 here since handleTimelineItemElapsed already calculated the correct next index\n      const updateIndex = targetIndex;\n\n      stableOnTimelineUpdated(updateIndex);\n    },\n    [items.length, stableOnTimelineUpdated],\n  );\n\n  // Sync activeItemIndex with external updates\n  const syncActiveItemIndex = useCallback((newIndex: number) => {\n    activeItemIndex.current = newIndex;\n  }, []);\n\n  // Handle timeline item click\n  const handleTimelineItemClick = useCallback(\n    (itemId?: string, isSlideShow?: boolean) => {\n      if (!itemId) return;\n\n      // Use memoized map for O(1) lookup\n      const targetIndex = itemsMap.get(itemId);\n      if (targetIndex === undefined) return;\n\n      // Update timeline position\n      updateTimelinePosition(targetIndex, isSlideShow);\n\n      // Skip scrolling when slideshow is running - let timeline.tsx handle slideshow scrolling\n      if (slideShowRunning) return;\n\n      // Find target element using improved element finding and start scrolling immediately\n      const targetElement = findTargetElement(itemId);\n      if (targetElement) {\n        // Start scrolling immediately for predictive centering\n        scrollToElement(targetElement, mode);\n\n        // After initiating scroll, move focus to the target element\n        // Use requestAnimationFrame to avoid fighting with scrollIntoView\n        requestAnimationFrame(() => {\n          try {\n            if (typeof (targetElement as HTMLElement).focus === 'function') {\n              (targetElement as HTMLElement).focus({ preventScroll: true });\n              // Ensure the wrapper maintains keyboard focus capability\n              const wrapper = targetElement.closest(\n                '.timeline-wrapper',\n              ) as HTMLElement;\n              if (wrapper && !wrapper.contains(document.activeElement)) {\n                wrapper.focus();\n              }\n            }\n          } catch {\n            /* no-op */\n          }\n        });\n      }\n    },\n    [\n      itemsMap,\n      updateTimelinePosition,\n      findTargetElement,\n      mode,\n      scrollToElement,\n      slideShowRunning,\n    ],\n  );\n\n  // Handler for item elapsed (used in slideshow) - advances to NEXT item\n  const handleTimelineItemElapsed = useCallback(\n    (itemId?: string) => {\n      if (!itemId) return;\n\n      const currentIndex = itemsMap.get(itemId);\n      if (currentIndex === undefined) return;\n\n      const nextIndex = currentIndex + 1;\n\n      // If there's a next item, advance to it\n      if (nextIndex < items.length) {\n        const nextItemId = Array.from(itemsMap.entries()).find(\n          ([_, index]) => index === nextIndex,\n        )?.[0];\n        if (nextItemId) {\n          handleTimelineItemClick(nextItemId, true);\n        }\n      } else {\n        // If we're at the last item, restart from beginning\n        const firstItemId = Array.from(itemsMap.entries()).find(\n          ([_, index]) => index === 0,\n        )?.[0];\n        if (firstItemId) {\n          handleTimelineItemClick(firstItemId, true);\n        }\n      }\n    },\n    [handleTimelineItemClick, itemsMap, items.length],\n  );\n\n  return {\n    activeItemIndex,\n    handleTimelineItemClick,\n    handleTimelineItemElapsed,\n    findTargetElement,\n    itemsMap,\n    syncActiveItemIndex,\n  };\n};\n","import { useCallback } from 'react';\nimport { useTimelineKeyboardNavigation } from './useTimelineKeyboardNavigation';\nimport { useTimelineItemNavigation } from './useTimelineItemNavigation';\nimport { useTimelineScrolling } from './useTimelineScrolling';\nimport { useStableCallback } from './utils';\nimport { pickDefined } from '../utils/propUtils';\n\ninterface UseTimelineNavigationProps {\n  items: any[]; // Use any to avoid type conflicts\n  mode: string;\n  timelineId: string;\n  hasFocus: boolean;\n  flipLayout?: boolean;\n  slideShowRunning?: boolean;\n  isKeyboardNavigation?: boolean;\n  onTimelineUpdated?: (index: number) => void;\n  onNext?: () => void;\n  onPrevious?: () => void;\n  onFirst?: () => void;\n  onLast?: () => void;\n}\n\nexport const useTimelineNavigation = ({\n  items,\n  mode,\n  timelineId,\n  hasFocus,\n  flipLayout = false,\n  slideShowRunning = false,\n  isKeyboardNavigation = false,\n  onTimelineUpdated,\n  onNext,\n  onPrevious,\n  onFirst,\n  onLast,\n}: UseTimelineNavigationProps) => {\n  // Stable callbacks\n  const stableOnNext = useStableCallback(onNext || (() => {}));\n  const stableOnPrevious = useStableCallback(onPrevious || (() => {}));\n  const stableOnFirst = useStableCallback(onFirst || (() => {}));\n  const stableOnLast = useStableCallback(onLast || (() => {}));\n\n  // Use smaller hooks\n  const {\n    activeItemIndex,\n    handleTimelineItemClick,\n    handleTimelineItemElapsed,\n    findTargetElement,\n    syncActiveItemIndex,\n  } = useTimelineItemNavigation({\n    items,\n    mode,\n    timelineId,\n    slideShowRunning,\n    ...pickDefined({ onTimelineUpdated }),\n  });\n\n  const { scrollToElement } = useTimelineScrolling();\n\n  // Navigation handlers with predictive centering to avoid jumps\n  const handleNext = useCallback(() => {\n    // Remove hasFocus check as it can block navigation\n    const currentIndex = activeItemIndex.current;\n\n    // Handle case where no item is currently selected (-1)\n    const nextIndex =\n      currentIndex === -1 ? 0 : Math.min(currentIndex + 1, items.length - 1);\n\n    // Always attempt navigation if there are items\n    if (items.length > 0) {\n      // If no selection (-1), start from first item (0)\n      // If at last item, stay there (no navigation)\n      if (currentIndex === -1 || currentIndex < items.length - 1) {\n        const targetItem = items[nextIndex];\n\n        if (targetItem?.id) {\n          // Use the same pathway as slideshow: call handleTimelineItemClick\n          // This ensures consistent state updates through the main component\n          handleTimelineItemClick(targetItem.id, false);\n        }\n\n        // Also call the toolbar callback for any additional toolbar-specific logic\n        stableOnNext();\n      }\n    }\n  }, [items, handleTimelineItemClick, stableOnNext]);\n\n  const handlePrevious = useCallback(() => {\n    // Remove hasFocus check as it can block navigation\n    const currentIndex = activeItemIndex.current;\n\n    // Handle case where no item is currently selected (-1)\n    const prevIndex =\n      currentIndex === -1 ? items.length - 1 : Math.max(currentIndex - 1, 0);\n\n    // Always attempt navigation if there are items\n    if (items.length > 0) {\n      // If no selection (-1), start from last item\n      // If at first item, stay there (no navigation)\n      if (currentIndex === -1 || currentIndex > 0) {\n        const targetItem = items[prevIndex];\n\n        if (targetItem?.id) {\n          // Use the same pathway as slideshow: call handleTimelineItemClick\n          // This ensures consistent state updates through the main component\n          handleTimelineItemClick(targetItem.id, false);\n        }\n\n        // Also call the toolbar callback for any additional toolbar-specific logic\n        stableOnPrevious();\n      }\n    }\n  }, [items, handleTimelineItemClick, stableOnPrevious]);\n\n  const handleFirst = useCallback(() => {\n    // Always allow navigation to first item if we're not already there (including -1 no selection)\n    if (items.length > 0 && activeItemIndex.current !== 0) {\n      const targetItem = items[0];\n\n      if (targetItem?.id) {\n        // Use the same pathway as slideshow: call handleTimelineItemClick\n        // This ensures consistent state updates through the main component\n        handleTimelineItemClick(targetItem.id, false);\n      }\n\n      // Also call the toolbar callback for any additional toolbar-specific logic\n      stableOnFirst();\n    }\n  }, [items, handleTimelineItemClick, stableOnFirst]);\n\n  const handleLast = useCallback(() => {\n    // Always allow navigation to last item if we're not already there (including -1 no selection)\n    const lastIndex = items.length - 1;\n    if (items.length > 0 && activeItemIndex.current !== lastIndex) {\n      const targetItem = items[lastIndex];\n\n      if (targetItem?.id) {\n        // Use the same pathway as slideshow: call handleTimelineItemClick\n        // This ensures consistent state updates through the main component\n        handleTimelineItemClick(targetItem.id, false);\n      }\n\n      // Also call the toolbar callback for any additional toolbar-specific logic\n      stableOnLast();\n    }\n  }, [items, handleTimelineItemClick, stableOnLast]);\n\n  // Use keyboard navigation hook\n  const { handleKeySelection } = useTimelineKeyboardNavigation({\n    mode,\n    hasFocus,\n    flipLayout,\n    onNext: handleNext,\n    onPrevious: handlePrevious,\n    onFirst: handleFirst,\n    onLast: handleLast,\n  });\n\n  return {\n    activeItemIndex,\n    handleTimelineItemClick,\n    handleTimelineItemElapsed,\n    handleNext,\n    handlePrevious,\n    handleFirst,\n    handleLast,\n    handleKeySelection,\n    syncActiveItemIndex,\n  };\n};\n","import { useState, useCallback } from 'react';\nimport { TimelineMode } from '@models/TimelineModel';\nimport { useStableCallback } from './utils';\n\nenum ExtendedTimelineModeEnum {\n  VERTICAL = 'VERTICAL',\n  HORIZONTAL = 'HORIZONTAL',\n  VERTICAL_ALTERNATING = 'VERTICAL_ALTERNATING',\n  HORIZONTAL_ALL = 'HORIZONTAL_ALL',\n}\n\ntype ExtendedTimelineMode = keyof typeof ExtendedTimelineModeEnum;\n\ninterface UseTimelineModeProps {\n  initialMode: TimelineMode;\n  showAllCardsHorizontal?: boolean;\n  updateHorizontalAllCards?: (showAll: boolean) => void;\n}\n\ninterface UseTimelineModeReturn {\n  timelineMode: ExtendedTimelineMode;\n  handleTimelineUpdate: (newMode: string) => void;\n}\n\n// Optimized mode mapping with type safety\nconst MODE_MAPPINGS = new Map<string, ExtendedTimelineMode>([\n  ['VERTICAL', ExtendedTimelineModeEnum.VERTICAL],\n  ['HORIZONTAL', ExtendedTimelineModeEnum.HORIZONTAL],\n  ['VERTICAL_ALTERNATING', ExtendedTimelineModeEnum.VERTICAL_ALTERNATING],\n  ['HORIZONTAL_ALL', ExtendedTimelineModeEnum.HORIZONTAL_ALL],\n]);\n\nexport const useTimelineMode = ({\n  initialMode,\n  showAllCardsHorizontal = false,\n  updateHorizontalAllCards,\n}: UseTimelineModeProps): UseTimelineModeReturn => {\n  const [timelineMode, setTimelineMode] = useState<ExtendedTimelineMode>(\n    initialMode === 'HORIZONTAL' && showAllCardsHorizontal\n      ? 'HORIZONTAL_ALL'\n      : (initialMode as ExtendedTimelineMode),\n  );\n\n  const stableUpdateHorizontalAllCards = useStableCallback(\n    updateHorizontalAllCards || (() => {}),\n  );\n\n  const handleTimelineUpdate = useCallback(\n    (newMode: string) => {\n      const mappedMode = MODE_MAPPINGS.get(newMode);\n      if (!mappedMode || mappedMode === timelineMode) return;\n\n      setTimelineMode(mappedMode);\n\n      // Handle horizontal cards update with stable reference\n      const shouldShowAll =\n        mappedMode === ExtendedTimelineModeEnum.HORIZONTAL_ALL;\n      stableUpdateHorizontalAllCards(shouldShowAll);\n    },\n    [timelineMode, stableUpdateHorizontalAllCards],\n  );\n\n  return {\n    timelineMode,\n    handleTimelineUpdate,\n  };\n};\n","/**\n * Creates a throttled version of a function that limits invocations\n * @param fn - The function to throttle\n * @param limit - The time limit in milliseconds\n * @returns Throttled version of the function\n */\nexport function throttle<T extends (...args: any[]) => any>(\n  fn: T,\n  limit: number,\n): (...args: Parameters<T>) => void {\n  let inThrottle = false;\n  let lastArgs: Parameters<T> | null = null;\n\n  return function (this: unknown, ...args: Parameters<T>) {\n    if (!inThrottle) {\n      fn.apply(this, args);\n      inThrottle = true;\n\n      setTimeout(() => {\n        inThrottle = false;\n        if (lastArgs) {\n          fn.apply(this, lastArgs);\n          lastArgs = null;\n          inThrottle = true;\n          setTimeout(() => {\n            inThrottle = false;\n          }, limit);\n        }\n      }, limit);\n    } else {\n      lastArgs = args;\n    }\n  };\n}\n\n/**\n * Creates a debounced version of a function that delays invocation\n * @param fn - The function to debounce\n * @param delay - The delay in milliseconds\n * @returns Debounced version of the function\n */\nexport function debounce<T extends (...args: unknown[]) => unknown>(\n  fn: T,\n  delay: number,\n): (...args: Parameters<T>) => void {\n  let timeoutId: ReturnType<typeof setTimeout> | null = null;\n\n  return function (this: unknown, ...args: Parameters<T>) {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n    }\n\n    timeoutId = setTimeout(() => {\n      fn.apply(this, args);\n      timeoutId = null;\n    }, delay);\n  };\n}\n\n/**\n * Creates an RAF-throttled version of a function for smooth animations\n * @param fn - The function to throttle\n * @returns RAF-throttled version of the function\n */\nexport function rafThrottle<T extends (...args: unknown[]) => unknown>(\n  fn: T,\n): (...args: Parameters<T>) => void {\n  let rafId: number | null = null;\n  let lastArgs: Parameters<T> | null = null;\n\n  return function (this: unknown, ...args: Parameters<T>) {\n    lastArgs = args;\n\n    if (rafId === null) {\n      rafId = requestAnimationFrame(() => {\n        if (lastArgs) {\n          fn.apply(this, lastArgs);\n        }\n        rafId = null;\n      });\n    }\n  };\n}\n","import { useCallback, useRef, useMemo } from 'react';\nimport { Scroll } from '@models/TimelineHorizontalModel';\nimport { throttle } from '@utils/throttle';\n\ninterface UseTimelineScrollProps {\n  mode: string;\n  onScrollEnd?: () => void;\n  setNewOffset: (element: HTMLDivElement, scroll: Partial<Scroll>) => void;\n  scrollEndThrottleMs?: number;\n  onNextItem?: () => void;\n  onPreviousItem?: () => void;\n  activeItemIndex?: React.MutableRefObject<number>;\n  totalItems?: number;\n  isKeyboardNavigation?: boolean;\n}\n\nexport const useTimelineScroll = ({\n  mode,\n  onScrollEnd,\n  setNewOffset,\n  scrollEndThrottleMs = 100,\n  onNextItem,\n  onPreviousItem,\n  activeItemIndex,\n  totalItems,\n  isKeyboardNavigation = false,\n}: UseTimelineScrollProps) => {\n  const timelineMainRef = useRef<HTMLDivElement>(null!);\n  const horizontalContentRef = useRef<HTMLDivElement | null>(null);\n  const scrollTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n  const setNewOffsetRef = useRef(setNewOffset);\n  const onScrollEndRef = useRef(onScrollEnd);\n\n  // Keep refs updated without triggering re-renders\n  setNewOffsetRef.current = setNewOffset;\n  onScrollEndRef.current = onScrollEnd;\n\n  const onNextItemRef = useRef(onNextItem);\n  const onPreviousItemRef = useRef(onPreviousItem);\n  onNextItemRef.current = onNextItem;\n  onPreviousItemRef.current = onPreviousItem;\n\n  // Handle scrolling (optimized with stable reference)\n  const handleScroll = useCallback((scroll: Partial<Scroll>) => {\n    const element = timelineMainRef.current;\n    if (element && setNewOffsetRef.current) {\n      setNewOffsetRef.current(element, scroll);\n    }\n  }, []);\n\n  // Create throttled scroll handler for better performance\n  const throttledScrollHandler = useMemo(\n    () =>\n      throttle((target: HTMLElement) => {\n        const isVertical =\n          mode === 'VERTICAL' || mode === 'VERTICAL_ALTERNATING';\n\n        if (isVertical) {\n          const scrolled = target.scrollTop + target.clientHeight;\n          const threshold = target.scrollHeight - 1;\n          const isAtBottom = scrolled >= threshold;\n          const isAtTop = target.scrollTop <= 1;\n\n          // Handle dynamic loading (existing functionality)\n          if (isAtBottom && onScrollEndRef.current) {\n            onScrollEndRef.current();\n          }\n\n          // Disabled auto-navigation feature to prevent unwanted timeline jumping\n          // Users should navigate explicitly via keyboard/buttons only\n          // Original auto-navigation caused issues with scrolling to bottom/top\n          /* \n          if (onNextItemRef.current && onPreviousItemRef.current && activeItemIndex && totalItems && !isKeyboardNavigation) {\n            // Auto-navigation logic removed to prevent unwanted jumps\n          }\n          */\n        } else {\n          // Horizontal mode - existing functionality\n          const scrolled = target.scrollLeft + target.offsetWidth;\n          if (target.scrollWidth <= scrolled && onScrollEndRef.current) {\n            onScrollEndRef.current();\n          }\n\n          // Disabled horizontal auto-navigation to prevent unwanted timeline jumping\n          // Users should navigate explicitly via keyboard/buttons only\n          /*\n          if (onNextItemRef.current && onPreviousItemRef.current && activeItemIndex && totalItems && !isKeyboardNavigation) {\n            // Horizontal auto-navigation logic removed to prevent unwanted jumps\n          }\n          */\n        }\n      }, 16), // Throttle to 60fps for smooth scrolling\n    [mode, totalItems, isKeyboardNavigation],\n  );\n\n  // Optimized scroll handler that uses throttling\n  const handleMainScroll = useCallback(\n    (ev: React.UIEvent<HTMLDivElement>) => {\n      const target = ev.target as HTMLElement;\n      throttledScrollHandler(target);\n    },\n    [throttledScrollHandler],\n  );\n\n  return {\n    timelineMainRef,\n    horizontalContentRef,\n    handleScroll,\n    handleMainScroll,\n  };\n};\n","import { useRef, useEffect, useCallback } from 'react';\nimport {\n  toggleMediaVisibility,\n  pauseVideoEmbeds,\n} from '../utils/timelineUtils';\n\ninterface UseTimelineMediaProps {\n  mode: string;\n  timelineMainRef: React.RefObject<HTMLDivElement>;\n  itemSelector?: string;\n  observerOptions?: IntersectionObserverInit;\n  onIntersect?: (element: HTMLElement, isIntersecting: boolean) => void;\n}\n\nexport const useTimelineMedia = ({\n  mode,\n  timelineMainRef,\n  itemSelector = '.vertical-item-row',\n  observerOptions,\n  onIntersect,\n}: UseTimelineMediaProps) => {\n  const observer = useRef<IntersectionObserver | null>(null);\n  const observedElements = useRef<Set<Element>>(new Set());\n\n  // Optimized intersection callback with batched operations\n  const handleIntersection = useCallback(\n    (entries: IntersectionObserverEntry[]) => {\n      // Use requestAnimationFrame to batch DOM operations\n      requestAnimationFrame(() => {\n        entries.forEach((entry) => {\n          const element = entry.target as HTMLDivElement;\n\n          if (onIntersect) {\n            // Custom intersection handler\n            onIntersect(element, entry.isIntersecting);\n          } else {\n            // Default behavior\n            if (entry.isIntersecting) {\n              toggleMediaVisibility(element, true);\n            } else {\n              toggleMediaVisibility(element, false);\n              pauseVideoEmbeds(element);\n            }\n          }\n        });\n      });\n    },\n    [onIntersect],\n  );\n\n  // Memoized observer creation\n  const createObserver = useCallback(() => {\n    if (observer.current) {\n      observer.current.disconnect();\n      observedElements.current.clear();\n    }\n\n    const defaultOptions: IntersectionObserverInit = {\n      root: timelineMainRef.current,\n      threshold: 0.1, // Slightly higher threshold for better performance\n      rootMargin: '50px', // Preload content slightly before it becomes visible\n    };\n\n    observer.current = new IntersectionObserver(\n      handleIntersection,\n      observerOptions || defaultOptions,\n    );\n\n    return observer.current;\n  }, [handleIntersection, timelineMainRef]);\n\n  // Setup IntersectionObserver for efficient media handling\n  useEffect(() => {\n    // Skip horizontal mode as before\n    if (mode === 'HORIZONTAL') return;\n\n    const observerInstance = createObserver();\n\n    // Use requestIdleCallback for better performance if available\n    const scheduleObservation = (callback: () => void) => {\n      if ('requestIdleCallback' in window) {\n        (window as any).requestIdleCallback(callback, { timeout: 100 });\n      } else {\n        requestAnimationFrame(callback);\n      }\n    };\n\n    scheduleObservation(() => {\n      const element = timelineMainRef.current;\n      if (!element || !observerInstance) return;\n\n      const childElements = element.querySelectorAll(itemSelector);\n      childElements.forEach((elem) => {\n        if (!observedElements.current.has(elem)) {\n          observerInstance.observe(elem);\n          observedElements.current.add(elem);\n        }\n      });\n    });\n\n    return () => {\n      observerInstance?.disconnect();\n      observedElements.current.clear();\n    };\n  }, [mode, createObserver, timelineMainRef]);\n\n  // Cleanup function for external use\n  const cleanup = useCallback(() => {\n    observer.current?.disconnect();\n    observedElements.current.clear();\n  }, []);\n\n  return {\n    observer,\n    cleanup,\n  };\n};\n","/**\n * Google Fonts integration utilities for React Chrono Timeline\n *\n * Provides a robust, modular system for loading and applying Google Fonts\n * with support for individual font styles (bold, italic) per text element\n */\n\nexport interface FontWeight {\n  100: 'thin';\n  200: 'extra-light';\n  300: 'light';\n  400: 'regular';\n  500: 'medium';\n  600: 'semi-bold';\n  700: 'bold';\n  800: 'extra-bold';\n  900: 'black';\n}\n\nexport interface FontStyle {\n  normal: 'normal';\n  italic: 'italic';\n}\n\nexport type FontWeightValue =\n  | keyof FontWeight\n  | 'thin'\n  | 'extra-light'\n  | 'light'\n  | 'regular'\n  | 'medium'\n  | 'semi-bold'\n  | 'bold'\n  | 'extra-bold'\n  | 'black';\nexport type FontStyleValue = keyof FontStyle | 'normal' | 'italic';\n\n/**\n * Configuration for individual text elements\n */\nexport interface TextElementFont {\n  /** Font weight (100-900 or named weights) */\n  weight?: FontWeightValue;\n  /** Font style (normal or italic) */\n  style?: FontStyleValue;\n  /** Custom font size override */\n  size?: string;\n}\n\n/**\n * Complete Google Fonts configuration for all timeline text elements\n */\nexport interface GoogleFontsConfig {\n  /** Primary font family name from Google Fonts */\n  fontFamily: string;\n\n  /** Font configurations for different text elements */\n  elements?: {\n    /** Timeline item titles */\n    title?: TextElementFont;\n    /** Timeline card titles */\n    cardTitle?: TextElementFont;\n    /** Timeline card subtitles */\n    cardSubtitle?: TextElementFont;\n    /** Timeline card main text content */\n    cardText?: TextElementFont;\n    /** Timeline controls and UI text */\n    controls?: TextElementFont;\n  };\n\n  /** Additional font weights to load (e.g., [400, 700, 'italic']) */\n  weights?: Array<FontWeightValue | FontStyleValue | string>;\n\n  /** Font display strategy for loading */\n  display?: 'auto' | 'block' | 'swap' | 'fallback' | 'optional';\n\n  /** Preconnect to Google Fonts for faster loading */\n  preconnect?: boolean;\n}\n\n/**\n * Internal font weight mapping for URL generation\n */\nconst FONT_WEIGHT_MAP: Record<string, number> = {\n  thin: 100,\n  'extra-light': 200,\n  light: 300,\n  regular: 400,\n  medium: 500,\n  'semi-bold': 600,\n  bold: 700,\n  'extra-bold': 800,\n  black: 900,\n};\n\n/**\n * Normalize font weight to numeric value\n */\nfunction normalizeFontWeight(weight: FontWeightValue): number {\n  if (typeof weight === 'number') {\n    // Ensure weight is within valid range (100-900)\n    return Math.min(900, Math.max(100, Math.round(weight / 100) * 100));\n  }\n  return FONT_WEIGHT_MAP[weight] || 400;\n}\n\n/**\n * Generate Google Fonts URL with specified weights and styles\n */\nfunction generateGoogleFontsUrl(config: GoogleFontsConfig): string {\n  const { fontFamily, weights = [], display = 'swap' } = config;\n\n  // Validate font family\n  if (!fontFamily || fontFamily.trim().length === 0) {\n    throw new Error('Font family name is required');\n  }\n\n  // Collect all required weights and styles\n  const weightSet = new Set<string>();\n\n  // Add base weights\n  weights.forEach((weight) => {\n    if (weight === 'italic') {\n      weightSet.add('400italic');\n    } else if (typeof weight === 'string' && weight.includes('italic')) {\n      weightSet.add(weight);\n    } else {\n      try {\n        const numericWeight = normalizeFontWeight(weight as FontWeightValue);\n        weightSet.add(numericWeight.toString());\n      } catch {\n        // Invalid weight, skip it\n        console.warn(`Invalid font weight: ${weight}`);\n      }\n    }\n  });\n\n  // Add weights from element configurations\n  if (config.elements) {\n    Object.values(config.elements).forEach((element) => {\n      if (element?.weight) {\n        try {\n          const numericWeight = normalizeFontWeight(element.weight);\n          const suffix = element.style === 'italic' ? 'italic' : '';\n          weightSet.add(`${numericWeight}${suffix}`);\n        } catch {\n          console.warn(`Invalid element font weight: ${element.weight}`);\n        }\n      }\n      if (element?.style === 'italic' && !element?.weight) {\n        weightSet.add('400italic');\n      }\n    });\n  }\n\n  // Default weights if none specified\n  if (weightSet.size === 0) {\n    weightSet.add('400');\n    weightSet.add('700');\n  }\n\n  const weightsParam = Array.from(weightSet).sort().join(';');\n  const familyParam = encodeURIComponent(fontFamily.replace(/\\s+/g, '+'));\n\n  return `https://fonts.googleapis.com/css2?family=${familyParam}:wght@${weightsParam}&display=${display}`;\n}\n\n/**\n * Load Google Fonts by injecting link tag into document head\n */\nexport function loadGoogleFonts(config: GoogleFontsConfig): Promise<void> {\n  return new Promise((resolve, reject) => {\n    // Check if font is already loaded\n    const fontUrl = generateGoogleFontsUrl(config);\n    const existingLink = Array.from(\n      document.querySelectorAll('link[rel=\"stylesheet\"]'),\n    ).find((link) => (link as HTMLLinkElement).href === fontUrl);\n\n    if (existingLink) {\n      resolve();\n      return;\n    }\n\n    // Add preconnect for faster loading\n    if (config.preconnect !== false) {\n      const preconnect = document.createElement('link');\n      preconnect.rel = 'preconnect';\n      preconnect.href = 'https://fonts.googleapis.com';\n      if (\n        !document.querySelector('link[href=\"https://fonts.googleapis.com\"]')\n      ) {\n        document.head.appendChild(preconnect);\n      }\n\n      const preconnectStatic = document.createElement('link');\n      preconnectStatic.rel = 'preconnect';\n      preconnectStatic.href = 'https://fonts.gstatic.com';\n      preconnectStatic.crossOrigin = 'anonymous';\n      if (!document.querySelector('link[href=\"https://fonts.gstatic.com\"]')) {\n        document.head.appendChild(preconnectStatic);\n      }\n    }\n\n    // Create and load font link\n    const link = document.createElement('link');\n    link.rel = 'stylesheet';\n    link.href = fontUrl;\n\n    link.onload = () => resolve();\n    link.onerror = () =>\n      reject(new Error(`Failed to load Google Font: ${config.fontFamily}`));\n\n    document.head.appendChild(link);\n  });\n}\n\n/**\n * Generate CSS custom properties for font configuration\n */\nexport function generateFontCssVars(\n  config: GoogleFontsConfig,\n): Record<string, string> {\n  const cssVars: Record<string, string> = {};\n\n  // Set base font family\n  cssVars['--timeline-font-family'] =\n    `\"${config.fontFamily}\", system-ui, ui-sans-serif, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif`;\n\n  // Set element-specific font properties\n  if (config.elements) {\n    Object.entries(config.elements).forEach(([elementType, elementConfig]) => {\n      const prefix = `--timeline-${elementType}`;\n\n      // Set element-specific font family (inherits from base font family)\n      cssVars[`${prefix}-font-family`] =\n        cssVars['--timeline-font-family'] || '';\n\n      if (elementConfig.weight) {\n        const numericWeight = normalizeFontWeight(elementConfig.weight);\n        cssVars[`${prefix}-font-weight`] = numericWeight.toString();\n      }\n\n      if (elementConfig.style) {\n        cssVars[`${prefix}-font-style`] = elementConfig.style;\n      }\n\n      if (elementConfig.size) {\n        cssVars[`${prefix}-font-size`] = elementConfig.size;\n      }\n    });\n  }\n\n  return cssVars;\n}\n\n/**\n * Generate vanilla-extract compatible font styles\n */\nexport function generateVanillaExtractStyles(config: GoogleFontsConfig) {\n  const baseStyle = {\n    fontFamily: `\"${config.fontFamily}\", system-ui, ui-sans-serif, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif`,\n  };\n\n  const elementStyles: Record<string, any> = {};\n\n  if (config.elements) {\n    Object.entries(config.elements).forEach(([elementType, elementConfig]) => {\n      elementStyles[elementType] = {\n        ...baseStyle,\n        ...(elementConfig.weight && {\n          fontWeight: normalizeFontWeight(elementConfig.weight),\n        }),\n        ...(elementConfig.style && {\n          fontStyle: elementConfig.style,\n        }),\n        ...(elementConfig.size && {\n          fontSize: elementConfig.size,\n        }),\n      };\n    });\n  }\n\n  return {\n    base: baseStyle,\n    elements: elementStyles,\n  };\n}\n\n/**\n * Hook for using Google Fonts in React components\n */\nexport function useGoogleFonts(config: GoogleFontsConfig) {\n  const [loaded, setLoaded] = React.useState(false);\n  const [error, setError] = React.useState<string | null>(null);\n\n  React.useEffect(() => {\n    loadGoogleFonts(config)\n      .then(() => {\n        setLoaded(true);\n        setError(null);\n      })\n      .catch((err) => {\n        setError(err.message);\n        setLoaded(false);\n      });\n  }, [config]);\n\n  const cssVars = React.useMemo(() => generateFontCssVars(config), [config]);\n\n  const styles = React.useMemo(\n    () => generateVanillaExtractStyles(config),\n    [config],\n  );\n\n  return { loaded, error, cssVars, styles };\n}\n\n// Re-export React for the hook\nimport React from 'react';\n","/**\n * FontProvider component for Google Fonts integration\n *\n * Handles loading Google Fonts and providing font styles via CSS custom properties\n */\n\nimport React, { useEffect, useState, useMemo } from 'react';\nimport {\n  GoogleFontsConfig,\n  loadGoogleFonts,\n  generateFontCssVars,\n} from './google-fonts';\n\ninterface FontProviderProps {\n  children: React.ReactNode;\n  googleFonts?: GoogleFontsConfig;\n  className?: string;\n}\n\n/**\n * FontProvider component that loads Google Fonts and applies font styles\n */\nexport const FontProvider: React.FC<FontProviderProps> = ({\n  children,\n  googleFonts,\n  className = '',\n}) => {\n  const [fontLoaded, setFontLoaded] = useState(false);\n  const [fontError, setFontError] = useState<string | null>(null);\n\n  // Load Google Fonts when config changes\n  useEffect(() => {\n    if (!googleFonts) {\n      setFontLoaded(true);\n      return;\n    }\n\n    setFontLoaded(false);\n    setFontError(null);\n\n    loadGoogleFonts(googleFonts)\n      .then(() => {\n        setFontLoaded(true);\n      })\n      .catch((error) => {\n        setFontError(error.message);\n        setFontLoaded(true); // Still render children with fallback fonts\n        console.warn('Failed to load Google Fonts:', error);\n      });\n  }, [googleFonts]);\n\n  // Generate CSS custom properties\n  const cssVars = useMemo(() => {\n    if (!googleFonts || !fontLoaded) return {};\n    return generateFontCssVars(googleFonts);\n  }, [googleFonts, fontLoaded]);\n\n  // Apply CSS variables to the document root instead of wrapper\n  useEffect(() => {\n    if (!fontLoaded || !cssVars || Object.keys(cssVars).length === 0) {\n      return;\n    }\n\n    // Set CSS custom properties on document root\n    Object.entries(cssVars).forEach(([property, value]) => {\n      document.documentElement.style.setProperty(property, value);\n    });\n\n    // Cleanup function to remove CSS variables\n    return () => {\n      Object.keys(cssVars).forEach((property) => {\n        document.documentElement.style.removeProperty(property);\n      });\n    };\n  }, [cssVars, fontLoaded]);\n\n  const containerStyle = useMemo(() => {\n    return {\n      // Provide fallback fonts while loading\n      fontFamily: googleFonts?.fontFamily\n        ? `\"${googleFonts.fontFamily}\", system-ui, ui-sans-serif, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif`\n        : undefined,\n    };\n  }, [googleFonts]);\n\n  return (\n    <div\n      className={`timeline-font-provider ${className}`}\n      style={containerStyle}\n      data-font-loaded={fontLoaded}\n      data-font-error={!!fontError}\n    >\n      {children}\n    </div>\n  );\n};\n\n/**\n * Hook to access font loading state\n */\nexport const useFontState = () => {\n  // This could be enhanced to use context if needed\n  return {\n    loaded: true, // Simplified for now\n    error: null,\n  };\n};\n","import { TitleModel } from '@models/TimelineCardTitleModel';\nimport cls from 'classnames';\nimport React, { useMemo } from 'react';\nimport { useTimelineContext } from '../../contexts';\nimport { titleActive, titleWrapper } from './timeline-card-title.css';\nimport { cardTitleRecipe } from '../timeline-card-content/timeline-card-content.css';\n\n/**\n * TimelineItemTitle component\n * This component renders the title of a timeline item and applies appropriate styling based on the given props.\n *\n * @property {string} title - The text of the title.\n * @property {boolean} active - Indicates whether the title is active or not.\n * @property {Theme} theme - The theme object, used for styling.\n * @property {string} align - The alignment of the title.\n * @property {string} classString - Additional CSS classes for the title.\n * @returns {JSX.Element} The TimelineItemTitle component.\n */\nconst TimelineItemTitle: React.FunctionComponent<TitleModel> = ({\n  title,\n  active,\n  theme,\n  align,\n  classString,\n}: TitleModel) => {\n  const TITLE_CLASS = 'timeline-item-title'; // Base class name for the title\n\n  // Computed class name for the title, combining base class, active state, and additional classes\n  const titleClass = useMemo(\n    () =>\n      cls(\n        TITLE_CLASS,\n        active ? 'active' : '',\n        classString,\n        cardTitleRecipe({ active: !!active }),\n        titleWrapper, // Add the base CSS class that includes Google Fonts styling\n      ),\n    [active, classString],\n  );\n\n  return (\n    <div\n      className={titleClass}\n      style={{\n        textAlign: align || undefined,\n        visibility: title ? 'visible' : 'hidden',\n      }}\n      title={typeof title === 'string' ? title : undefined} // Native tooltip for full text on hover\n      data-ve-class={titleWrapper}\n      data-ve-active-class={titleActive}\n    >\n      {title}\n    </div>\n  );\n};\n\nexport default TimelineItemTitle;\n","import { useCallback, useEffect, useMemo, useRef } from 'react';\nimport cls from 'classnames';\nimport { useTimelineContext } from '../../../contexts';\n\ninterface UseTimelineCardProps {\n  active?: boolean;\n  autoScroll?: (params: {\n    pointOffset?: number;\n    contentHeight?: number;\n    contentOffset?: number;\n  }) => void;\n  slideShowRunning?: boolean;\n  cardLess?: boolean;\n  showAllCardsHorizontal?: boolean;\n  id?: string;\n  onClick?: (id?: string) => void;\n  mode?: 'HORIZONTAL' | 'VERTICAL' | 'VERTICAL_ALTERNATING' | 'HORIZONTAL_ALL';\n  position?: 'TOP' | 'BOTTOM';\n  iconChild?: React.ReactNode;\n}\n\nexport const useTimelineCard = ({\n  active,\n  autoScroll,\n  slideShowRunning,\n  cardLess,\n  showAllCardsHorizontal,\n  id,\n  onClick,\n  mode,\n  position,\n  iconChild,\n}: UseTimelineCardProps) => {\n  const circleRef = useRef<HTMLButtonElement>(null);\n  const wrapperRef = useRef<HTMLDivElement>(null);\n  const contentRef = useRef<HTMLDivElement>(null);\n\n  const { disableClickOnCircle, disableInteraction, disableAutoScrollOnClick } =\n    useTimelineContext();\n\n  const handleClick = useCallback(() => {\n    if (\n      !disableClickOnCircle &&\n      !disableInteraction &&\n      !disableAutoScrollOnClick &&\n      onClick &&\n      !slideShowRunning\n    ) {\n      onClick(id);\n    }\n  }, [\n    disableClickOnCircle,\n    disableInteraction,\n    disableAutoScrollOnClick,\n    onClick,\n    slideShowRunning,\n    id,\n  ]);\n\n  useEffect(() => {\n    if (active) {\n      const circle = circleRef.current;\n      const wrapper = wrapperRef.current;\n\n      if (circle && wrapper) {\n        const circleOffsetLeft = circle.offsetLeft;\n        const wrapperOffsetLeft = wrapper.offsetLeft;\n\n        autoScroll?.({\n          pointOffset: circleOffsetLeft + wrapperOffsetLeft,\n        });\n\n        // Bring the timeline point itself to keyboard focus for accessibility\n        requestAnimationFrame(() => {\n          try {\n            circle.focus({ preventScroll: true });\n          } catch (_) {\n            // ignore focus errors\n          }\n        });\n      }\n    }\n  }, [active, autoScroll, mode]);\n\n  const modeLower = useMemo(() => mode?.toLowerCase(), [mode]);\n\n  const containerClass = useMemo(\n    () =>\n      cls(\n        'timeline-horz-card-wrapper',\n        modeLower,\n        position === 'TOP' ? 'bottom' : 'top',\n        showAllCardsHorizontal ? 'show-all' : '',\n      ),\n    [modeLower, position, showAllCardsHorizontal],\n  );\n\n  const titleClass = useMemo(\n    () => cls(modeLower, position),\n    [modeLower, position],\n  );\n\n  const circleClass = useMemo(\n    () =>\n      cls(\n        'timeline-circle',\n        { 'using-icon': !!iconChild },\n        modeLower,\n        active ? 'active' : 'in-active',\n      ),\n    [active, iconChild, modeLower],\n  );\n\n  const canShowTimelineContent = useMemo(() => {\n    // In horizontal_all mode with showAllCardsHorizontal, always show content\n    // In regular horizontal mode, only show content for active items (unless cardLess)\n    const shouldShowContent = showAllCardsHorizontal || (active && !cardLess);\n    return shouldShowContent;\n  }, [active, cardLess, showAllCardsHorizontal]);\n\n  return {\n    circleRef,\n    wrapperRef,\n    contentRef,\n    handleClick,\n    modeLower,\n    containerClass,\n    titleClass,\n    circleClass,\n    canShowTimelineContent,\n  };\n};\n","import React from 'react';\nimport { shapeWrapper, timelinePoint } from './timeline-point.css';\nimport { useTimelineContext } from '../../../contexts';\n\ninterface TimelinePointProps {\n  circleClass: string;\n  handleClick: () => void;\n  circleRef: React.RefObject<HTMLButtonElement>;\n  title?: string;\n  theme?: any;\n  timelinePointDimension?: number;\n  timelinePointShape?: 'circle' | 'square' | 'diamond';\n  iconChild?: React.ReactNode;\n  active?: boolean;\n  disabled?: boolean;\n  itemId?: string;\n}\n\nconst TimelinePoint: React.FC<TimelinePointProps> = ({\n  circleClass,\n  handleClick,\n  circleRef,\n  title,\n  theme,\n  timelinePointDimension,\n  timelinePointShape,\n  iconChild,\n  active = false,\n  disabled = false,\n  itemId,\n}) => {\n  // Get disableTimelinePoint and isDarkMode from context to match vertical timeline behavior\n  const { disableTimelinePoint, isDarkMode } = useTimelineContext();\n\n  // Focus is now handled by useTimelineNavigation hook\n  // Only during keyboard navigation, not toolbar navigation\n\n  const usingIcon = !!iconChild;\n\n  // If timeline points are disabled, don't render anything\n  if (disableTimelinePoint) {\n    return null;\n  }\n\n  return (\n    <div className={shapeWrapper}>\n      <button\n        className={`${circleClass} ${timelinePoint({\n          shape: timelinePointShape,\n          hasIcon: usingIcon,\n          state: active ? 'active' : 'inactive',\n          disabled,\n        })} ${usingIcon ? 'using-icon' : ''} ${active ? 'active' : ''}`}\n        onClick={handleClick}\n        ref={circleRef}\n        data-testid=\"timeline-circle\"\n        data-item-id={itemId}\n        aria-label={title ?? 'Timeline point'}\n        aria-selected={active}\n        aria-disabled={disabled}\n        disabled={disabled}\n        tabIndex={disabled ? -1 : 0}\n        type=\"button\"\n        style={{\n          height: timelinePointDimension\n            ? `${timelinePointDimension}px`\n            : '2rem', // Fallback height to ensure visibility\n          width: timelinePointDimension\n            ? `${timelinePointDimension}px`\n            : '2rem', // Fallback width to ensure visibility\n          background: usingIcon\n            ? theme?.iconBackgroundColor || theme?.primary\n            : active\n              ? theme?.secondary || theme?.primary\n              : theme?.primary || '#2563eb', // Fallback color\n          border: active\n            ? `${timelinePointDimension ? Math.round(timelinePointDimension * 0.2) : 3}px solid ${theme?.primary || '#2563eb'}`\n            : `2px solid ${theme?.primary || '#2563eb'}`, // Fallback border\n          color: theme?.primary || '#2563eb', // Ensure color is set for CSS currentColor\n        }}\n      >\n        {iconChild ?? null}\n      </button>\n    </div>\n  ) as React.ReactElement;\n};\n\nexport default TimelinePoint;\n","/**\n * Shallow comparison utility for objects\n */\nexport function shallowEqual<T extends Record<string, any>>(\n  obj1: T | undefined | null,\n  obj2: T | undefined | null,\n): boolean {\n  // Handle null/undefined cases\n  if (obj1 === obj2) return true;\n  if (!obj1 || !obj2) return false;\n\n  const keys1 = Object.keys(obj1);\n  const keys2 = Object.keys(obj2);\n\n  if (keys1.length !== keys2.length) return false;\n\n  for (const key of keys1) {\n    if (obj1[key] !== obj2[key]) return false;\n  }\n\n  return true;\n}\n\n/**\n * Deep comparison for arrays of simple objects\n */\nexport function arrayEqual<T>(\n  arr1: T[] | undefined | null,\n  arr2: T[] | undefined | null,\n): boolean {\n  if (arr1 === arr2) return true;\n  if (!arr1 || !arr2) return false;\n  if (arr1.length !== arr2.length) return false;\n\n  for (let i = 0; i < arr1.length; i++) {\n    const item1 = arr1[i];\n    const item2 = arr2[i];\n\n    // For objects with id property, compare by id\n    if (typeof item1 === 'object' && item1 !== null && 'id' in item1) {\n      if ((item1 as any).id !== (item2 as any).id) return false;\n    } else if (item1 !== item2) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * Comparison for media objects\n */\nexport function mediaEqual(\n  media1: any | undefined,\n  media2: any | undefined,\n): boolean {\n  if (media1 === media2) return true;\n  if (!media1 || !media2) return false;\n\n  // Compare relevant media properties\n  return (\n    media1.source?.url === media2.source?.url &&\n    media1.type === media2.type &&\n    media1.name === media2.name\n  );\n}\n","import { RefObject, useCallback, useEffect, useRef, useState } from 'react';\n\ntype SlideshowHookReturn = {\n  paused: boolean;\n  remainInterval: number;\n  setStartWidth: (width: number) => void;\n  setupTimer: (interval: number) => void;\n  startWidth: number;\n  tryPause: () => void;\n  tryResume: () => void;\n};\n\n/**\n * Custom hook to manage slideshow functionality with pause/resume capabilities\n * Uses requestAnimationFrame for smoother animation performance\n * @param ref - Reference to the HTML element containing the slideshow\n * @param active - Whether the current slide is active\n * @param slideShowActive - Whether the slideshow functionality is enabled\n * @param slideItemDuration - Duration in milliseconds for each slide\n * @param id - Unique identifier for the current slide\n * @param onElapsed - Callback function triggered when slide duration elapses\n * @returns Object containing slideshow control functions and state\n */\nconst useSlideshow = (\n  ref: RefObject<HTMLElement>,\n  active: boolean,\n  slideShowActive: boolean,\n  slideItemDuration: number,\n  id: string,\n  onElapsed?: (id: string) => void,\n): SlideshowHookReturn => {\n  const startTime = useRef<number | null>(null);\n  const timerRef = useRef<number>(0);\n  const rafRef = useRef<number>(0);\n  const [startWidth, setStartWidth] = useState<number>(0);\n  const [paused, setPaused] = useState<boolean>(false);\n  const slideShowElapsed = useRef<number>(0);\n  const [remainInterval, setRemainInterval] = useState<number>(0);\n  const isRunning = useRef<boolean>(false);\n\n  /**\n   * Cleans up timers and animation frames\n   */\n  const cleanupTimer = useCallback(() => {\n    // Clear timeout if exists\n    if (timerRef.current) {\n      window.clearTimeout(timerRef.current);\n      timerRef.current = 0;\n    }\n\n    // Cancel animation frame if exists\n    if (rafRef.current) {\n      window.cancelAnimationFrame(rafRef.current);\n      rafRef.current = 0;\n    }\n\n    isRunning.current = false;\n  }, []);\n\n  /**\n   * Handles timer completion\n   */\n  const handleTimerComplete = useCallback(() => {\n    cleanupTimer();\n    setPaused(true);\n    setStartWidth(0);\n    setRemainInterval(slideItemDuration);\n    if (id && onElapsed) {\n      onElapsed(id);\n    }\n  }, [id, onElapsed, slideItemDuration, cleanupTimer]);\n\n  /**\n   * Sets up a new timer for the slideshow using requestAnimationFrame for smoother animations\n   * @param interval - Duration in milliseconds for the timer\n   */\n  const setupTimer = useCallback(\n    (interval: number) => {\n      if (!slideItemDuration || interval <= 0 || !active || !slideShowActive) {\n        return;\n      }\n\n      cleanupTimer();\n      setRemainInterval(interval);\n      startTime.current = performance.now();\n      setPaused(false);\n      isRunning.current = true;\n\n      // For very short durations, use setTimeout as fallback\n      if (interval < 50) {\n        timerRef.current = window.setTimeout(() => {\n          handleTimerComplete();\n        }, interval);\n        return;\n      }\n\n      // Use requestAnimationFrame for smoother animation\n      const endTime = startTime.current + interval;\n\n      const animationStep = (timestamp: number) => {\n        if (!isRunning.current) return;\n\n        if (timestamp >= endTime) {\n          handleTimerComplete();\n          return;\n        }\n\n        // Continue animation loop\n        rafRef.current = window.requestAnimationFrame(animationStep);\n      };\n\n      rafRef.current = window.requestAnimationFrame(animationStep);\n    },\n    [\n      slideItemDuration,\n      active,\n      slideShowActive,\n      cleanupTimer,\n      handleTimerComplete,\n    ],\n  );\n\n  /**\n   * Pauses the current slideshow if conditions are met\n   */\n  const tryPause = useCallback(() => {\n    if (!active || !slideShowActive) {\n      return;\n    }\n\n    cleanupTimer();\n    setPaused(true);\n\n    if (startTime.current !== null) {\n      const elapsed = performance.now() - startTime.current;\n      slideShowElapsed.current = elapsed;\n    }\n\n    if (ref.current) {\n      setStartWidth(ref.current.clientWidth);\n    }\n  }, [active, slideShowActive, cleanupTimer]);\n\n  /**\n   * Resumes the slideshow if conditions are met\n   */\n  const tryResume = useCallback(() => {\n    if (!active || !slideShowActive || !slideItemDuration) {\n      return;\n    }\n\n    const remainingInterval = slideItemDuration - slideShowElapsed.current;\n    if (remainingInterval > 0) {\n      setPaused(false);\n      setupTimer(remainingInterval);\n    }\n  }, [active, slideShowActive, slideItemDuration, setupTimer]);\n\n  // Auto-start timer when slideshow becomes active\n  useEffect(() => {\n    if (slideShowActive && active && slideItemDuration > 0) {\n      setupTimer(slideItemDuration);\n    } else if (!slideShowActive) {\n      cleanupTimer();\n    }\n    return cleanupTimer;\n  }, [slideShowActive, active, slideItemDuration, setupTimer, cleanupTimer]);\n\n  // Cleanup effect when active state changes\n  useEffect(() => {\n    if (!active) {\n      cleanupTimer();\n    }\n    return () => {\n      // Cleanup when component unmounts or dependencies change\n      cleanupTimer();\n    };\n  }, [active, cleanupTimer]);\n\n  return {\n    paused,\n    remainInterval,\n    setStartWidth,\n    setupTimer,\n    startWidth,\n    tryPause,\n    tryResume,\n  };\n};\n\nexport { useSlideshow };\n","import {\n  RefObject,\n  useCallback,\n  useEffect,\n  useMemo,\n  useState,\n  useRef,\n} from 'react';\nimport { useTimelineContext } from '../components/contexts';\n\ninterface UseCardSizeProps {\n  containerRef: RefObject<HTMLElement | null>;\n  detailsRef: RefObject<HTMLElement | null>;\n  setStartWidth: (width: number) => void;\n}\n\ninterface UseCardSizeReturn {\n  cardActualHeight: number;\n  detailsHeight: number;\n  textContentLarge: boolean;\n  updateCardSize: (node: HTMLElement | null) => void;\n}\n\ninterface CardDimensions {\n  cardHeight: number;\n  detailsHeight: number;\n  containerWidth: number;\n}\n\n// Memoized calculation function to prevent unnecessary recalculations\nconst calculateTextContentSize = (\n  scrollHeight: number,\n  clientHeight: number,\n  contentDetailsHeight: number = 150,\n): boolean => {\n  // Content is considered \"large\" if it exceeds the configured height limit\n  // This provides a more predictable behavior than comparing with container\n  return scrollHeight > contentDetailsHeight;\n};\n\nexport const useCardSize = ({\n  containerRef,\n  detailsRef,\n  setStartWidth,\n}: UseCardSizeProps): UseCardSizeReturn => {\n  // Safely get contentDetailsHeight from context with fallback\n  let contentDetailsHeight = 150; // Default fallback\n  try {\n    const context = useTimelineContext();\n    contentDetailsHeight = context.contentDetailsHeight;\n  } catch {\n    // Context not available, use fallback\n  }\n  const [dimensions, setDimensions] = useState<CardDimensions>({\n    cardHeight: 0,\n    detailsHeight: 0,\n    containerWidth: 0,\n  });\n\n  // Cache DOM measurements to avoid repeated calculations\n  const measurementsCache = useRef<{\n    scrollHeight: number;\n    clientHeight: number;\n    offsetTop: number;\n    containerHeight: number;\n  }>({ scrollHeight: 0, clientHeight: 0, offsetTop: 0, containerHeight: 0 });\n\n  // Throttled resize observer for better performance\n  useEffect(() => {\n    let rafId: number | undefined;\n    let isUnmounted = false;\n\n    const observer = new ResizeObserver((entries) => {\n      // Use RAF to batch DOM updates\n      if (rafId) cancelAnimationFrame(rafId);\n\n      rafId = requestAnimationFrame(() => {\n        if (isUnmounted) return; // Prevent updates after unmount\n\n        for (const entry of entries) {\n          if (containerRef.current && detailsRef.current) {\n            const detailsEle = detailsRef.current;\n            const container = containerRef.current;\n\n            // Update measurements\n            measurementsCache.current = {\n              scrollHeight: detailsEle.scrollHeight,\n              clientHeight: detailsEle.offsetHeight,\n              offsetTop: detailsEle.offsetTop,\n              containerHeight: container.clientHeight,\n            };\n\n            // Update dimensions\n            setDimensions({\n              cardHeight: detailsEle.scrollHeight,\n              detailsHeight: detailsEle.offsetHeight,\n              containerWidth: container.clientWidth,\n            });\n          }\n        }\n        rafId = undefined;\n      });\n    });\n\n    if (containerRef.current) {\n      observer.observe(containerRef.current);\n    }\n\n    // Also observe the details element for size changes\n    if (detailsRef.current) {\n      observer.observe(detailsRef.current);\n    }\n\n    // Force initial measurement when detailsRef becomes available\n    // This handles the case when textDensity changes from LOW to HIGH\n    if (containerRef.current && detailsRef.current) {\n      const detailsEle = detailsRef.current;\n      const container = containerRef.current;\n\n      measurementsCache.current = {\n        scrollHeight: detailsEle.scrollHeight,\n        clientHeight: detailsEle.offsetHeight,\n        offsetTop: detailsEle.offsetTop,\n        containerHeight: container.clientHeight,\n      };\n\n      setDimensions({\n        cardHeight: detailsEle.scrollHeight,\n        detailsHeight: detailsEle.offsetHeight,\n        containerWidth: container.clientWidth,\n      });\n    }\n\n    return () => {\n      isUnmounted = true;\n      if (rafId) cancelAnimationFrame(rafId);\n      observer.disconnect();\n    };\n  }, [containerRef, detailsRef]);\n\n  const updateCardSize = useCallback(\n    (node: HTMLElement | null) => {\n      if (!node || !detailsRef.current) return;\n\n      const detailsEle = detailsRef.current;\n      const { scrollHeight, offsetHeight, offsetTop } = detailsEle;\n      const containerHeight = node.clientHeight;\n\n      // Cache measurements\n      measurementsCache.current = {\n        scrollHeight,\n        clientHeight: offsetHeight,\n        offsetTop,\n        containerHeight,\n      };\n\n      containerRef.current = node;\n      setStartWidth(node.clientWidth);\n      setDimensions({\n        cardHeight: scrollHeight,\n        detailsHeight: offsetHeight,\n        containerWidth: node.clientWidth,\n      });\n    },\n    [detailsRef, setStartWidth, containerRef],\n  );\n\n  // Optimized memoization with cached measurements\n  const { cardActualHeight, detailsHeight, textContentLarge } = useMemo(() => {\n    const cache = measurementsCache.current;\n    return {\n      cardActualHeight: dimensions.cardHeight,\n      detailsHeight: dimensions.detailsHeight,\n      textContentLarge: calculateTextContentSize(\n        cache.scrollHeight,\n        cache.clientHeight,\n        contentDetailsHeight, // Use context value instead of hardcoded 150\n      ),\n    };\n  }, [dimensions, contentDetailsHeight]);\n\n  return {\n    cardActualHeight,\n    detailsHeight,\n    textContentLarge,\n    updateCardSize,\n  };\n};\n","import { useEffect, useRef } from 'react';\n\ninterface UseFocusManagerProps {\n  shouldFocus: boolean;\n  isActive: boolean;\n  preventScroll?: boolean;\n  restoreFocus?: boolean;\n}\n\n/**\n * Hook for managing focus with proper restoration and accessibility\n */\nexport const useFocusManager = ({\n  shouldFocus,\n  isActive,\n  preventScroll = true,\n  restoreFocus = true,\n}: UseFocusManagerProps) => {\n  const elementRef = useRef<HTMLDivElement>(null);\n  const previousFocusRef = useRef<HTMLElement | null>(null);\n  const hasRestoredRef = useRef(false);\n\n  // Store previous focus when component becomes active\n  useEffect(() => {\n    if (isActive && shouldFocus && restoreFocus && !hasRestoredRef.current) {\n      previousFocusRef.current = document.activeElement as HTMLElement;\n      hasRestoredRef.current = false;\n    }\n  }, [isActive, shouldFocus, restoreFocus]);\n\n  // Manage focus based on state\n  useEffect(() => {\n    if (!elementRef.current) return;\n\n    if (shouldFocus && isActive) {\n      // Set focus with proper options\n      const focusOptions: FocusOptions = { preventScroll };\n\n      // Use requestAnimationFrame to ensure DOM is ready\n      requestAnimationFrame(() => {\n        if (\n          elementRef.current &&\n          !elementRef.current.contains(document.activeElement)\n        ) {\n          elementRef.current.focus(focusOptions);\n\n          // Add focus-visible class for keyboard navigation (avoid selector)\n          if (!elementRef.current.classList.contains('focus-visible')) {\n            elementRef.current.classList.add('focus-visible');\n          }\n        }\n      });\n    }\n\n    // Cleanup function\n    return () => {\n      // Remove focus-visible class when focus is lost\n      if (elementRef.current?.classList.contains('focus-visible')) {\n        elementRef.current.classList.remove('focus-visible');\n      }\n    };\n  }, [shouldFocus, isActive, preventScroll]);\n\n  // Restore focus when component becomes inactive\n  useEffect(() => {\n    return () => {\n      if (\n        restoreFocus &&\n        !isActive &&\n        previousFocusRef.current &&\n        !hasRestoredRef.current\n      ) {\n        // Restore focus to previous element\n        requestAnimationFrame(() => {\n          if (\n            previousFocusRef.current &&\n            typeof previousFocusRef.current.focus === 'function'\n          ) {\n            previousFocusRef.current.focus();\n            hasRestoredRef.current = true;\n          }\n        });\n      }\n    };\n  }, [isActive, restoreFocus]);\n\n  // Reset restoration flag when component becomes active again\n  useEffect(() => {\n    if (isActive) {\n      hasRestoredRef.current = false;\n    }\n  }, [isActive]);\n\n  return elementRef;\n};\n\n/**\n * Hook for managing focus trap within a container\n */\nexport const useFocusTrap = (isActive: boolean) => {\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    if (!isActive || !containerRef.current) return;\n\n    const container = containerRef.current;\n    const focusableElements = container.querySelectorAll<HTMLElement>(\n      'a[href], button:not([disabled]), textarea:not([disabled]), input:not([disabled]), select:not([disabled]), [tabindex]:not([tabindex=\"-1\"])',\n    );\n\n    if (focusableElements.length === 0) return;\n\n    const firstElement = focusableElements[0];\n    const lastElement = focusableElements[focusableElements.length - 1];\n\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (e.key !== 'Tab') return;\n\n      if (e.shiftKey) {\n        // Shift + Tab\n        if (document.activeElement === firstElement) {\n          e.preventDefault();\n          lastElement?.focus();\n        }\n      } else {\n        // Tab\n        if (document.activeElement === lastElement) {\n          e.preventDefault();\n          firstElement?.focus();\n        }\n      }\n    };\n\n    container.addEventListener('keydown', handleKeyDown);\n\n    return () => {\n      container.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [isActive]);\n\n  return containerRef;\n};\n","import { MediaState } from '@models/TimelineMediaModel';\nimport { useState, useCallback } from 'react';\n\ninterface UseMediaLoadResult {\n  loadFailed: boolean;\n  mediaLoaded: boolean;\n  handleMediaLoaded: () => void;\n  handleError: () => void;\n}\n\n/**\n * Custom hook to handle media loading state and error handling\n *\n * @param id - The ID of the media element\n * @param onMediaStateChange - Callback to notify parent component of media state changes\n * @returns Object with loading state and handler functions\n */\nexport const useMediaLoad = (\n  id: string,\n  onMediaStateChange: (state: MediaState) => void,\n): UseMediaLoadResult => {\n  const [loadFailed, setLoadFailed] = useState(false);\n  const [mediaLoaded, setMediaLoaded] = useState(false);\n\n  // This function will be invoked when the user has finished loading media\n  const handleMediaLoaded = useCallback(() => {\n    setMediaLoaded(true);\n  }, []);\n\n  // This function handles errors when loading media\n  const handleError = useCallback(() => {\n    setLoadFailed(true);\n    onMediaStateChange({\n      id,\n      paused: false,\n      playing: false,\n    });\n  }, [onMediaStateChange, id]);\n\n  return {\n    loadFailed,\n    mediaLoaded,\n    handleMediaLoaded,\n    handleError,\n  };\n};\n","import { useMemo } from 'react';\n\n/**\n * Custom hook to detect YouTube URLs\n * @param url - The URL to check\n * @returns boolean indicating if the URL is a YouTube URL\n */\nexport const useYouTubeDetection = (url: string) => {\n  return useMemo(\n    () => /^(https?:\\/\\/)?(www\\.youtube\\.com|youtu\\.?be)\\/.+$/.test(url),\n    [url],\n  );\n};\n","import { useCallback, useState } from 'react';\n\n/**\n * Custom hook to handle text display toggle functionality\n * @returns Object with toggle states and functions\n */\nexport const useToggleControls = () => {\n  const [expandDetails, setExpandDetails] = useState(false);\n  const [showText, setShowText] = useState(true);\n\n  const toggleExpand = useCallback(() => {\n    setExpandDetails((prev) => !prev);\n    setShowText(true);\n  }, []);\n\n  const toggleText = useCallback(() => {\n    setExpandDetails(false);\n    setShowText((prev) => !prev);\n  }, []);\n\n  return {\n    expandDetails,\n    showText,\n    toggleExpand,\n    toggleText,\n  };\n};\n","import { ReactNode, useMemo, ForwardRefExoticComponent } from 'react';\nimport { hexToRGBA } from '@utils/index';\nimport { TextOrContentModel } from '../../timeline-card-content/text-or-content';\n\ninterface UseViewOptionsParams {\n  showText: boolean;\n  expandDetails: boolean;\n  textOverlay: boolean;\n  detailsText?: ForwardRefExoticComponent<TextOrContentModel>;\n  title?: ReactNode;\n  content?: ReactNode;\n  theme: any;\n  cardHeight: number;\n  mediaHeight: number;\n}\n\ninterface UseViewOptionsResult {\n  canShowTextMemo: boolean;\n  canShowTextContent: boolean;\n  canExpand: boolean;\n  gradientColor: string;\n  canShowGradient: boolean;\n  getCardHeight: number;\n}\n\n/**\n * Custom hook for handling view options and memoized calculated values\n */\nexport const useViewOptions = ({\n  showText,\n  expandDetails,\n  textOverlay,\n  detailsText,\n  title,\n  content,\n  theme,\n  cardHeight,\n  mediaHeight,\n}: UseViewOptionsParams): UseViewOptionsResult => {\n  const canShowTextMemo = useMemo(\n    () => showText && !!detailsText,\n    [showText, detailsText],\n  );\n\n  const canShowTextContent = useMemo(\n    () => !!(title ?? content ?? detailsText),\n    [title, content, detailsText],\n  );\n\n  const canExpand = useMemo(\n    () => textOverlay && !!detailsText,\n    [textOverlay, detailsText],\n  );\n\n  const gradientColor = useMemo(\n    () => hexToRGBA(theme?.cardDetailsBackGround ?? '', 0.8),\n    [theme?.cardDetailsBackGround],\n  );\n\n  const canShowGradient = useMemo(\n    () => !expandDetails && showText && textOverlay,\n    [expandDetails, showText, textOverlay],\n  );\n\n  const getCardHeight = useMemo(\n    () => (textOverlay ? cardHeight : mediaHeight),\n    [textOverlay, cardHeight, mediaHeight],\n  );\n\n  return {\n    canShowTextMemo,\n    canShowTextContent,\n    canExpand,\n    gradientColor,\n    canShowGradient,\n    getCardHeight,\n  };\n};\n","import { memo } from 'react';\nimport { errorMessage } from '../timeline-card-media.css';\n\ninterface ErrorMessageProps {\n  message: string;\n}\n\n/**\n * Displays an error message when media fails to load\n */\nexport const LazyErrorMessage = memo(({ message }: ErrorMessageProps) => (\n  <span className={errorMessage}>{message}</span>\n));\n","import { MediaState } from '@models/TimelineMediaModel';\nimport React, { memo, useEffect, useRef } from 'react';\nimport { cardVideo } from '../timeline-card-media.css';\n\ninterface VideoPlayerProps {\n  url: string;\n  active: boolean;\n  id: string;\n  name: string;\n  onMediaStateChange: (state: MediaState) => void;\n  handleMediaLoaded: () => void;\n  handleError: () => void;\n}\n\n/**\n * Renders a standard video player\n */\nexport const VideoPlayer = memo(\n  ({\n    url,\n    active,\n    id,\n    name,\n    onMediaStateChange,\n    handleMediaLoaded,\n    handleError,\n  }: VideoPlayerProps) => {\n    const videoRef = useRef<HTMLVideoElement>(null);\n\n    useEffect(() => {\n      if (!videoRef.current) return;\n\n      if (active) {\n        videoRef.current.play().catch(() => {\n          // Handle autoplay failure silently\n        });\n      } else {\n        videoRef.current.pause();\n      }\n    }, [active]);\n\n    return (\n      <video\n        className={cardVideo}\n        controls\n        autoPlay={active}\n        ref={videoRef}\n        onLoadedData={handleMediaLoaded}\n        data-testid=\"rc-video\"\n        onPlay={() =>\n          onMediaStateChange({\n            id,\n            paused: false,\n            playing: true,\n          })\n        }\n        onPause={() =>\n          onMediaStateChange({\n            id,\n            paused: true,\n            playing: false,\n          })\n        }\n        onEnded={() =>\n          onMediaStateChange({\n            id,\n            paused: false,\n            playing: false,\n          })\n        }\n        onError={handleError}\n        preload=\"metadata\"\n      >\n        <source src={url}></source>\n      </video>\n    );\n  },\n);\n","import React, { memo } from 'react';\nimport { iframeVideo } from '../timeline-card-media.css';\n\ninterface YoutubePlayerProps {\n  url: string;\n  active: boolean;\n  name: string;\n}\n\n/**\n * Renders a YouTube player iframe\n */\nexport const YoutubePlayer = memo(\n  ({ url, active, name }: YoutubePlayerProps) => (\n    <iframe\n      className={iframeVideo}\n      style={{ border: 'none' }}\n      allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n      allowFullScreen\n      src={`${url}${active ? '?autoplay=1&enablejsapi=1' : '?enablejsapi=1'}`}\n      title={name}\n      data-testid=\"timeline-card-content-video\"\n      loading=\"lazy\"\n    />\n  ),\n);\n","import React, { memo } from 'react';\nimport {\n  cardImage,\n  imageHidden,\n  imageRounded,\n  imageVisible,\n  imageWrapper,\n} from '../timeline-card-media.css';\nimport { TimelineMode } from '@models/TimelineModel';\n\ninterface ImageDisplayProps {\n  url: string;\n  name: string;\n  mode: TimelineMode;\n  mediaLoaded: boolean;\n  borderLessCards: boolean;\n  mediaHeight: number;\n  imageFit?: string;\n  handleMediaLoaded: () => void;\n  handleError: () => void;\n}\n\n/**\n * Renders an image with appropriate loading and error handling\n */\nexport const ImageDisplay = memo(\n  ({\n    url,\n    name,\n    mode,\n    mediaLoaded,\n    borderLessCards,\n    mediaHeight,\n    imageFit,\n    handleMediaLoaded,\n    handleError,\n  }: ImageDisplayProps) => (\n    <div className={imageWrapper} style={{ height: mediaHeight }}>\n      <img\n        className={[\n          cardImage,\n          mediaLoaded ? imageVisible : imageHidden,\n          borderLessCards ? imageRounded : undefined,\n        ]\n          .filter(Boolean)\n          .join(' ')}\n        src={url}\n        onLoad={handleMediaLoaded}\n        onError={handleError}\n        alt={name}\n        loading=\"lazy\"\n        data-testid=\"timeline-card-content-image\"\n        width=\"100%\"\n        height=\"auto\"\n        style={{\n          objectFit: (imageFit as React.CSSProperties['objectFit']) ?? 'cover',\n        }}\n      />\n    </div>\n  ),\n);\n","import { MediaState } from '@models/TimelineMediaModel';\nimport { TimelineMode } from '@models/TimelineModel';\nimport React, { memo } from 'react';\nimport { LazyErrorMessage } from './ErrorMessage';\nimport { VideoPlayer } from './VideoPlayer';\nimport { YoutubePlayer } from './YoutubePlayer';\nimport { ImageDisplay } from './ImageDisplay';\n\ninterface MediaContentProps {\n  media: {\n    type: string;\n    source: {\n      url: string;\n    };\n    name?: string;\n  };\n  isYouTube: boolean;\n  loadFailed: boolean;\n  mediaLoaded: boolean;\n  active: boolean;\n  id: string;\n  mediaHeight: number;\n  mode: TimelineMode;\n  borderLessCards: boolean;\n  mediaSettings: any;\n  handleMediaLoaded: () => void;\n  handleError: () => void;\n  onMediaStateChange: (state: MediaState) => void;\n}\n\n/**\n * Renders the appropriate media content based on type (video, YouTube, image)\n */\nexport const MediaContent = memo(\n  ({\n    media,\n    isYouTube,\n    loadFailed,\n    mediaLoaded,\n    active,\n    id,\n    mediaHeight,\n    mode,\n    borderLessCards,\n    mediaSettings,\n    handleMediaLoaded,\n    handleError,\n    onMediaStateChange,\n  }: MediaContentProps) => {\n    if (media.type === 'VIDEO') {\n      if (isYouTube) {\n        return (\n          <YoutubePlayer\n            url={media.source.url}\n            active={active}\n            name={media.name ?? ''}\n          />\n        );\n      }\n\n      return loadFailed ? (\n        <LazyErrorMessage message=\"Failed to load the video\" />\n      ) : (\n        <VideoPlayer\n          url={media.source.url}\n          active={active}\n          id={id}\n          name={media.name ?? ''}\n          onMediaStateChange={onMediaStateChange}\n          handleMediaLoaded={handleMediaLoaded}\n          handleError={handleError}\n        />\n      );\n    }\n\n    if (media.type === 'IMAGE') {\n      return loadFailed ? (\n        <LazyErrorMessage message=\"Failed to load the image.\" />\n      ) : (\n        <ImageDisplay\n          url={media.source.url}\n          name={media.name ?? ''}\n          mode={mode}\n          mediaLoaded={mediaLoaded}\n          borderLessCards={borderLessCards}\n          mediaHeight={mediaHeight}\n          imageFit={mediaSettings?.fit}\n          handleMediaLoaded={handleMediaLoaded}\n          handleError={handleError}\n        />\n      );\n    }\n\n    return null;\n  },\n);\n","import cls from 'classnames';\nimport React from 'react';\nimport { Title } from './memoized-model';\nimport { useTimelineContext } from '../../contexts';\nimport { titleStyles } from '../../../styles/system/font-styles.css';\n\n/**\n * Renders the timeline's title with optional link using configurable semantic tags.\n * @param {Title} props - Title properties\n * @returns {JSX.Element | null} The rendered title\n */\nconst TitleMemoComponent = ({\n  title,\n  url,\n  theme,\n  color,\n  dir,\n  active,\n  fontSize = '1rem',\n  classString = '',\n}: Title) => {\n  const { semanticTags } = useTimelineContext();\n\n  const Tag: any = semanticTags?.cardTitle ?? 'span';\n\n  return title ? (\n    <Tag\n      className={cls(titleStyles.card, active ? 'active' : '', {\n        [classString]: true,\n      })}\n      style={{ color }}\n      dir={dir}\n      data-class={classString}\n    >\n      {url ? (\n        <a href={url} target=\"_blank\" rel=\"noreferrer\">\n          {title}\n        </a>\n      ) : (\n        title\n      )}\n    </Tag>\n  ) : null;\n};\n\nexport const TitleMemo = React.memo(TitleMemoComponent);\n\nTitleMemo.displayName = 'Timeline Title';\n","import { button, buttonIcon } from './timeline-card-media-buttons.css';\nimport { buttonWrapper } from './timeline-card-media.css';\n\nexport const ExpandButton = (\n  props: React.PropsWithChildren<React.HTMLAttributes<HTMLButtonElement>>,\n) => (\n  <button className={button} {...props}>\n    <span className={buttonIcon}>{props.children}</span>\n  </button>\n);\n\nexport const ShowHideTextButton = (\n  props: React.PropsWithChildren<React.HTMLAttributes<HTMLButtonElement>>,\n) => (\n  <button className={button} {...props}>\n    <span className={buttonIcon}>{props.children}</span>\n  </button>\n);\n\nexport const ButtonWrapper: React.FC<React.PropsWithChildren<{}>> = ({\n  children,\n}) => <ul className={buttonWrapper}>{children}</ul>;\n","import { memo, useMemo } from 'react';\nimport { MinusIcon, PlusIcon } from '../../icons';\nimport { ShowHideTextButton } from '../timeline-card-media/timeline-card-media-buttons';\nimport { ShowHideTextButtonModel } from './memoized-model';\n\n/**\n * Renders a button to toggle showing or hiding text content.\n * @param {ShowHideTextButtonModel} props - Button properties\n * @returns {JSX.Element | null} The toggle button\n */\nconst ShowOrHideTextButtonMemo = memo<ShowHideTextButtonModel>(\n  ({ textOverlay, onToggle, theme, show }: ShowHideTextButtonModel) => {\n    const label = useMemo(() => {\n      return show ? 'Hide Text' : 'Show Text';\n    }, [show]);\n\n    return textOverlay ? (\n      <ShowHideTextButton\n        onPointerDown={onToggle}\n        tabIndex={0}\n        onKeyDown={(ev) => ev.key === 'Enter' && onToggle?.(ev)}\n        aria-label={label}\n        title={label}\n      >\n        {show ? <MinusIcon /> : <PlusIcon />}\n      </ShowHideTextButton>\n    ) : null;\n  },\n);\n\nShowOrHideTextButtonMemo.displayName = 'Show Hide Text Button';\n\nexport { ShowOrHideTextButtonMemo };\n","import { memo, useMemo } from 'react';\nimport { MaximizeIcon, MinimizeIcon } from '../../icons';\nimport { ExpandButton } from '../timeline-card-media/timeline-card-media-buttons';\nimport { ExpandButtonModel } from './memoized-model';\n\n/**\n * Renders a button to expand or collapse timeline card content.\n * @param {ExpandButtonModel} props - The expand button properties\n * @returns {JSX.Element | null} The expand/collapse button\n */\nconst ExpandButtonMemo = memo<ExpandButtonModel>(\n  ({ theme, expanded, onExpand, textOverlay }: ExpandButtonModel) => {\n    const label = useMemo(() => {\n      return expanded ? 'Minimize' : 'Maximize';\n    }, [expanded]);\n\n    return textOverlay ? (\n      <ExpandButton\n        onPointerDown={onExpand}\n        onKeyDown={(ev) => ev.key === 'Enter' && onExpand?.(ev)}\n        aria-expanded={expanded}\n        tabIndex={0}\n        aria-label={label}\n        title={label}\n      >\n        {expanded ? <MinimizeIcon /> : <MaximizeIcon />}\n      </ExpandButton>\n    ) : null;\n  },\n  (prev, next) => prev.expanded === next.expanded,\n);\n\nExpandButtonMemo.displayName = 'Expand Button';\n\nexport { ExpandButtonMemo };\n","import cls from 'classnames';\nimport React from 'react';\n// Replaced styled component with semantic tag + classes\nimport { Content } from './memoized-model';\nimport { useTimelineContext } from '../../contexts';\nimport { subtitleStyles } from '../../../styles/system/font-styles.css';\n\n/**\n * Renders the subtitle content for the timeline card using configurable semantic tags.\n * @param {Content} props - Subtitle properties\n * @returns {JSX.Element | null} The rendered subtitle\n */\nconst SubTitleMemo = React.memo<Content>(\n  ({ content, color, dir, theme, fontSize, classString, padding }: Content) => {\n    const { semanticTags } = useTimelineContext();\n\n    const Tag: any = semanticTags?.cardSubtitle ?? 'span';\n    return content ? (\n      <Tag\n        style={{ color }}\n        dir={dir}\n        className={cls(subtitleStyles.card, 'card-sub-title', classString)}\n      >\n        {content}\n      </Tag>\n    ) : null;\n  },\n  (prev, next) =>\n    prev.theme?.cardSubtitleColor === next.theme?.cardSubtitleColor,\n);\n\nSubTitleMemo.displayName = 'Timeline Content';\n\nexport { SubTitleMemo };\n","import { useMemo } from 'react';\nimport { hexToRGBA } from '../utils';\nimport {\n  detectColorFormat,\n  adjustRGBOpacity,\n  adjustHSLOpacity,\n  HEX_COLOR_REGEX,\n  ColorFormat,\n} from './utils';\n\nconst isValidHexColor = (color: string): boolean => HEX_COLOR_REGEX.test(color);\n\ninterface UseBackgroundOptions {\n  format?: ColorFormat | 'auto';\n}\n\n/**\n * Hook that converts a color to RGBA format with opacity\n * @param color - The color string (hex, rgb, rgba, hsl, hsla)\n * @param opacity - The opacity value (0-1)\n * @param options - Additional options\n * @returns The color in RGBA format with the specified opacity\n */\nexport const useBackground = (\n  color?: string,\n  opacity = 0.8,\n  options: UseBackgroundOptions = {},\n): string => {\n  const { format = 'auto' } = options;\n\n  return useMemo(() => {\n    if (!color) return '';\n\n    // Auto-detect format if needed\n    const colorFormat = format === 'auto' ? detectColorFormat(color) : format;\n\n    switch (colorFormat) {\n      case 'hex':\n        if (!isValidHexColor(color)) {\n          if (process.env.NODE_ENV === 'development') {\n            console.warn(`Invalid hex color: ${color}`);\n          }\n          return '';\n        }\n        return hexToRGBA(color, opacity);\n\n      case 'rgb':\n      case 'rgba':\n        return adjustRGBOpacity(color, opacity);\n\n      case 'hsl':\n      case 'hsla':\n        return adjustHSLOpacity(color, opacity);\n\n      default:\n        if (process.env.NODE_ENV === 'development') {\n          console.warn(`Unsupported color format: ${color}`);\n        }\n        return '';\n    }\n  }, [color, opacity, format]);\n};\n","import { useCallback } from 'react';\n\ntype MeasurableProperty =\n  | 'clientHeight'\n  | 'clientWidth'\n  | 'scrollHeight'\n  | 'scrollWidth'\n  | 'offsetHeight'\n  | 'offsetWidth';\n\ntype MeasurementResult = {\n  value: number;\n  element: HTMLElement;\n};\n\ninterface UseMeasureOptions {\n  property?: MeasurableProperty;\n  delay?: number;\n  onError?: (error: Error) => void;\n}\n\n/**\n * Hook to measure dimensions of a DOM element\n * @param onMeasure - Callback function that receives the measurement\n * @param options - Measurement options\n * @returns Callback ref to attach to the element to measure\n */\nexport const useMeasure = <T extends HTMLElement = HTMLDivElement>(\n  onMeasure?: (result: MeasurementResult) => void,\n  options: UseMeasureOptions = {},\n) => {\n  const { property = 'clientHeight', delay = 0, onError } = options;\n\n  return useCallback(\n    (node: T | null) => {\n      if (!node || !onMeasure) return;\n\n      const measure = () => {\n        try {\n          const value = node[property];\n          onMeasure({ value, element: node });\n        } catch (error) {\n          if (onError) {\n            onError(error instanceof Error ? error : new Error(String(error)));\n          } else if (process.env.NODE_ENV === 'development') {\n            console.error(`Failed to measure ${property}:`, error);\n          }\n        }\n      };\n\n      if (delay > 0) {\n        setTimeout(() => {\n          requestAnimationFrame(measure);\n        }, delay);\n      } else {\n        requestAnimationFrame(measure);\n      }\n    },\n    [onMeasure, property, delay, onError],\n  );\n};\n\n/**\n * Legacy hook for backward compatibility\n * @deprecated Use useMeasure instead\n */\nexport const useMeasureHeight = (onRender?: (height: number) => void) => {\n  return useMeasure<HTMLDivElement>(\n    onRender ? (result) => onRender(result.value) : undefined,\n    { property: 'clientHeight' },\n  );\n};\n","import { memo } from 'react';\nimport { useBackground } from '../../../hooks/useBackground';\nimport { useMeasureHeight } from '../../../hooks/useMeasureHeight';\nimport { detailsTextWrapper } from '../timeline-card-media/timeline-card-media.css';\nimport { DetailsTextMemoModel } from './memoized-model';\nimport { useTimelineContext } from '../../contexts';\n\nconst arePropsEqual = (\n  prev: DetailsTextMemoModel,\n  next: DetailsTextMemoModel,\n): boolean => {\n  return (\n    prev.height === next.height &&\n    prev.show === next.show &&\n    prev.expand === next.expand &&\n    prev.theme?.cardDetailsBackGround === next.theme?.cardDetailsBackGround\n  );\n};\n\nconst DetailsTextMemo = memo<DetailsTextMemoModel>(\n  ({ theme, show, expand, textOverlay, text: Text, onRender }) => {\n    const background = useBackground(theme?.cardDetailsBackGround);\n    const measureRef = useMeasureHeight(onRender);\n\n    if (!textOverlay) return null;\n\n    return (\n      <div\n        ref={measureRef}\n        className={detailsTextWrapper}\n        style={{\n          background,\n          height: show ? '100%' : 0,\n          overflow: expand ? 'auto' : 'hidden',\n        }}\n      >\n        <Text />\n      </div>\n    );\n  },\n  arePropsEqual,\n);\n\nDetailsTextMemo.displayName = 'DetailsText';\n\nexport { DetailsTextMemo };\n","import React, { useRef, ReactNode, useState, useCallback } from 'react';\nimport { assignInlineVars } from '@vanilla-extract/dynamic';\nimport {\n  cardMediaHeader,\n  mediaDetailsWrapper,\n  mediaDetailsAbsolute,\n  mediaDetailsCard,\n  mediaDetailsGradient,\n  mediaDetailsMinimized,\n  mediaDetailsMaximized,\n  textOverlayButton,\n} from '../timeline-card-media.css';\nimport { gradientVar } from '../timeline-card-media.css';\nimport { TitleMemo } from '../../memoized/title-memo';\nimport { ButtonWrapper } from '../timeline-card-media-buttons';\nimport { ShowOrHideTextButtonMemo } from '../../memoized/show-hide-button';\nimport { ExpandButtonMemo } from '../../memoized/expand-button-memo';\nimport { SubTitleMemo } from '../../memoized/subtitle-memo';\nimport { DetailsTextMemo } from '../../memoized/details-text-memo';\nimport { TimelineMode } from '@models/TimelineModel';\nimport { PlusIcon, MinusIcon } from '../../../icons';\nimport { pickDefined } from '../../../../utils/propUtils';\n\nexport interface ContentDisplayProps {\n  readonly mode: TimelineMode;\n  readonly textOverlay: boolean;\n  readonly theme: any;\n  readonly expandDetails: boolean;\n  readonly showText: boolean;\n  readonly canExpand: boolean;\n  readonly canShowGradient: boolean;\n  readonly gradientColor: string | null;\n  readonly title?: ReactNode;\n  readonly active: boolean;\n  readonly url?: string;\n  readonly fontSizes: any;\n  readonly classNames: any;\n  readonly toggleText: () => void;\n  readonly toggleExpand: () => void;\n  readonly content?: ReactNode;\n  readonly canShowTextMemo: boolean;\n  readonly detailsText?: any; // Use 'any' to bypass type checking temporarily\n  readonly onDetailsTextRef: (height?: number) => void;\n}\n\nconst ContentDisplayComponent: React.FunctionComponent<ContentDisplayProps> = (\n  props,\n) => {\n  const {\n    mode,\n    textOverlay,\n    theme,\n    expandDetails,\n    showText,\n    canExpand,\n    canShowGradient,\n    gradientColor,\n    title,\n    active,\n    url,\n    fontSizes,\n    classNames,\n    toggleText,\n    toggleExpand,\n    content,\n    canShowTextMemo,\n    detailsText,\n    onDetailsTextRef,\n  } = props;\n\n  const moreRef = useRef(null);\n  const [isMinimized, setIsMinimized] = useState(false);\n\n  const toggleMinimize = useCallback(() => {\n    setIsMinimized(!isMinimized);\n  }, [isMinimized]);\n\n  return (\n    <div\n      ref={moreRef}\n      className={[\n        mediaDetailsWrapper,\n        textOverlay ? mediaDetailsAbsolute : undefined,\n        canExpand || !showText ? mediaDetailsCard : undefined,\n        canShowGradient ? mediaDetailsGradient : undefined,\n        textOverlay && isMinimized ? mediaDetailsMinimized : undefined,\n        textOverlay && !isMinimized ? mediaDetailsMaximized : undefined,\n      ]\n        .filter(Boolean)\n        .join(' ')}\n      style={\n        canShowGradient && gradientColor\n          ? assignInlineVars({ [gradientVar]: gradientColor })\n          : undefined\n      }\n      onClick={textOverlay && isMinimized ? toggleMinimize : undefined}\n    >\n      <div className={cardMediaHeader}>\n        <TitleMemo\n          title={title}\n          theme={theme}\n          active={active}\n          url={url ?? ''}\n          fontSize={fontSizes?.cardTitle}\n          classString={classNames?.cardTitle}\n          {...pickDefined({\n            color: theme?.cardTitleColor || theme?.titleColor,\n          })}\n        />\n        {(canExpand || textOverlay) && (\n          <ButtonWrapper>\n            {textOverlay ? (\n              <button\n                onClick={(e) => {\n                  e.stopPropagation();\n                  toggleMinimize();\n                }}\n                className={textOverlayButton}\n                style={\n                  theme\n                    ? assignInlineVars({\n                        [gradientVar]:\n                          theme?.primary || theme?.cardBgColor || '',\n                      })\n                    : undefined\n                }\n                aria-label={\n                  isMinimized ? 'Expand text overlay' : 'Minimize text overlay'\n                }\n                title={\n                  isMinimized ? 'Expand text overlay' : 'Minimize text overlay'\n                }\n                type=\"button\"\n              >\n                <div style={{ width: '16px', height: '16px' }}>\n                  {isMinimized ? <PlusIcon /> : <MinusIcon />}\n                </div>\n              </button>\n            ) : canExpand ? (\n              <>\n                <ShowOrHideTextButtonMemo\n                  onToggle={toggleText}\n                  show={showText}\n                  textOverlay\n                  theme={theme}\n                />\n                <ExpandButtonMemo\n                  theme={theme}\n                  expanded={expandDetails}\n                  onExpand={toggleExpand}\n                  textOverlay\n                />\n              </>\n            ) : null}\n          </ButtonWrapper>\n        )}\n      </div>\n      {showText && !isMinimized && (\n        <SubTitleMemo\n          content={content}\n          fontSize={fontSizes?.cardSubtitle}\n          classString={classNames?.cardSubTitle}\n          padding\n          theme={theme}\n          {...pickDefined({\n            color: theme?.cardSubtitleColor,\n          })}\n        />\n      )}\n      {canShowTextMemo && detailsText && !isMinimized && (\n        <DetailsTextMemo\n          theme={theme}\n          show={showText}\n          expand={expandDetails}\n          text={detailsText}\n          onRender={onDetailsTextRef}\n          textOverlay={textOverlay}\n        />\n      )}\n    </div>\n  ) as React.ReactElement;\n};\n\n// Export the memoized component\nexport const ContentDisplay = ContentDisplayComponent;\n\n// Add display name for DevTools\nContentDisplay.displayName = 'ContentDisplay';\n","import { CardMediaModel } from '@models/TimelineMediaModel';\nimport cls from 'classnames';\nimport React, { memo, useCallback } from 'react';\nimport { mediaEqual } from '@utils/comparison';\nimport { useTimelineContext } from '../../contexts';\nimport {\n  mediaWrapper,\n  justifyEnd,\n  justifyStart,\n} from './timeline-card-media.css';\nimport { useMediaLoad } from './hooks/useMediaLoad';\nimport { useYouTubeDetection } from './hooks/useYouTubeDetection';\nimport { useToggleControls } from './hooks/useToggleControls';\nimport { useViewOptions } from './hooks/useViewOptions';\nimport { MediaContent } from './components/MediaContent';\nimport { ContentDisplay } from './components/ContentDisplay';\n\n/**\n * CardMedia component - A highly optimized component for media rendering in timeline cards\n */\nconst CardMedia: React.FunctionComponent<CardMediaModel> = memo(\n  ({\n    active,\n    id,\n    onMediaStateChange,\n    title,\n    content,\n    media,\n    slideshowActive,\n    url,\n    detailsText,\n  }: CardMediaModel) => {\n    // Custom hooks for state management\n    const { loadFailed, mediaLoaded, handleMediaLoaded, handleError } =\n      useMediaLoad(id || '', onMediaStateChange);\n    const isYouTube = useYouTubeDetection(media.source.url);\n    const { expandDetails, showText, toggleExpand, toggleText } =\n      useToggleControls();\n\n    // Use unified timeline context\n    const {\n      theme,\n      mode,\n      cardHeight,\n      borderLessCards,\n      mediaHeight,\n      textOverlay,\n      mediaSettings,\n      // consume from context rather than placeholders\n      fontSizes,\n      classNames,\n      isDarkMode,\n    } = useTimelineContext();\n\n    // Use view options hook for calculated values\n    const {\n      canShowTextMemo,\n      canShowTextContent,\n      canExpand,\n      gradientColor,\n      canShowGradient,\n      getCardHeight,\n    } = useViewOptions({\n      showText,\n      expandDetails,\n      textOverlay,\n      detailsText: detailsText as React.ForwardRefExoticComponent<any>,\n      title,\n      content,\n      theme,\n      cardHeight,\n      mediaHeight,\n    });\n\n    // Cast mode to TimelineMode\n    const timelineMode = mode;\n\n    // Details text callback\n    const onDetailsTextRef = useCallback((height?: number) => {\n      if (height) {\n        // Do something with height if needed\n      }\n    }, []);\n\n    return (\n      <>\n        <div\n          className={cls(\n            mediaWrapper,\n            'card-media-wrapper',\n            classNames?.cardMedia,\n            mediaSettings?.align === 'right' ? justifyEnd : justifyStart,\n          )}\n          style={{\n            height: textOverlay ? 'calc(100% - 1em)' : 0,\n            minHeight: getCardHeight,\n          }}\n        >\n          <MediaContent\n            media={media}\n            isYouTube={isYouTube}\n            loadFailed={loadFailed}\n            mediaLoaded={mediaLoaded}\n            active={active || false}\n            id={id || ''}\n            mediaHeight={mediaHeight}\n            mode={timelineMode}\n            borderLessCards={borderLessCards}\n            mediaSettings={mediaSettings}\n            handleMediaLoaded={handleMediaLoaded}\n            handleError={handleError}\n            onMediaStateChange={onMediaStateChange}\n          />\n        </div>\n\n        {canShowTextContent && (\n          <ContentDisplay\n            mode={timelineMode}\n            textOverlay={textOverlay}\n            theme={theme}\n            expandDetails={expandDetails}\n            showText={showText}\n            canExpand={canExpand}\n            canShowGradient={canShowGradient}\n            gradientColor={gradientColor}\n            title={title}\n            active={active || false}\n            url={url || ''}\n            fontSizes={fontSizes}\n            classNames={classNames}\n            toggleText={toggleText}\n            toggleExpand={toggleExpand}\n            content={content}\n            canShowTextMemo={canShowTextMemo}\n            detailsText={detailsText}\n            onDetailsTextRef={onDetailsTextRef}\n          />\n        )}\n      </>\n    ) as React.ReactElement;\n  },\n  (prevProps, nextProps) => {\n    // Only compare props that this component actually uses/render depends on\n    return (\n      prevProps.active === nextProps.active &&\n      prevProps.slideshowActive === nextProps.slideshowActive &&\n      prevProps.id === nextProps.id &&\n      prevProps.title === nextProps.title &&\n      prevProps.url === nextProps.url &&\n      prevProps.content === nextProps.content &&\n      prevProps.detailsText === nextProps.detailsText &&\n      mediaEqual(prevProps.media, nextProps.media)\n    );\n  },\n);\n\nCardMedia.displayName = 'Card Media';\n\nexport default CardMedia;\n","import { FunctionComponent, PointerEvent, useCallback, useMemo } from 'react';\nimport { useTimelineContext } from '../../contexts';\nimport ChevronIcon from '../../icons/chev-right';\nimport { ContentFooterProps } from './header-footer.model';\nimport {\n  chevronIconWrapper,\n  showMoreButton,\n} from './timeline-card-content.css';\n\n/**\n * ContentFooter\n *\n * A functional component that renders the footer of the timeline card.\n * It displays the read more/less button, progress bar, and triangle icon.\n * The read more/less button appears only if the content is large.\n * The progress bar and triangle icon are displayed only if the card is in slideshow mode.\n *\n * @property {boolean} showProgressBar - Determines if progress bar should be displayed.\n * @property {Function} onExpand - Function called when expanding content.\n * @property {string} triangleDir - Direction of the triangle icon.\n * @property {boolean} showMore - Determines if 'read more' should be displayed.\n * @property {boolean} textContentIsLarge - Determines if text content is large.\n * @property {boolean} showReadMore - Determines if 'read more' button should be displayed.\n * @property {number} remainInterval - Remaining interval for progress bar.\n * @property {boolean} paused - Determines if progress is paused.\n * @property {number} startWidth - Starting width of progress bar.\n * @property {boolean} canShow - Determines if the element can be shown.\n * @property {React.RefObject} progressRef - Ref to the progress bar.\n * @property {boolean} isNested - Determines if component is nested.\n * @property {boolean} isResuming - Determines if slideshow is resuming.\n *\n * @returns {JSX.Element} ContentFooter component.\n */\nconst ContentFooter: FunctionComponent<ContentFooterProps> = ({\n  onExpand,\n  showMore,\n  textContentIsLarge,\n  showReadMore,\n  canShow,\n  buttonClassName,\n  iconWrapperClassName,\n}: ContentFooterProps) => {\n  const { theme } = useTimelineContext();\n\n  const handleClick = useCallback(\n    (ev: PointerEvent) => {\n      ev.stopPropagation();\n      ev.preventDefault();\n      onExpand();\n    },\n    [onExpand],\n  );\n\n  const canShowMore = useMemo(() => {\n    // Show read more button when:\n    // 1. The feature is enabled (showReadMore)\n    // 2. The text is large enough OR we're already in expanded state\n    // 3. We have actual content to show (canShow)\n    return showReadMore && canShow && (textContentIsLarge || showMore);\n  }, [showReadMore, textContentIsLarge, canShow, showMore]);\n\n  return (\n    <>\n      {canShowMore ? (\n        <button\n          className={buttonClassName || showMoreButton}\n          onPointerDown={handleClick}\n          onKeyUp={(event) => {\n            if (event.key === 'Enter') {\n              onExpand();\n            }\n          }}\n          tabIndex={0}\n        >\n          {<span>{showMore ? 'read less' : 'read more'}</span>}\n          <span className={iconWrapperClassName || chevronIconWrapper}>\n            <ChevronIcon />\n          </span>\n        </button>\n      ) : null}\n    </>\n  );\n};\n\nexport { ContentFooter };\n","import { FunctionComponent, memo, useMemo } from 'react';\nimport { useTimelineContext } from '../../contexts';\nimport { SubTitleMemo } from '../memoized/subtitle-memo';\nimport { TitleMemo } from '../memoized/title-memo';\nimport { ContentHeaderProps } from './header-footer.model';\nimport { timelineCardHeader } from './timeline-card-content.css';\nimport { pickDefined } from '../../../utils/propUtils';\n// Styled component removed in VE migration\n\n/**\n * ContentHeader component\n * This component renders the header of the timeline card including the title and subtitle.\n * It doesn't render the title and subtitle if the card has media.\n * The title and subtitle are memoized to prevent unnecessary re-renders.\n *\n * @property {string} title - The title of the card.\n * @property {string} url - The URL of the card.\n * @property {boolean} media - Indicates whether the card has media or not.\n * @property {string} content - The main content of the card.\n * @returns {JSX.Element} The ContentHeader component.\n */\nconst ContentHeader: FunctionComponent<ContentHeaderProps> = memo(\n  ({ title, url, media, content, cardTitle }: ContentHeaderProps) => {\n    // Using context to get global values\n    const { fontSizes, classNames, theme, isMobile, semanticTags } =\n      useTimelineContext();\n\n    const isNotMedia = useMemo(() => !media, [media]);\n\n    return (\n      <header className={timelineCardHeader}>\n        {/* Render mobile title only if cardTitle exists */}\n        {isMobile && cardTitle ? (\n          <h3\n            style={{\n              fontSize: '1.5rem',\n              color: theme?.cardTitleColor || theme?.titleColor,\n              margin: 0,\n              fontWeight: 600,\n              lineHeight: 1.4,\n            }}\n          >\n            {cardTitle}\n          </h3>\n        ) : null}\n\n        {isNotMedia ? (\n          <TitleMemo\n            title={title}\n            theme={theme}\n            url={url || ''}\n            fontSize={fontSizes?.cardTitle || ''}\n            classString={classNames?.cardTitle || ''}\n            {...pickDefined({\n              color: theme?.cardTitleColor || theme?.titleColor,\n            })}\n          />\n        ) : null}\n\n        {/* Render subtitle if there is no media */}\n\n        {isNotMedia ? (\n          <SubTitleMemo\n            content={content}\n            theme={theme}\n            fontSize={fontSizes?.cardSubtitle || ''}\n            classString={classNames?.cardSubTitle || ''}\n            {...pickDefined({\n              color: theme?.cardSubtitleColor,\n            })}\n          />\n        ) : null}\n      </header>\n    );\n  },\n);\n\n// Setting display name for easier debugging\nContentHeader.displayName = 'ContentHeader';\n\nexport { ContentHeader };\n","import { TimelineContentModel } from '@models/TimelineContentModel';\nimport { TimelineProps } from '@models/TimelineModel';\nimport { Theme } from '@models/Theme';\nimport {\n  ForwardRefExoticComponent,\n  ReactNode,\n  forwardRef,\n  useMemo,\n} from 'react';\nimport xss from 'xss';\nimport { useTimelineContext } from '../../contexts';\nimport {\n  timelineContentDetails,\n  timelineSubContent,\n} from './timeline-card-content.css';\nimport { vars } from 'src/styles/tokens.css';\n\n// Define the type for the TextOrContentModel\nexport type TextOrContentModel = Pick<\n  TimelineContentModel,\n  'timelineContent' | 'theme' | 'detailedText'\n> & {\n  showMore?: boolean;\n};\n\n// Function to render an array of text\nconst renderTextArray: (\n  p: Pick<TimelineProps, 'parseDetailsAsHTML' | 'fontSizes' | 'theme'> & {\n    cardTextClassName: string;\n    detailedText: (string | ReactNode)[];\n    isDarkMode?: boolean;\n  },\n) => ReactNode = ({\n  fontSizes,\n  parseDetailsAsHTML,\n  theme,\n  detailedText,\n  cardTextClassName,\n  isDarkMode,\n}) => {\n  return detailedText.map((text, index) => {\n    // Only apply xss if text is a string\n    const props =\n      parseDetailsAsHTML && typeof text === 'string'\n        ? {\n            dangerouslySetInnerHTML: {\n              __html: xss(text),\n            },\n          }\n        : null;\n    return (\n      <span\n        className={`${timelineSubContent} ${cardTextClassName ?? ''}`}\n        key={`timeline-text-${typeof text === 'string' ? text.substring(0, 10) : ''}-${index}`}\n        style={{\n          color:\n            theme?.cardDetailsColor ||\n            'var(--vep-color-cardDetails, var(--timeline-text-color, currentColor))',\n        }}\n        {...props}\n      >\n        {parseDetailsAsHTML ? null : text}\n      </span>\n    );\n  });\n};\n\n// Function to get the TextOrContent component\nconst getTextOrContent: (\n  p: TextOrContentModel,\n) => ForwardRefExoticComponent<TextOrContentModel> = ({\n  timelineContent,\n  theme,\n  detailedText,\n  showMore,\n}) => {\n  const TextOrContent = forwardRef<HTMLParagraphElement, TextOrContentModel>(\n    (prop, ref) => {\n      const isTextArray = Array.isArray(detailedText);\n      const {\n        fontSizes,\n        classNames,\n        parseDetailsAsHTML,\n        textContentDensity,\n        isDarkMode,\n      } = useTimelineContext();\n\n      const shouldNotShowText = useMemo(() => {\n        return (\n          (parseDetailsAsHTML && !isTextArray) || textContentDensity === 'LOW'\n        );\n      }, [isTextArray, parseDetailsAsHTML, textContentDensity]);\n\n      // Generate the text content based on detailedText\n      const getTextContent = () => {\n        if (!isTextArray) {\n          return parseDetailsAsHTML && typeof detailedText === 'string'\n            ? xss(detailedText)\n            : detailedText;\n        }\n\n        return renderTextArray({\n          cardTextClassName: classNames?.cardText || '',\n          detailedText: detailedText as (string | ReactNode)[],\n          fontSizes,\n          parseDetailsAsHTML,\n          theme: theme || ({} as Theme),\n          isDarkMode,\n        });\n      };\n\n      // Create props for HTML content if needed\n      const getTextContentProps = (textContent: string) => {\n        if (parseDetailsAsHTML && !isTextArray) {\n          return {\n            dangerouslySetInnerHTML: {\n              __html: xss(textContent),\n            },\n          };\n        }\n        return {};\n      };\n\n      const renderDetailedContent = (textContent: string) => {\n        const textContentProps = getTextContentProps(textContent);\n\n        return (\n          <p\n            className={\n              timelineContentDetails + ' ' + (showMore ? 'active' : '')\n            }\n            ref={ref as any}\n            {...textContentProps}\n            style={{\n              color: `${vars.color.cardTitle} !important`, // Ensure color is applied correctly\n              // color: theme?.cardDetailsColor || 'var(--vep-color-cardDetails, var(--timeline-text-color, currentColor))'\n            }}\n          >\n            {shouldNotShowText ? null : textContent}\n          </p>\n        );\n      };\n\n      const renderTimelineContent = () => {\n        if (timelineContent) {\n          return <div ref={ref}>{timelineContent}</div>;\n        }\n\n        const textContent = getTextContent();\n        if (!textContent) return null;\n\n        // If detailedText was an array, render the array of spans directly as children\n        if (isTextArray) {\n          return (\n            <p\n              className={\n                timelineContentDetails + ' ' + (showMore ? 'active' : '')\n              }\n              ref={ref as any}\n              style={{\n                color: `${vars.color.text} !important`, // Ensure color is applied correctly\n                // color: theme?.cardDetailsColor || 'var(--vep-color-cardDetails, var(--timeline-text-color, currentColor))'\n              }}\n            >\n              {shouldNotShowText ? null : textContent}\n            </p>\n          );\n        }\n\n        // Non-array case: render as string/HTML as appropriate\n        return renderDetailedContent(String(textContent));\n      };\n\n      return renderTimelineContent();\n    },\n  );\n\n  TextOrContent.displayName = 'Text Or Content';\n\n  return TextOrContent;\n};\n\nexport { getTextOrContent };\n","import { forwardRef } from 'react';\nimport { useTimelineContext } from '../../contexts';\nimport { DetailsTextProps } from './details-text.model';\nimport { getTextOrContent } from './text-or-content';\nimport { contentDetailsWrapper } from './timeline-card-content.css';\nimport { vars } from 'src/styles/tokens.css';\n\nconst DetailsText = forwardRef<HTMLDivElement, DetailsTextProps>(\n  (prop, ref) => {\n    const {\n      showMore,\n      cardActualHeight,\n      detailsHeight,\n      gradientColor,\n      customContent,\n      timelineContent,\n      detailedText,\n      contentDetailsClass,\n    } = prop;\n\n    const {\n      useReadMore,\n      borderLessCards,\n      contentDetailsHeight,\n      textOverlay,\n      theme,\n    } = useTimelineContext();\n\n    const TextContent = getTextOrContent({\n      detailedText,\n      showMore: showMore || false,\n      theme,\n      timelineContent,\n    });\n\n    return (\n      <>\n        {/* detailed text */}\n        <div\n          aria-expanded={showMore}\n          className={contentDetailsClass + ' ' + contentDetailsWrapper}\n          ref={ref}\n          style={{\n            overflowY: showMore ? 'auto' : 'hidden',\n            width: borderLessCards ? 'calc(100% - 0.5rem)' : '100%',\n            background: `${vars.color.cardBg}`,\n            // background: theme?.cardDetailsBackGround || theme?.cardBgColor,\n            // Ensure custom scrollbar color reflects theme primary color for tests and styling parity\n            // scrollbarColor: `${theme?.primary} default` as unknown as string,\n            maxHeight: !useReadMore\n              ? 'none'\n              : showMore\n                ? '1000px'\n                : `${contentDetailsHeight ?? 150}px`,\n          }}\n        >\n          {customContent ?? (\n            <TextContent\n              {...{\n                detailedText,\n                showMore: showMore || false,\n                theme,\n                timelineContent,\n              }}\n            />\n          )}\n        </div>\n      </>\n    );\n  },\n);\n\nDetailsText.displayName = 'Details Text';\n\nexport { DetailsText };\n","import React, { useMemo } from 'react';\nimport { useTimelineContext } from '../../contexts';\nimport TimelineCard from '../timeline-card-content/timeline-card-content';\nimport { vars } from '../../../styles/tokens.css';\n\ninterface NestedTimelineCardsProps {\n  items: any[];\n  nestedCardHeight?: number;\n}\n\n/**\n * Specialized component for rendering nested timelines as simple cards\n * with a center connecting line instead of a full timeline layout\n */\nconst NestedTimelineCards: React.FC<NestedTimelineCardsProps> = ({\n  items,\n  nestedCardHeight,\n}) => {\n  const { isDarkMode } = useTimelineContext();\n\n  // Memoize container styles\n  const containerStyles = useMemo(\n    () => ({\n      position: 'relative' as const,\n      display: 'flex',\n      flexDirection: 'column' as const,\n      gap: '1rem',\n      padding: '1rem 0',\n    }),\n    [],\n  );\n\n  // Memoize center line styles\n  const centerLineStyles = useMemo(\n    () => ({\n      position: 'absolute' as const,\n      left: '50%',\n      top: '0',\n      bottom: '0',\n      width: '2px',\n      background: vars.color.primary,\n      transform: 'translateX(-50%)',\n      zIndex: 1,\n    }),\n    [],\n  );\n\n  // Memoize item wrapper styles\n  const itemWrapperStyles = useMemo(\n    () => ({\n      position: 'relative' as const,\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center',\n      zIndex: 2,\n    }),\n    [],\n  );\n\n  // Memoize card container styles\n  const cardContainerStyles = useMemo(\n    () => ({\n      width: '100%',\n      maxWidth: '600px',\n      background: vars.color.nestedCardBg,\n      border: `1px solid ${vars.color.buttonBorder}`,\n      borderRadius: '8px',\n      padding: '1rem',\n      boxShadow: isDarkMode\n        ? '0 2px 4px rgba(0, 0, 0, 0.3)'\n        : '0 2px 4px rgba(0, 0, 0, 0.1)',\n      position: 'relative' as const,\n    }),\n    [],\n  );\n\n  // Memoize title styles\n  const titleStyles = useMemo(\n    () => ({\n      margin: '0 0 0.5rem 0',\n      color: vars.color.nestedCardTitle,\n      fontSize: '1.1rem',\n      fontWeight: '600',\n    }),\n    [],\n  );\n\n  // Memoize subtitle styles\n  const subtitleStyles = useMemo(\n    () => ({\n      margin: '0 0 0.75rem 0',\n      color: vars.color.nestedCardSubtitle,\n      fontSize: '0.95rem',\n    }),\n    [],\n  );\n\n  // Memoize details text styles with nested card height\n  const getDetailsStyles = useMemo(\n    () => ({\n      color: vars.color.nestedCardDetails,\n      fontSize: '0.9rem',\n      lineHeight: '1.5',\n      ...(nestedCardHeight && {\n        maxHeight: `${nestedCardHeight}px`,\n        overflow: 'auto' as const,\n      }),\n    }),\n    [nestedCardHeight],\n  );\n\n  // Memoize link styles\n  const linkStyles = useMemo(\n    () => ({\n      display: 'inline-block',\n      marginTop: '0.75rem',\n      color: vars.color.primary,\n      textDecoration: 'none',\n      fontSize: '0.9rem',\n      fontWeight: '500',\n    }),\n    [],\n  );\n\n  if (!items || items.length === 0) {\n    return null;\n  }\n\n  return (\n    <div style={containerStyles}>\n      {/* Center connecting line */}\n      <div style={centerLineStyles} />\n\n      {/* Render nested timeline items as simple cards */}\n      {items.map((item, index) => (\n        <div key={item.id || index} style={itemWrapperStyles}>\n          {/* Card container */}\n          <div style={cardContainerStyles}>\n            {/* Card content */}\n            <div>\n              {item.cardTitle && <h3 style={titleStyles}>{item.cardTitle}</h3>}\n\n              {item.cardSubtitle && (\n                <p style={subtitleStyles}>{item.cardSubtitle}</p>\n              )}\n\n              {item.cardDetailedText && (\n                <div\n                  style={getDetailsStyles}\n                  dangerouslySetInnerHTML={{ __html: item.cardDetailedText }}\n                />\n              )}\n\n              {item.url && (\n                <a\n                  href={item.url}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  style={linkStyles}\n                >\n                  Learn more →\n                </a>\n              )}\n            </div>\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default NestedTimelineCards;\n","import React from 'react';\nimport NestedTimelineCards from './nested-timeline-cards';\n\ninterface NestedTimelineRendererProps {\n  items: any[];\n  nestedCardHeight?: number;\n  mode?: string;\n  isChild?: boolean;\n}\n\n/**\n * Renders nested timeline items using a card-based layout with center connecting line\n * instead of full timeline rendering to avoid complex nested timeline layouts\n */\nconst NestedTimelineRenderer: React.FC<NestedTimelineRendererProps> = ({\n  items,\n  nestedCardHeight,\n}) => {\n  // Always use the card-based layout for nested timelines\n  return (\n    <NestedTimelineCards\n      items={items}\n      {...(nestedCardHeight !== undefined && { nestedCardHeight })}\n    />\n  );\n};\n\nexport default NestedTimelineRenderer;\n","import { TimelineContentModel } from '@models/TimelineContentModel';\nimport { MediaState } from '@models/TimelineMediaModel';\nimport { hexToRGBA } from '@utils/index';\nimport { shallowEqual, arrayEqual, mediaEqual } from '@utils/comparison';\nimport cls from 'classnames';\nimport React, {\n  useCallback,\n  useContext,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport { useSlideshow } from '../../effects/useSlideshow';\nimport { useCardSize } from '../../../hooks/useCardSize';\nimport { useFocusManager } from '../../../hooks/useFocusManager';\nimport { useTimelineContext } from '../../contexts';\n// Remove the Timeline import to break the circular dependency\n// import Timeline from '../../timeline/timeline';\nimport CardMedia from '../timeline-card-media/timeline-card-media';\nimport { ContentFooter } from './content-footer';\nimport { ContentHeader } from './content-header';\nimport { DetailsText } from './details-text';\nimport { getTextOrContent } from './text-or-content';\nimport {\n  baseCard,\n  itemContentWrapper,\n  contentDetailsWrapper,\n  showMoreButton,\n  chevronIconWrapper,\n} from './timeline-card-content.css';\nimport { nestedTimelineWrapper } from '../../timeline-vertical/timeline-vertical.css';\nimport { SlideShowType } from '@models/TimelineModel';\nimport NestedTimelineRenderer from '../nested-timeline-renderer/nested-timeline-renderer';\n\n// Custom equality function for React.memo to prevent unnecessary re-renders\nconst arePropsEqual = (\n  prevProps: TimelineContentModel,\n  nextProps: TimelineContentModel,\n): boolean => {\n  // Always re-render if active state changes\n  if (prevProps.active !== nextProps.active) return false;\n  // If detailedText arrays are passed, compare structurally\n  if (\n    Array.isArray(prevProps.detailedText) ||\n    Array.isArray(nextProps.detailedText)\n  ) {\n    if (\n      !arrayEqual(prevProps.detailedText as any, nextProps.detailedText as any)\n    )\n      return false;\n  }\n\n  // Re-render if slideshow state changes\n  if (prevProps.slideShowActive !== nextProps.slideShowActive) return false;\n\n  // Re-render if hasFocus changes\n  if (prevProps.hasFocus !== nextProps.hasFocus) return false;\n\n  // Only re-render content-related props if they actually change\n  if (prevProps.content !== nextProps.content) return false;\n  // For non-array detailedText, compare by reference\n  if (\n    !Array.isArray(prevProps.detailedText) &&\n    !Array.isArray(nextProps.detailedText)\n  ) {\n    if (prevProps.detailedText !== nextProps.detailedText) return false;\n  }\n  if (prevProps.title !== nextProps.title) return false;\n  if (prevProps.cardTitle !== nextProps.cardTitle) return false;\n\n  // Efficient media comparison\n  if (!mediaEqual(prevProps.media, nextProps.media)) return false;\n\n  // Efficient theme comparison (shallow)\n  if (!shallowEqual(prevProps.theme, nextProps.theme)) return false;\n\n  // Efficient items comparison for nested timeline\n  if (!arrayEqual(prevProps.items, nextProps.items)) return false;\n\n  // Default to true - don't re-render\n  return true;\n};\n\nconst TimelineCardContent: React.FunctionComponent<TimelineContentModel> =\n  React.memo(\n    ({\n      active,\n      content,\n      detailedText,\n      id,\n      media,\n      onShowMore,\n      slideShowActive,\n      onElapsed,\n      theme,\n      onClick,\n      customContent,\n      hasFocus,\n      flip,\n      branchDir,\n      url,\n      timelineContent,\n      items,\n      isNested,\n      nestedCardHeight,\n      title,\n      cardTitle,\n      focusable,\n    }: TimelineContentModel) => {\n      const [showMore, setShowMore] = useState(false);\n      const detailsRef = useRef<HTMLDivElement | null>(null);\n      const progressRef = useRef<HTMLProgressElement | null>(null);\n      const isFirstRender = useRef(true);\n\n      // Use improved focus management\n      const containerRef = useFocusManager({\n        shouldFocus: !!hasFocus,\n        isActive: !!active,\n        preventScroll: true,\n        restoreFocus: true,\n      });\n\n      const [hasBeenActivated, setHasBeenActivated] = useState(false);\n      const [isResuming, setIsResuming] = useState(false);\n\n      // Use unified timeline context\n      // Note: theme is passed as a prop to this component, so we don't need it from context\n      const {\n        mode,\n        cardHeight,\n        useReadMore,\n        cardWidth,\n        borderLessCards,\n        highlightCardsOnHover,\n        textContentDensity,\n        textOverlay,\n        disableInteraction,\n        // Pull previously hard-coded values from context\n        slideItemDuration,\n        disableAutoScrollOnClick,\n        classNames,\n        slideShowType,\n        showProgressOnSlideshow,\n        isDarkMode,\n      } = useTimelineContext();\n\n      // Map textContentDensity to textDensity for backward compatibility\n      const textDensity = textContentDensity;\n\n      // Values now sourced from context above\n\n      const {\n        paused,\n        remainInterval,\n        startWidth,\n        tryPause,\n        setupTimer,\n        setStartWidth,\n      } = useSlideshow(\n        progressRef as unknown as React.RefObject<HTMLElement>,\n        !!active,\n        !!slideShowActive,\n        slideItemDuration,\n        id || '',\n        onElapsed,\n      );\n\n      const {\n        cardActualHeight,\n        detailsHeight,\n        textContentLarge,\n        updateCardSize,\n      } = useCardSize({\n        containerRef,\n        detailsRef,\n        setStartWidth,\n      });\n\n      // Memoize all calculated values to prevent re-renders\n      const canShowProgressBar = useMemo(() => {\n        return active && slideShowActive && showProgressOnSlideshow;\n      }, [active, slideShowActive, showProgressOnSlideshow]);\n\n      const canShowMore = useMemo(() => {\n        // Show read more functionality when:\n        // 1. We have detailed text content\n        // 2. The text is large enough to be truncated OR we're already in expanded state\n        return !!detailedText && (textContentLarge || showMore);\n      }, [detailedText, textContentLarge, showMore]);\n\n      const canShowReadMore = useMemo(() => {\n        return (\n          useReadMore && detailedText && !customContent && textDensity !== 'LOW'\n        );\n      }, [useReadMore, detailedText, customContent, textDensity]);\n\n      const canShowNestedTimeline = useMemo(() => {\n        return items && items.length > 0;\n      }, [items]);\n\n      const canShowDetailsText = useMemo(() => {\n        // Hide details when using text overlay with media, when density is LOW, otherwise show if content exists\n        return (\n          (detailedText ?? customContent ?? timelineContent) &&\n          !(textOverlay && media) &&\n          textDensity !== 'LOW'\n        );\n      }, [\n        detailedText,\n        customContent,\n        timelineContent,\n        textOverlay,\n        media,\n        textDensity,\n      ]);\n\n      // Initialize card size measurements when refs are ready\n      useEffect(() => {\n        // Use RAF to defer the initial measurement\n        const rafId = requestAnimationFrame(() => {\n          if (containerRef.current && detailsRef.current) {\n            updateCardSize(containerRef.current);\n          }\n        });\n\n        return () => cancelAnimationFrame(rafId);\n      }, [updateCardSize]);\n\n      // Remeasure card size when textDensity changes\n      useEffect(() => {\n        // When textDensity changes (e.g., from LOW to HIGH), we need to remeasure\n        // the card to update textContentLarge value\n        const rafId = requestAnimationFrame(() => {\n          if (containerRef.current && detailsRef.current) {\n            updateCardSize(containerRef.current);\n          }\n        });\n\n        return () => cancelAnimationFrame(rafId);\n      }, [textDensity, updateCardSize]);\n\n      // Reset details scroll position when toggling details\n      useEffect(() => {\n        const detailsEle = detailsRef.current;\n        if (detailsEle) {\n          detailsEle.scrollTop = 0;\n        }\n      }, [showMore]);\n\n      // Handle card activation\n      useEffect(() => {\n        if (active && !hasBeenActivated) {\n          setHasBeenActivated(true);\n        }\n      }, [active, hasBeenActivated]);\n\n      // Setup timer when card becomes active\n      useEffect(() => {\n        if (!slideItemDuration) {\n          return;\n        }\n\n        if (active && slideShowActive) {\n          setupTimer(slideItemDuration);\n        }\n\n        // Focus is now handled by useTimelineNavigation hook\n        // Only during keyboard navigation, not toolbar navigation\n\n        if (!slideShowActive) {\n          setHasBeenActivated(false);\n        }\n      }, [active, slideShowActive, slideItemDuration, hasFocus, setupTimer]);\n\n      // Focus management is now handled by useFocusManager hook\n\n      // Detect when resuming from pause\n      useEffect(() => {\n        if (!paused && !isFirstRender.current) {\n          setIsResuming(true);\n        }\n      }, [paused]);\n\n      // Track first render\n      useEffect(() => {\n        isFirstRender.current = false;\n\n        // Cleanup function\n        return () => {\n          isFirstRender.current = true;\n        };\n      }, []);\n\n      // Memoize handler functions\n      const handleMediaState = useCallback(\n        (state: MediaState) => {\n          if (!slideShowActive) {\n            return;\n          }\n          if (state.playing) {\n            // Pause slideshow when video starts playing\n            tryPause();\n          } else if (state.paused || state.ended) {\n            // Resume slideshow when video is paused or ends\n            // Continue to next slide immediately when video is paused/ended\n            if (id && onElapsed) {\n              onElapsed(id);\n            }\n          }\n        },\n        [slideShowActive, tryPause, id, onElapsed],\n      );\n\n      const handleCardClick = useCallback(\n        (event: React.MouseEvent) => {\n          event.stopPropagation(); // Prevent event bubbling to parent handlers\n\n          // Don't handle clicks if we're in slideshow mode or if already active\n          if (slideShowActive || active) return;\n\n          if (onClick && !disableInteraction) {\n            // Focus the card first\n            if (containerRef.current) {\n              containerRef.current.focus({ preventScroll: true });\n            }\n\n            // Then trigger the click handler which will handle scrolling\n            onClick(id || '');\n\n            // For horizontal modes, ensure the timeline point gets focus\n            if (mode === 'HORIZONTAL' || mode === 'HORIZONTAL_ALL') {\n              requestAnimationFrame(() => {\n                const point = document.querySelector(\n                  `button[data-testid=\"timeline-circle\"][data-item-id=\"${id}\"]`,\n                ) as HTMLButtonElement | null;\n                try {\n                  point?.focus?.({ preventScroll: true });\n                } catch {}\n              });\n            } else {\n              // For vertical modes, focus the row\n              requestAnimationFrame(() => {\n                const row = document.querySelector(\n                  `[data-testid=\"vertical-item-row\"][data-item-id=\"${id}\"]`,\n                ) as HTMLElement | null;\n                try {\n                  row?.focus?.({ preventScroll: true });\n                } catch {}\n              });\n            }\n          }\n        },\n        [onClick, id, disableInteraction, slideShowActive, active, mode],\n      );\n\n      const toggleShowMore = useCallback(() => {\n        if ((active && paused) || !slideShowActive) {\n          setShowMore((prev) => !prev);\n          onShowMore?.();\n          // Use setTimeout to ensure the DOM has updated before focusing\n          // Focus immediately without delay\n          requestAnimationFrame(() => {\n            if (containerRef.current) {\n              containerRef.current.focus({ preventScroll: true });\n              // Force focus styles to be visible\n              containerRef.current.classList.add('focus-visible');\n            }\n          });\n        }\n      }, [active, paused, slideShowActive, onShowMore]);\n\n      // Memoize computed values to prevent re-renders\n      const triangleDir = useMemo(() => {\n        if (mode === 'VERTICAL_ALTERNATING') {\n          return flip ? 'right' : 'left';\n        }\n        return null;\n      }, [mode, flip]);\n\n      const gradientColor = useMemo(() => {\n        return hexToRGBA(theme?.cardBgColor ?? '#fff', 0.4);\n      }, [theme?.cardBgColor]);\n\n      const contentDetailsClass = useMemo(() => {\n        return cls(\n          'card-description',\n          classNames?.cardText ?? '',\n          borderLessCards ? 'no-border' : '',\n        );\n      }, [classNames?.cardText, borderLessCards]);\n\n      // Get the accessible label for the card\n      const accessibleLabel = useMemo(() => {\n        return (\n          (typeof cardTitle === 'string' ? cardTitle : null) ??\n          (typeof title === 'string' ? title : null) ??\n          'Timeline card'\n        );\n      }, [cardTitle, title]);\n\n      // Create the detailsText component for text overlay mode using the proper function\n      const detailsTextComponent = useMemo(() => {\n        // Only create the component if we need it for text overlay mode\n        if (textOverlay && (detailedText ?? customContent ?? timelineContent)) {\n          return getTextOrContent({\n            timelineContent,\n            theme: theme!,\n            detailedText: detailedText!,\n            showMore,\n          });\n        }\n        return null;\n      }, [\n        textOverlay,\n        detailedText,\n        customContent,\n        timelineContent,\n        theme,\n        showMore,\n      ]);\n\n      // The card's minimum height\n      const cardMinHeight = useMemo(() => {\n        if (textOverlay && media) {\n          return cardHeight;\n        } else if (!isNested) {\n          return cardHeight;\n        } else {\n          return nestedCardHeight;\n        }\n      }, [textOverlay, media, isNested, cardHeight, nestedCardHeight]);\n\n      return (\n        <section\n          aria-label={accessibleLabel}\n          ref={containerRef}\n          onClick={handleCardClick}\n          className={`timeline-card-content ${active ? 'active' : ''} ${classNames?.card ?? ''} ${baseCard({ borderless: borderLessCards })} ${itemContentWrapper}`}\n          data-testid=\"timeline-card-content\"\n          data-item-id={id}\n          tabIndex={focusable !== false && active ? 0 : -1}\n          role=\"article\"\n          aria-current={active ? 'true' : 'false'}\n          onDoubleClick={toggleShowMore}\n          style={{\n            minHeight: customContent ? undefined : cardMinHeight,\n            height: customContent ? cardMinHeight : undefined,\n            maxWidth: cardWidth ? `${cardWidth}px` : '100%',\n          }}\n        >\n          {/* Only show the content header if we're not using text overlay mode with media */}\n          {(!textOverlay || !media) && (\n            <ContentHeader\n              title={title}\n              url={url || ''}\n              media={media as any}\n              content={content}\n              cardTitle={cardTitle}\n              theme={theme as any}\n            />\n          )}\n\n          {media && (\n            <CardMedia\n              active={!!active}\n              cardHeight={cardHeight}\n              content={content}\n              hideMedia={showMore}\n              id={id || ''}\n              media={media as any}\n              onMediaStateChange={handleMediaState}\n              slideshowActive={!!slideShowActive}\n              theme={theme as any}\n              title={typeof title === 'string' ? title : ''}\n              url={url || ''}\n              startWidth={startWidth}\n              detailsText={detailsTextComponent as any}\n              paused={paused}\n              remainInterval={remainInterval}\n              showProgressBar={!!canShowProgressBar}\n              triangleDir={triangleDir || ''}\n              resuming={isResuming}\n              progressRef={progressRef as any}\n            />\n          )}\n\n          {canShowDetailsText && (\n            <DetailsText\n              showMore={showMore}\n              gradientColor={gradientColor}\n              detailedText={detailedText}\n              customContent={customContent}\n              timelineContent={timelineContent}\n              contentDetailsClass={`${contentDetailsClass} ${contentDetailsWrapper}`}\n              cardActualHeight={cardActualHeight}\n              detailsHeight={detailsHeight}\n              ref={detailsRef}\n            />\n          )}\n\n          {canShowNestedTimeline && (\n            <div className={nestedTimelineWrapper}>\n              <NestedTimelineRenderer\n                items={items || []}\n                mode={'VERTICAL'}\n                nestedCardHeight={nestedCardHeight || 0}\n                isChild={true}\n              />\n            </div>\n          )}\n\n          {canShowReadMore && canShowMore && (\n            <ContentFooter\n              onExpand={toggleShowMore}\n              triangleDir={triangleDir || ''}\n              showMore={showMore}\n              textContentIsLarge={textContentLarge}\n              showReadMore={canShowReadMore}\n              remainInterval={remainInterval}\n              startWidth={startWidth}\n              canShow={!!detailedText}\n              isNested={!!isNested}\n              theme={theme as any}\n              buttonClassName={showMoreButton}\n              iconWrapperClassName={chevronIconWrapper}\n            />\n          )}\n        </section>\n      );\n    },\n    arePropsEqual,\n  );\n\nexport default TimelineCardContent;\n","import React, { useCallback, useMemo } from 'react';\nimport ReactDOM from 'react-dom';\nimport { wrapper as veCardWrapper } from '../timeline-horizontal-card.css';\nimport TimelineCardContent from '../../timeline-card-content/timeline-card-content';\nimport { pickDefined } from '../../../../utils/propUtils';\n\ninterface TimelineCardPortalProps {\n  containerClass: string;\n  contentRef: React.RefObject<HTMLDivElement>;\n  id: string;\n  theme?: any;\n  active: boolean;\n  disableInteraction: boolean;\n  showAllCardsHorizontal: boolean;\n  cardWidth?: number;\n  cardSubtitle?: string;\n  cardTitle?: string;\n  url?: string;\n  cardDetailedText?: string | string[];\n  slideShowRunning?: boolean;\n  media?: any;\n  onElapsed?: (id: string) => void;\n  customContent?: React.ReactNode;\n  hasFocus?: boolean;\n  onClick?: (id: string) => void;\n  timelineContent?: any;\n  isNested?: boolean;\n  nestedCardHeight?: number;\n  items?: any[];\n  wrapperId: string;\n}\n\nconst TimelineCardPortal: React.FC<TimelineCardPortalProps> = ({\n  containerClass,\n  contentRef,\n  id,\n  theme,\n  active,\n  disableInteraction,\n  showAllCardsHorizontal,\n  cardWidth,\n  cardSubtitle,\n  cardTitle,\n  url,\n  cardDetailedText,\n  slideShowRunning,\n  media,\n  onElapsed,\n  customContent,\n  hasFocus,\n  onClick,\n  timelineContent,\n  isNested,\n  nestedCardHeight,\n  items,\n  wrapperId,\n}) => {\n  const handleOnShowMore = useCallback(() => {}, []);\n\n  const Content = useMemo(() => {\n    return (\n      <div\n        className={`${containerClass} ${veCardWrapper} ${showAllCardsHorizontal || active ? 'highlight-active' : ''} ${active ? 'active' : ''}`}\n        ref={contentRef}\n        id={`timeline-card-${id}`}\n        tabIndex={-1}\n        style={{\n          minWidth:\n            cardWidth &&\n            (Number.isFinite(cardWidth) ? `${cardWidth}px` : undefined),\n          display: active || showAllCardsHorizontal ? 'flex' : 'none',\n          margin: showAllCardsHorizontal ? '0 1rem' : '0 auto',\n          transform: active ? 'scale(1.02)' : 'scale(1)',\n          transition: 'all 0.3s ease-in-out',\n          opacity: active ? 1 : showAllCardsHorizontal ? 0.7 : 0,\n          justifyContent: 'center',\n          alignItems: 'center',\n        }}\n      >\n        <TimelineCardContent\n          content={cardSubtitle}\n          active={active}\n          title={cardTitle}\n          detailedText={cardDetailedText}\n          onShowMore={handleOnShowMore}\n          theme={theme}\n          media={media}\n          id={id}\n          customContent={customContent}\n          focusable={false}\n          {...pickDefined({\n            url,\n            slideShowActive: slideShowRunning,\n            hasFocus,\n            onClick,\n            timelineContent,\n            isNested,\n            nestedCardHeight,\n            items,\n          })}\n          {...(onElapsed\n            ? { onElapsed: (id?: string) => id && onElapsed(id) }\n            : {})}\n        />\n      </div>\n    );\n  }, [\n    containerClass,\n    contentRef,\n    id,\n    active,\n    disableInteraction,\n    showAllCardsHorizontal,\n    cardWidth,\n    cardSubtitle,\n    cardTitle,\n    url,\n    cardDetailedText,\n    slideShowRunning,\n    theme,\n    media,\n    onElapsed,\n    customContent,\n    hasFocus,\n    onClick,\n    timelineContent,\n    isNested,\n    nestedCardHeight,\n    items,\n  ]);\n\n  const renderedPortal = useMemo(() => {\n    const ele = document.getElementById(wrapperId);\n    if (ele) {\n      return ReactDOM.createPortal(Content, ele);\n    }\n    return null;\n  }, [Content, wrapperId]);\n\n  return <>{renderedPortal}</>;\n};\n\nexport default TimelineCardPortal;\n","import { TimelineCardModel } from '@models/TimelineItemModel';\nimport React, { useMemo } from 'react';\nimport { useTimelineContext } from '../../contexts';\nimport TimelineItemTitle from '../timeline-item-title/timeline-card-title';\nimport {\n  wrapper,\n  timelineTitleContainer,\n} from './timeline-horizontal-card.css';\nimport { useTimelineCard } from './hooks/useTimelineCard';\nimport { pickDefined } from '../../../utils/propUtils';\nimport TimelinePoint from './timeline-point/timeline-point';\nimport TimelineCardPortal from './timeline-card-portal/timeline-card-portal';\n\nconst TimelineCard: React.FunctionComponent<TimelineCardModel> = ({\n  active,\n  autoScroll,\n  cardDetailedText,\n  cardSubtitle,\n  cardTitle,\n  url,\n  id,\n  media,\n  onClick,\n  onElapsed,\n  slideShowRunning,\n  title,\n  wrapperId,\n  customContent,\n  hasFocus,\n  iconChild,\n  timelineContent,\n  cardWidth,\n  isNested,\n  nestedCardHeight,\n  items,\n}: TimelineCardModel) => {\n  const {\n    mode,\n    cardPositionHorizontal: position,\n    timelinePointDimension,\n    cardLess,\n    showAllCardsHorizontal,\n    classNames,\n    theme,\n    timelinePointShape,\n    disableInteraction,\n  } = useTimelineContext();\n\n  const {\n    circleRef,\n    wrapperRef,\n    contentRef,\n    handleClick,\n    modeLower,\n    containerClass,\n    titleClass,\n    circleClass,\n    canShowTimelineContent,\n  } = useTimelineCard({\n    cardLess,\n    showAllCardsHorizontal,\n    mode: mode as\n      | 'HORIZONTAL'\n      | 'VERTICAL'\n      | 'VERTICAL_ALTERNATING'\n      | 'HORIZONTAL_ALL',\n    position,\n    iconChild,\n    ...pickDefined({\n      active,\n      autoScroll,\n      slideShowRunning,\n      id,\n      onClick,\n    }),\n  });\n\n  // Convert cardDetailedText to the expected string or string[] format\n  const formatDetailedText = () => {\n    if (Array.isArray(cardDetailedText)) {\n      return cardDetailedText.map((text) =>\n        typeof text === 'string' ? text : String(text ?? ''),\n      );\n    }\n\n    if (typeof cardDetailedText === 'string') {\n      return cardDetailedText;\n    }\n\n    return cardDetailedText ? String(cardDetailedText) : undefined;\n  };\n\n  const formattedDetailedText = formatDetailedText();\n\n  // Memoized timeline point props similar to vertical timeline implementation\n  const timelinePointProps = useMemo(\n    () => ({\n      circleClass,\n      handleClick,\n      circleRef: circleRef as React.RefObject<HTMLButtonElement>,\n      title: typeof title === 'string' ? title : String(title ?? ''),\n      theme,\n      timelinePointDimension,\n      timelinePointShape,\n      iconChild,\n      disabled: disableInteraction,\n      ...pickDefined({\n        active,\n        itemId: id,\n      }),\n    }),\n    [\n      circleClass,\n      handleClick,\n      circleRef,\n      title,\n      theme,\n      timelinePointDimension,\n      timelinePointShape,\n      iconChild,\n      disableInteraction,\n      active,\n      id,\n    ],\n  );\n\n  return (\n    <div\n      ref={wrapperRef}\n      className=\"timeline-horizontal-item\"\n      data-testid=\"timeline-item\"\n      style={{\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'flex-start',\n        width: '100%',\n        height: '100%',\n        position: 'relative',\n        gap: '1rem',\n      }}\n    >\n      {/* Timeline Point - Always at top */}\n      <div\n        className=\"timeline-point-section\"\n        style={{\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n          padding: '0.5rem',\n          zIndex: 10,\n          position: 'relative',\n        }}\n      >\n        <TimelinePoint {...timelinePointProps} />\n      </div>\n\n      {/* Card Content - Only show if conditions are met */}\n      {canShowTimelineContent && (\n        <div\n          className=\"timeline-card-section\"\n          style={{\n            display: 'flex',\n            justifyContent: 'center',\n            alignItems: 'center',\n            width: '100%',\n            flexGrow: 1,\n          }}\n        >\n          <TimelineCardPortal\n            containerClass={containerClass}\n            contentRef={contentRef as React.RefObject<HTMLDivElement>}\n            id={id || ''}\n            theme={theme}\n            active={active || false}\n            disableInteraction={disableInteraction}\n            showAllCardsHorizontal={showAllCardsHorizontal}\n            cardSubtitle={\n              typeof cardSubtitle === 'string'\n                ? cardSubtitle\n                : String(cardSubtitle ?? '')\n            }\n            cardTitle={\n              typeof cardTitle === 'string'\n                ? cardTitle\n                : String(cardTitle ?? '')\n            }\n            wrapperId={wrapperId}\n            {...pickDefined({\n              cardWidth,\n              url,\n              slideShowRunning,\n              media,\n              onElapsed,\n              customContent,\n              hasFocus,\n              onClick,\n              timelineContent,\n              isNested,\n              nestedCardHeight,\n              items,\n            })}\n            {...(formattedDetailedText\n              ? { cardDetailedText: formattedDetailedText }\n              : {})}\n          />\n        </div>\n      )}\n\n      {/* Title - Always at bottom */}\n      <div\n        className=\"timeline-title-section\"\n        style={{\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n          padding: '0.5rem',\n          minHeight: '3rem', // Ensure consistent spacing\n          position: 'relative',\n          zIndex: 5, // Above the line\n        }}\n      >\n        <TimelineItemTitle\n          title={title}\n          active={(active || false) && !disableInteraction}\n          theme={theme}\n          classString={classNames?.title || ''}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default TimelineCard;\n","import { TimelineHorizontalModel } from '@models/TimelineHorizontalModel';\nimport cls from 'classnames';\nimport React, {\n  ReactNode,\n  useContext,\n  useMemo,\n  useEffect,\n  useRef,\n} from 'react';\nimport { useTimelineContext } from '../contexts';\nimport { pickDefined } from '../../utils/propUtils';\nimport TimelineCard from '../timeline-elements/timeline-card/timeline-horizontal-card';\nimport {\n  timelineHorizontalWrapper,\n  timelineItemWrapper,\n} from './timeline-horizontal.css';\n\n/**\n * TimelineHorizontal\n * @property {TimelineHorizontalModel} items - The items to be displayed in the timeline.\n * @property {(item: TimelineItem) => void} handleItemClick - Function to handle item click.\n * @property {boolean} autoScroll - Whether to auto-scroll the timeline.\n * @property {string} wrapperId - The ID of the wrapper element.\n * @property {boolean} slideShowRunning - Whether the slideshow is running.\n * @property {() => void} onElapsed - Function to handle elapsed time.\n * @property {React.ReactNode} contentDetailsChildren - The children nodes for content details.\n * @property {boolean} hasFocus - Whether the timeline has focus.\n * @property {React.ReactNode} iconChildren - The children nodes for icons.\n * @property {number} nestedCardHeight - The height of the nested card.\n * @property {boolean} isNested - Whether the card is nested.\n * @returns {JSX.Element} The TimelineHorizontal component.\n */\n\nconst TimelineHorizontal: React.FunctionComponent<TimelineHorizontalModel> = ({\n  items,\n  handleItemClick,\n  autoScroll,\n  wrapperId,\n  slideShowRunning,\n  onElapsed,\n  contentDetailsChildren: children,\n  hasFocus,\n  iconChildren,\n  nestedCardHeight,\n  isNested,\n  mode: propMode,\n}: TimelineHorizontalModel) => {\n  // Use unified context\n  const {\n    theme,\n    mode: contextMode,\n    itemWidth,\n    cardHeight,\n    flipLayout,\n    showAllCardsHorizontal,\n    cardWidth,\n  } = useTimelineContext();\n\n  // Prioritize prop mode over context mode\n  const mode = propMode || contextMode;\n\n  // Memoize the wrapper class to avoid unnecessary re-renders\n  const wrapperClass = useMemo(\n    () =>\n      cls(\n        mode.toLowerCase(),\n        'timeline-horizontal-container',\n        showAllCardsHorizontal ? 'show-all-cards-horizontal' : '',\n      ),\n    [mode, showAllCardsHorizontal],\n  );\n\n  // Ref to the horizontal list to scope focus queries\n  const listRef = useRef<HTMLUListElement>(null);\n\n  // Find and focus the active timeline point button when items update\n  const activeId = useMemo(() => items.find((i) => i.active)?.id, [items]);\n\n  useEffect(() => {\n    if (!activeId) return;\n    // In both horizontal modes, focus the active point button if it exists\n    const root = listRef.current ?? document;\n    const activePoint = root.querySelector(\n      `button[data-testid=\"timeline-circle\"][data-item-id=\"${activeId}\"]`,\n    ) as HTMLButtonElement | null;\n    if (activePoint) {\n      requestAnimationFrame(() => {\n        try {\n          activePoint.focus({ preventScroll: false });\n        } catch (_) {\n          // ignore focus errors\n        }\n      });\n    }\n  }, [activeId]);\n\n  const iconChildColln = useMemo(\n    () => React.Children.toArray(iconChildren),\n    [iconChildren],\n  );\n\n  // Memoize the timeline items to prevent unnecessary re-renders\n  const timelineItems = useMemo(() => {\n    return items.map((item, index) => (\n      <li\n        key={item.id}\n        className={cls(\n          timelineItemWrapper,\n          item.visible || showAllCardsHorizontal ? 'visible' : '',\n          'timeline-horz-item-container',\n        )}\n        style={{\n          width: itemWidth,\n          minWidth: showAllCardsHorizontal ? itemWidth : undefined,\n          display: 'flex',\n          flexDirection: 'column',\n          alignItems: 'center',\n          justifyContent: 'flex-start',\n          height: '100%',\n        }}\n        aria-current={item.active ? 'true' : undefined}\n        id={`timeline-${mode.toLowerCase()}-item-${item.id}`}\n      >\n        <TimelineCard\n          // Always required props\n          onClick={handleItemClick}\n          autoScroll={autoScroll}\n          wrapperId={wrapperId}\n          theme={theme}\n          cardHeight={cardHeight}\n          cardWidth={cardWidth}\n          // Always provided props\n          title={item.title}\n          cardTitle={item.cardTitle}\n          cardSubtitle={item.cardSubtitle}\n          cardDetailedText={item.cardDetailedText}\n          customContent={children ? (children as ReactNode[])[index] : null}\n          iconChild={iconChildColln[index]}\n          // Conditionally provided props - clean approach\n          {...pickDefined({\n            id: item.id,\n            url: item.url,\n            media: item.media,\n            timelineContent: item.timelineContent,\n            items: item.items,\n            isNested: item.isNested,\n            hasNestedItems: item.hasNestedItems,\n            visible: item.visible,\n            active: item.active,\n            slideShowRunning: slideShowRunning,\n            onElapsed: onElapsed,\n            hasFocus: hasFocus,\n            nestedCardHeight: nestedCardHeight,\n          })}\n        />\n      </li>\n    ));\n  }, [\n    items,\n    itemWidth,\n    handleItemClick,\n    autoScroll,\n    wrapperId,\n    theme,\n    slideShowRunning,\n    cardHeight,\n    onElapsed,\n    children,\n    hasFocus,\n    iconChildren,\n    cardWidth,\n    isNested,\n    nestedCardHeight,\n  ]);\n\n  return (\n    <ul\n      ref={listRef}\n      className={`${timelineHorizontalWrapper} ${wrapperClass}`}\n      style={{\n        direction: flipLayout ? 'rtl' : 'ltr',\n        position: 'relative',\n      }}\n      data-testid=\"timeline-collection\"\n      aria-label=\"Timeline\"\n    >\n      {/* Horizontal line that runs between timeline points and titles */}\n      {/* <div\n        className=\"timeline-horizontal-connector\"\n        style={{\n          position: 'absolute',\n          top: '3.5rem', // Position between timeline points (1.5rem height + padding) and titles\n          left: '5%',\n          right: '5%',\n          height: '2px',\n          backgroundColor: theme?.primary || '#2563eb',\n          opacity: 0.2,\n          zIndex: 1,\n        }}\n      /> */}\n      {timelineItems}\n    </ul>\n  );\n};\n\nexport default TimelineHorizontal;\n","import { TimelinePointModel } from '@models/TimelineVerticalModel'; // Assuming model path\nimport cls from 'classnames'; // Utility for conditionally joining classNames\nimport React, {\n  memo, // Import memo for component optimization\n  useEffect,\n  useMemo,\n  useRef,\n  FunctionComponent, // Explicit import\n  MouseEvent,\n} from 'react';\nimport {\n  useTimelineStaticConfig,\n  useTimelineMemoizedObjects,\n} from '../contexts';\n// Using shape from veShape import below\nimport {\n  timelinePointContainer,\n  timelinePointWrapper,\n} from './timeline-vertical-shape.css';\nimport * as veShape from './timeline-vertical-shape.css'; // additive VE classes\n\n/**\n * Renders the circular point or icon on the timeline line for a vertical item.\n * Handles click events, active state highlighting, custom icons, and appearance\n * based on global theme and configuration settings. It uses React.memo for\n * performance optimization.\n *\n * @param {TimelinePointModel} props - The properties for the TimelinePoint component.\n * @returns {React.ReactElement} The rendered TimelinePoint component.\n */\nconst TimelinePoint: FunctionComponent<TimelinePointModel> = memo(\n  (props: TimelinePointModel) => {\n    const {\n      className, // 'left' or 'right' - passed to styled components\n      id, // Unique ID of the timeline item\n      onClick, // Callback function when the point is clicked\n      active, // Is this point currently active/highlighted?\n      onActive, // Callback function when the point should trigger the 'active' state calculation\n      slideShowRunning, // Is a slideshow currently active? (disables onClick)\n      iconChild, // Custom React node to display inside the point (replaces default shape)\n      timelinePointDimension, // Size (width/height) of the point\n      lineWidth, // Width of the timeline line connecting points\n      disableClickOnCircle, // Should clicks on the point be ignored?\n      cardLess, // Is the timeline in 'cardLess' mode?\n      isMobile, // Is the view currently mobile?\n    } = props;\n\n    // Ref to the button element representing the point\n    const circleRef = useRef<HTMLButtonElement>(null);\n\n    // Access context settings\n    const {\n      focusActiveItemOnLoad,\n      timelinePointShape,\n      disableTimelinePoint,\n      disableClickOnCircle: contextDisableClickOnCircle,\n      disableInteraction: contextDisableInteraction,\n      disableAutoScrollOnClick: contextDisableAutoScrollOnClick,\n    } = useTimelineStaticConfig();\n\n    const { theme, isDarkMode } = useTimelineMemoizedObjects();\n    const { buttonTexts } = useTimelineMemoizedObjects();\n\n    // Consolidated disable flags - prioritize props over context\n    const finalDisableClickOnCircle =\n      disableClickOnCircle ?? contextDisableClickOnCircle;\n    const finalDisableInteraction = contextDisableInteraction;\n    const finalDisableAutoScrollOnClick = contextDisableAutoScrollOnClick;\n\n    // Ref to track if this is the component's first render cycle\n    const isFirstRender = useRef(true);\n\n    /**\n     * Determines if the onActive callback should be invoked based on the active state\n     * and whether it's the initial render (controlled by focusActiveItemOnLoad).\n     */\n    const canInvokeOnActive = useMemo(() => {\n      // If focusing on load is enabled, invoke if active.\n      if (focusActiveItemOnLoad) {\n        return active;\n      }\n      // Otherwise, invoke only if active AND it's not the first render.\n      else {\n        return active && !isFirstRender.current;\n      }\n    }, [active, focusActiveItemOnLoad]); // Dependencies: active state and global setting\n\n    /**\n     * Effect to call the onActive callback when conditions are met.\n     * This usually happens when an item scrolls into view or is programmatically activated.\n     */\n    useEffect(() => {\n      if (canInvokeOnActive && onActive && circleRef.current) {\n        // Call the parent's onActive handler with the point's offsetTop\n        onActive(circleRef.current.offsetTop);\n      }\n      // Intentionally excluding onActive from dependencies if it's stable,\n      // otherwise, include it if it might change. Usually, it's stable.\n    }, [canInvokeOnActive, active]); // Re-run when activation condition or active state changes\n\n    /**\n     * Memoized CSS classes for the inner Shape component.\n     * Applies 'active' class and 'using-icon' if a custom icon is provided.\n     */\n    const circleClass = useMemo(\n      () =>\n        cls({\n          active: active, // Apply 'active' class if the point is active\n          'using-icon': !!iconChild, // Apply class if a custom icon is used\n        }),\n      [active, iconChild], // Dependencies: active state and presence of iconChild\n    );\n\n    /**\n     * Memoized click handler props for the TimelinePointContainer button.\n     * Only adds onClick if clicks are enabled and slideshow isn't running.\n     */\n    const clickHandlerProps = useMemo(() => {\n      // Return empty object (no click handler) if any disable condition is met\n      if (\n        finalDisableClickOnCircle ||\n        finalDisableInteraction ||\n        finalDisableAutoScrollOnClick\n      ) {\n        return {};\n      }\n\n      // Return props containing the onClick handler\n      return {\n        onClick: (ev: MouseEvent) => {\n          ev.stopPropagation(); // Prevent event bubbling up\n          // Call the provided onClick handler if it exists, passing the item ID\n          if (id && onClick && !slideShowRunning) {\n            onClick(id);\n          }\n        },\n      };\n    }, [\n      id,\n      onClick,\n      slideShowRunning,\n      finalDisableClickOnCircle,\n      finalDisableInteraction,\n      finalDisableAutoScrollOnClick,\n    ]); // Dependencies for the click logic\n\n    /**\n     * Effect to update the isFirstRender flag after the initial render is complete.\n     */\n    useEffect(() => {\n      // This effect runs only once after the initial mount\n      if (isFirstRender.current) {\n        isFirstRender.current = false;\n      }\n    }, []); // Empty dependency array ensures it runs only once\n\n    // Create an accessible label for the timeline point\n    const timelinePointLabel = useMemo(() => {\n      return (\n        buttonTexts?.timelinePoint ??\n        (active ? 'Active timeline point' : 'Timeline point')\n      );\n    }, [active, buttonTexts]);\n\n    // Render the timeline point structure\n    return (\n      <div\n        className={`${className} ${timelinePointWrapper}`}\n        style={{\n          ...(isMobile ? { width: '25%' } : { width: '10%' }),\n          ...(lineWidth !== undefined && {\n            '--line-width': `${lineWidth}px`,\n          }),\n        }}\n        data-testid=\"tree-leaf\"\n      >\n        <button\n          className={`${className} timeline-vertical-circle ${timelinePointContainer}`}\n          {...clickHandlerProps}\n          ref={circleRef}\n          data-testid=\"tree-leaf-click\"\n          aria-label={timelinePointLabel}\n          style={{\n            ...(disableTimelinePoint && { visibility: 'hidden' }),\n          }}\n          aria-disabled={\n            finalDisableClickOnCircle ||\n            finalDisableInteraction ||\n            finalDisableAutoScrollOnClick ||\n            disableTimelinePoint\n          }\n          disabled={\n            finalDisableClickOnCircle ||\n            finalDisableInteraction ||\n            finalDisableAutoScrollOnClick ||\n            disableTimelinePoint\n          }\n          tabIndex={\n            finalDisableClickOnCircle ||\n            finalDisableInteraction ||\n            finalDisableAutoScrollOnClick ||\n            disableTimelinePoint\n              ? -1\n              : 0\n          }\n        >\n          <div\n            className={`${circleClass} ${veShape.shape} ${\n              timelinePointShape === 'diamond' ? 'diamond' : ''\n            } ${active ? 'active' : ''} ${iconChild ? 'using-icon' : ''}`}\n            style={{\n              ...(timelinePointDimension !== undefined && {\n                width: `${timelinePointDimension}px`,\n                height: `${timelinePointDimension}px`,\n              }),\n              // Theme colors are now applied via CSS variables from computeCssVarsFromTheme\n            }}\n            aria-hidden=\"true\"\n          >\n            {iconChild}\n          </div>\n        </button>\n      </div>\n    ) as React.ReactElement;\n  },\n  // Use default shallow comparison for memoization.\n  // The previous custom comparison (prev.active === next.active && prev.isMobile === next.isMobile)\n  // was too restrictive and would prevent updates when other props like iconChild, theme, onClick, etc., changed.\n  // Default shallow comparison is generally safer unless profiling reveals a specific need for a custom function.\n);\n\n// Set display name for React DevTools\nTimelinePoint.displayName = 'TimelinePoint';\n\nexport { TimelinePoint }; // Export the component\n","import { VerticalItemModel } from '@models/TimelineVerticalModel';\nimport cls from 'classnames';\nimport {\n  useCallback,\n  useMemo,\n  useRef,\n  FunctionComponent,\n  ReactElement,\n} from 'react';\nimport { useTimelineContext } from '../contexts';\nimport TimelineCard from '../timeline-elements/timeline-card-content/timeline-card-content';\nimport TimelineItemTitle from '../timeline-elements/timeline-item-title/timeline-card-title';\nimport { TimelinePoint } from './timeline-point';\nimport {\n  timelineCardContentVisible,\n  timelineCardContentWrapper,\n  timelineTitleWrapper,\n  verticalItemWrapper,\n  verticalItemWrapperNested,\n} from './timeline-vertical.css';\nimport { pickDefined } from '../../utils/propUtils';\n\n/**\n * Represents a single item (row) in the vertical timeline.\n * It coordinates the display of the title, the central point/icon,\n * and the main content card based on the provided props and global context.\n *\n * @param {VerticalItemModel} props - The properties for the VerticalItem component.\n * @returns {JSX.Element} The rendered VerticalItem component.\n */\nconst VerticalItem: FunctionComponent<VerticalItemModel> = (\n  props: VerticalItemModel,\n): ReactElement => {\n  // Ref to the main list item element for calculating position/dimensions\n  const contentRef = useRef<HTMLLIElement>(null);\n\n  // Destructure all props for cleaner access\n  const {\n    active, // Is this item currently highlighted/active?\n    alternateCards, // Layout mode: alternate card sides?\n    cardDetailedText, // Detailed text content for the card\n    cardSubtitle, // Subtitle/main content for the card\n    cardTitle, // Title specifically for the card (distinct from the timeline item title)\n    url, // URL for navigation, potentially used by the card\n    className, // CSS class for the side ('left' or 'right')\n    contentDetailsChildren, // Custom React nodes for card details area\n    iconChild, // Custom React node for the timeline point/icon\n    hasFocus, // Does the card content have focus (e.g., for slideshow)?\n    id, // Unique ID for the item\n    media, // Media element (image/video) for the card\n    onActive, // Callback when item becomes active (e.g., scrolled into view)\n    onClick, // Callback when the item (or point) is clicked\n    onElapsed, // Callback when media finishes playing (if applicable)\n    slideShowRunning, // Is a slideshow currently active?\n    title, // Title for the timeline item itself (often a date or heading)\n    visible, // Is this item currently visible in the viewport?\n    timelineContent, // Custom React nodes for the main timeline content area\n    items, // Data for nested items (if any)\n    isNested, // Is this item part of a nested structure?\n    nestedCardHeight, // Specific height for nested cards\n  } = props;\n\n  // Extract only used context values to avoid unused variable warnings\n  const {\n    theme,\n    mode,\n    flipLayout,\n    lineWidth,\n    cardLess,\n    classNames,\n    timelinePointDimension,\n    disableClickOnCircle,\n    disableInteraction,\n    isMobile, // Use responsive detection from context\n  } = useTimelineContext();\n\n  // Helper functions for layout calculations\n  const calculateCardWidth = useCallback(() => {\n    if (alternateCards) {\n      return isMobile ? '75%' : '37.5%';\n    }\n    if (!title) {\n      return '95%';\n    }\n    return isMobile ? '75%' : '85%';\n  }, [alternateCards, isMobile, title]);\n\n  const calculateJustifyContent = useCallback(() => {\n    const flip = !alternateCards && flipLayout;\n    if (flip) return 'flex-end';\n    return className === 'left' ? 'flex-end' : 'flex-start';\n  }, [alternateCards, flipLayout, className]);\n\n  const calculateCardOrder = useCallback(() => {\n    if (alternateCards) {\n      // Alternating mode: left side = card first (1), right side = card last (3)\n      return className === 'left' ? 1 : 3;\n    }\n\n    if (flipLayout) {\n      // Vertical flip mode: card first (1)\n      return 1;\n    }\n\n    // Standard vertical mode: card last (3)\n    return 3;\n  }, [alternateCards, flipLayout, className]);\n\n  const calculateTitleOrder = useCallback(() => {\n    if (alternateCards) {\n      // Alternating mode: left side = title last (3), right side = title first (1)\n      return className === 'left' ? 3 : 1;\n    }\n\n    if (flipLayout) {\n      // Vertical flip mode: title last (3)\n      return 3;\n    }\n\n    // Standard vertical mode: title first (1)\n    return 1;\n  }, [alternateCards, flipLayout, className]);\n\n  const calculatePointOrder = useCallback(() => {\n    // Point is always in the middle (order 2) for all modes\n    return 2;\n  }, []);\n\n  /**\n   * Callback handler triggered by the TimelinePoint when it becomes active.\n   * Calculates the item's position and notifies the parent.\n   */\n  const handleOnActive = useCallback(\n    (offset: number) => {\n      if (contentRef.current && onActive) {\n        const { offsetTop, clientHeight } = contentRef.current;\n        onActive(offsetTop + offset, offsetTop, clientHeight);\n      }\n    },\n    [onActive],\n  );\n\n  /**\n   * Handler for the \"Read More\" action within the card.\n   * Recalculates position after content changes with a small delay.\n   */\n  const handleShowMore = useCallback(() => {\n    setTimeout(() => handleOnActive(0), 100);\n  }, [handleOnActive]);\n\n  // Memoized title display configuration\n  const titleConfig = useMemo(\n    () => ({\n      display:\n        (!title && mode === 'VERTICAL') || (isMobile && !alternateCards)\n          ? 'none'\n          : 'flex',\n      width: alternateCards ? '37.5%' : '10%',\n      // Fix text alignment for alternating mode:\n      // - Left side (title appears last): align left\n      // - Right side (title appears first): align right\n      textAlign: alternateCards\n        ? className === 'left'\n          ? 'left'\n          : 'right'\n        : ('right' as 'left' | 'right'),\n      align: (flipLayout && !alternateCards ? 'left' : 'right') as\n        | 'left'\n        | 'right',\n    }),\n    [title, mode, alternateCards, flipLayout, className, isMobile],\n  );\n\n  const titleClassName = useMemo(\n    () => `${timelineTitleWrapper} ${className} ${flipLayout ? 'flipped' : ''}`,\n    [className, flipLayout],\n  );\n\n  const Title = useMemo(\n    () => (\n      <div\n        className={titleClassName}\n        data-mode={mode}\n        style={{\n          display: titleConfig.display,\n          width: titleConfig.width,\n          order: calculateTitleOrder(),\n          // textAlign: titleConfig.textAlign,\n          // Add proper spacing for title\n          paddingLeft: alternateCards ? '0' : '0.75rem',\n          paddingRight: alternateCards ? '0' : '0.75rem',\n          marginRight: alternateCards && className === 'right' ? '1rem' : '0',\n          marginLeft: alternateCards && className === 'left' ? '1rem' : '0',\n        }}\n      >\n        <TimelineItemTitle\n          title={title as string}\n          theme={theme}\n          align={titleConfig.textAlign}\n          {...(active !== undefined\n            ? { active: active && !disableInteraction }\n            : {})}\n          {...pickDefined({\n            classString: classNames?.title,\n          })}\n        />\n      </div>\n    ),\n    [\n      titleClassName,\n      mode,\n      titleConfig.textAlign,\n      title,\n      active,\n      disableInteraction,\n      classNames?.title,\n      calculateTitleOrder,\n      alternateCards,\n      className,\n    ],\n  );\n\n  /**\n   * Memoized CSS classes for the main VerticalItemWrapper.\n   * Includes the side ('left'/'right'), visibility, and base class.\n   */\n  const verticalItemClass = useMemo(\n    () =>\n      cls(\n        'vertical-item-row',\n        { [className]: !!className },\n        { visible: visible },\n        { 'no-alt': !alternateCards },\n      ),\n    [className, visible, alternateCards],\n  );\n\n  /**\n   * Memoized CSS classes for the TimelineCardContentWrapper.\n   */\n  const contentClass = useMemo(\n    () =>\n      cls(\n        'card-content-wrapper', // Base class\n        { [className]: !!className }, // Add 'left' or 'right'\n        { visible: visible }, // Add 'visible' class\n      ),\n    [className, visible],\n  );\n\n  // TimelinePoint props configuration\n  const timelinePointProps = useMemo(\n    () => ({\n      className,\n      mode,\n      onActive: handleOnActive,\n      onClick: onClick || (() => {}),\n      isMobile,\n      ...pickDefined({\n        active,\n        alternateCards,\n        id,\n        slideShowRunning,\n        iconChild,\n        timelinePointDimension,\n        lineWidth,\n        disableClickOnCircle,\n        cardLess,\n      }),\n    }),\n    [\n      active,\n      alternateCards,\n      className,\n      id,\n      mode,\n      handleOnActive,\n      onClick,\n      slideShowRunning,\n      iconChild,\n      timelinePointDimension,\n      lineWidth,\n      disableClickOnCircle,\n      cardLess,\n      isMobile,\n    ],\n  );\n\n  const TimelinePointMemo = useMemo(\n    () => (\n      <div\n        style={{\n          order: calculatePointOrder(),\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'stretch',\n          minHeight: '100%',\n          width: alternateCards ? '10%' : '10%',\n          position: 'relative',\n          zIndex: -1,\n          // Add proper spacing margins\n          marginLeft: alternateCards ? '1rem' : '0.75rem',\n          marginRight: alternateCards ? '1rem' : '0.75rem',\n        }}\n      >\n        <TimelinePoint {...timelinePointProps} />\n      </div>\n    ),\n    [timelinePointProps, calculatePointOrder, alternateCards],\n  );\n\n  /**\n   * Determines if the title section should be rendered.\n   * Show title when there is a title text and it's not nested.\n   */\n  const canShowTitle = useMemo(() => {\n    // Show title if it exists and it's not a nested component\n    return !!title && !isNested;\n  }, [title, isNested]);\n\n  // Get a readable title for screen readers\n  const accessibleTitle = useMemo(() => {\n    if (typeof title === 'string') {\n      return title;\n    } else if (typeof cardTitle === 'string') {\n      return cardTitle;\n    } else {\n      return 'Timeline item';\n    }\n  }, [title, cardTitle]);\n\n  // Render the complete timeline item structure\n  return (\n    <li\n      className={`${verticalItemWrapper({\n        visible: visible !== false,\n        alignment: alternateCards\n          ? className === 'left'\n            ? 'left'\n            : 'right'\n          : 'center',\n        alternating: alternateCards,\n      })} ${verticalItemClass} ${isNested ? verticalItemWrapperNested : ''}`}\n      data-testid=\"vertical-item-row\"\n      data-item-id={id}\n      key={id}\n      ref={contentRef}\n      aria-current={active ? 'step' : undefined}\n      aria-label={accessibleTitle}\n      role=\"listitem\"\n      tabIndex={active ? 0 : -1}\n      aria-selected={active}\n    >\n      {/* Conditionally render the Title */}\n      {canShowTitle ? Title : null}\n\n      {/* Wrapper for the card content */}\n      <div\n        className={`${timelineCardContentWrapper} ${contentClass} ${visible ? timelineCardContentVisible : ''}`}\n        style={{\n          width: calculateCardWidth(),\n          justifyContent: calculateJustifyContent(),\n          order: calculateCardOrder(),\n          // Add proper spacing for card content\n          paddingLeft: alternateCards ? '0' : '0.75rem',\n          paddingRight: alternateCards ? '0' : '0.75rem',\n          marginLeft:\n            alternateCards && className === 'left'\n              ? '0'\n              : alternateCards && className === 'right'\n                ? '1rem'\n                : '0',\n          marginRight:\n            alternateCards && className === 'right'\n              ? '0'\n              : alternateCards && className === 'left'\n                ? '1rem'\n                : '0',\n        }}\n      >\n        {!cardLess && (\n          <TimelineCard\n            branchDir={className}\n            onShowMore={handleShowMore}\n            flip={!alternateCards && flipLayout}\n            {...pickDefined({\n              active,\n              content: cardSubtitle,\n              customContent: contentDetailsChildren,\n              detailedText: cardDetailedText as string | string[],\n              hasFocus,\n              id,\n              media,\n              onElapsed,\n              slideShowActive: slideShowRunning,\n              theme,\n              url,\n              timelineContent,\n              items,\n              isNested,\n              nestedCardHeight,\n              title: cardTitle as string,\n              cardTitle: title as string,\n            })}\n            {...(onClick && typeof onClick === 'function' ? { onClick } : {})}\n          />\n        )}\n      </div>\n\n      {/* Conditionally render the Timeline Point (hidden for nested items) */}\n      {!isNested ? TimelinePointMemo : null}\n    </li>\n  );\n};\n\n// Set display name for React DevTools\nVerticalItem.displayName = 'VerticalItem';\n\nexport default VerticalItem;\n","import { TimelineVerticalModel } from '@models/TimelineVerticalModel';\nimport {\n  useCallback,\n  FunctionComponent,\n  ReactNode,\n  memo,\n  useMemo,\n  ReactElement,\n} from 'react';\nimport { useTimelineContext } from '../contexts';\nimport TimelineVerticalItem from './timeline-vertical-item';\nimport { timelineVerticalWrapper } from './timeline-vertical.css';\nimport React from 'react';\n\n/**\n * Renders the main vertical timeline structure.\n * It maps over the provided `items` array and renders a `TimelineVerticalItem`\n * for each, handling layout variations (like alternating cards) and distributing\n * props and callbacks appropriately.\n *\n * @param {TimelineVerticalModel} props - The properties for the TimelineVertical component.\n * @returns {JSX.Element} The rendered TimelineVertical component.\n */\nconst TimelineVertical: FunctionComponent<TimelineVerticalModel> = memo(\n  ({\n    // Props with default values\n    alternateCards = true, // Default to alternating card layout on desktop\n    // Callbacks and data props\n    autoScroll, // Function to handle automatic scrolling when an item becomes active\n    contentDetailsChildren, // Optional array of custom nodes for each item's card details\n    hasFocus, // Does the timeline component itself have focus? (Passed down)\n    iconChildren, // Optional custom icon(s) for the timeline points\n    items, // Array of timeline item data objects\n    mode, // Timeline mode (e.g., VERTICAL, VERTICAL_ALTERNATING) - Used by children via context?\n    onClick, // Global click handler for items (passed down)\n    onElapsed, // Global handler for media elapsed events (passed down)\n    onOutlineSelection, // Handler for outline selection (potentially unused here, passed down?)\n    slideShowRunning, // Is a slideshow active? (Passed down)\n    theme, // Theme object (Used by children via context)\n    cardLess, // Render without cards? (Passed down)\n    nestedCardHeight, // Specific height for nested cards (Passed down)\n  }: TimelineVerticalModel): ReactElement => {\n    // Use responsive detection from context instead of hardcoding based on mode\n    // This enables proper responsive behavior for VERTICAL_ALTERNATING mode\n    const { isMobile } = useTimelineContext();\n\n    /**\n     * Callback handler passed to each TimelineVerticalItem's onActive.\n     * When an item becomes active (e.g., scrolls into view), this triggers the autoScroll function\n     * provided via props, allowing the parent component to scroll the timeline if needed.\n     * @param {number} offset - Vertical offset within the active item's point element.\n     * @param {number} wrapperOffset - The offsetTop of the active item's wrapper relative to the scroll parent.\n     * @param {number} height - The clientHeight of the active item's wrapper.\n     */\n    const handleOnActive = useCallback(\n      (offset: number, wrapperOffset: number, height: number) => {\n        // Call the autoScroll prop function if it exists\n        autoScroll?.({\n          contentHeight: height,\n          contentOffset: wrapperOffset,\n          pointOffset: offset,\n        });\n      },\n      [autoScroll], // Dependency: only recreate if autoScroll function changes\n    );\n\n    // Memoize the items rendering to avoid unnecessary recreations\n    const renderItems = useMemo(() => {\n      return items.map((item, index: number) => {\n        let itemClassName = ''; // CSS class for layout ('left' or 'right')\n\n        // Determine layout class based on mode and index\n        // In alternating mode on non-mobile views, alternate 'left' and 'right'\n        if (alternateCards && !isMobile) {\n          itemClassName = index % 2 === 0 ? 'left' : 'right';\n        }\n        // Otherwise (non-alternating or mobile), default to 'right'\n        else {\n          itemClassName = 'right';\n        }\n\n        // Extract specific content details node for this item, if provided\n        const contentDetails: ReactNode | null =\n          (contentDetailsChildren &&\n            Array.isArray(contentDetailsChildren) && // Ensure it's an array\n            contentDetailsChildren[index]) ?? // Get node at the current index\n          null;\n\n        // Determine the custom icon for this item\n        let customIcon: ReactNode | null = null;\n        if (Array.isArray(iconChildren)) {\n          // If iconChildren is an array, map icon to item by index\n          customIcon = iconChildren[index] ?? null;\n        } else if (iconChildren) {\n          // If iconChildren is a single node, apply it to all items\n          customIcon = iconChildren;\n        }\n\n        // Render the individual timeline item component\n        return (\n          <TimelineVerticalItem\n            key={item.id || index} // Add key prop for React list rendering\n            {...item} // Spread all properties from the item data object\n            // --- Pass down calculated or specific props ---\n            alternateCards={alternateCards} // Pass down the alternating mode flag\n            className={itemClassName} // Pass down the calculated 'left'/'right' class\n            contentDetailsChildren={contentDetails} // Pass down the specific content details node\n            iconChild={customIcon} // Pass down the specific icon node\n            hasFocus={!!hasFocus} // Pass down the focus state\n            index={index} // Pass down the item's index\n            onActive={handleOnActive} // Pass down the memoized active handler\n            onClick={onClick} // Pass down the global click handler\n            onElapsed={onElapsed || (() => {})} // Pass down the global elapsed handler\n            // Removed onShowMore as the handler was empty\n            slideShowRunning={!!slideShowRunning} // Pass down the slideshow state\n            cardLess={!!cardLess} // Pass down the cardLess flag\n            nestedCardHeight={nestedCardHeight ?? 0} // Pass down the nested card height\n          />\n        );\n      });\n    }, [\n      items,\n      isMobile,\n      alternateCards,\n      contentDetailsChildren,\n      iconChildren,\n      hasFocus,\n      handleOnActive,\n      onClick,\n      onElapsed,\n      slideShowRunning,\n      cardLess,\n      nestedCardHeight,\n    ]);\n\n    // Render the main timeline wrapper\n    return (\n      <ul\n        className={timelineVerticalWrapper}\n        data-testid=\"tree-main\"\n        data-cardless={cardLess}\n        role=\"list\"\n        aria-label=\"Timeline events\"\n      >\n        {renderItems}\n      </ul>\n    );\n  },\n);\n\n// Set display name for React DevTools\nTimelineVertical.displayName = 'TimelineVertical';\n\nexport default TimelineVertical;\n","import React from 'react';\nimport { TimelineMode } from '@models/TimelineModel';\nimport TimelineHorizontal from '../timeline-horizontal/timeline-horizontal';\nimport TimelineVertical from '../timeline-vertical/timeline-vertical';\nimport { Scroll } from '@models/TimelineHorizontalModel';\nimport {\n  outline as outlineStyle,\n  main as timelineMain,\n} from './timeline-new.css';\nimport { pickDefined } from '../../utils/propUtils';\n\ninterface TimelineViewProps {\n  timelineMode: string;\n  activeTimelineItem: number;\n  autoScroll: (scroll: Partial<Scroll>) => void;\n  contentDetailsChildren?: React.ReactNode;\n  hasFocus: boolean;\n  iconChildren?: React.ReactNode;\n  items: any[]; // Using any to avoid type conflicts\n  handleTimelineItemClick: (itemId?: string) => void;\n  handleTimelineItemElapsed: (itemId?: string) => void;\n  slideShowRunning?: boolean;\n  id: string;\n  theme?: any;\n  lineWidth?: number;\n  onOutlineSelection: (index: number) => void;\n  nestedCardHeight: number;\n}\n\nconst TimelineView: React.FC<TimelineViewProps> = ({\n  timelineMode,\n  activeTimelineItem,\n  autoScroll,\n  contentDetailsChildren,\n  hasFocus,\n  iconChildren,\n  items,\n  handleTimelineItemClick,\n  handleTimelineItemElapsed,\n  slideShowRunning,\n  id,\n  theme,\n  lineWidth,\n  onOutlineSelection,\n  nestedCardHeight,\n}) => {\n  // Horizontal Timeline (regular or \"all cards\" mode)\n  if (timelineMode === 'HORIZONTAL' || timelineMode === 'HORIZONTAL_ALL') {\n    return (\n      <>\n        <div\n          className={outlineStyle}\n          style={{\n            backgroundColor: theme?.primary,\n            height: `${lineWidth}px`,\n          }}\n        />\n        <TimelineHorizontal\n          autoScroll={autoScroll}\n          contentDetailsChildren={contentDetailsChildren}\n          handleItemClick={handleTimelineItemClick}\n          hasFocus={hasFocus}\n          iconChildren={iconChildren}\n          items={items}\n          mode={timelineMode as TimelineMode}\n          onElapsed={handleTimelineItemElapsed}\n          wrapperId={id}\n          nestedCardHeight={nestedCardHeight}\n          {...pickDefined({\n            slideShowRunning,\n          })}\n        />\n      </>\n    );\n  }\n\n  // Vertical Alternating Timeline\n  if (timelineMode === 'VERTICAL_ALTERNATING') {\n    return (\n      <TimelineVertical\n        activeTimelineItem={activeTimelineItem}\n        alternateCards={true}\n        autoScroll={autoScroll}\n        contentDetailsChildren={contentDetailsChildren}\n        hasFocus={hasFocus}\n        iconChildren={iconChildren}\n        items={items}\n        mode={timelineMode as TimelineMode}\n        onClick={handleTimelineItemClick}\n        onElapsed={handleTimelineItemElapsed}\n        onOutlineSelection={onOutlineSelection}\n        theme={theme}\n        nestedCardHeight={nestedCardHeight}\n        {...pickDefined({\n          slideShowRunning,\n        })}\n      />\n    );\n  }\n\n  // Vertical Timeline (default)\n  return (\n    <TimelineVertical\n      activeTimelineItem={activeTimelineItem}\n      alternateCards={false}\n      autoScroll={autoScroll}\n      contentDetailsChildren={contentDetailsChildren}\n      hasFocus={hasFocus}\n      iconChildren={iconChildren}\n      items={items}\n      mode={timelineMode as TimelineMode}\n      onClick={handleTimelineItemClick}\n      onElapsed={handleTimelineItemElapsed}\n      onOutlineSelection={onOutlineSelection}\n      theme={theme}\n      nestedCardHeight={nestedCardHeight}\n      {...pickDefined({\n        slideShowRunning,\n      })}\n    />\n  );\n};\n\nexport default React.memo(TimelineView);\n","import { TimelineModel } from '@models/TimelineModel';\nimport { getUniqueID } from '@utils/index';\nimport cls from 'classnames';\nimport React, { useEffect, useMemo, useState, useRef } from 'react';\nimport { useTimelineContext } from '../contexts';\nimport useNewScrollPosition from '../effects/useNewScrollPosition';\nimport { useSlideshowProgress } from '../../hooks/useSlideshowProgress';\nimport * as ve from './timeline-new.css';\n// Note: Removed unused imports from timeline-main.css\nimport { computeCssVarsFromTheme } from '../../styles/theme-bridge';\nimport { lightThemeClass, darkThemeClass } from '../../styles/themes.css';\nimport { TimelineToolbar } from './timeline-toolbar';\nimport { useTimelineSearch } from '../../hooks/useTimelineSearch';\nimport { useTimelineNavigation } from '../../hooks/useTimelineNavigation';\nimport { useTimelineMode } from '../../hooks/useTimelineMode';\nimport { useTimelineScroll } from '../../hooks/useTimelineScroll';\nimport { useTimelineMedia } from '../../hooks/useTimelineMedia';\nimport { FontProvider } from '../fonts/font-provider';\nimport TimelineView from './TimelineView';\n\n// Disable TypeScript checking for the Timeline component\n// as we're addressing the type conflicts through our custom hooks\nconst Timeline: React.FunctionComponent<TimelineModel> = (\n  props: TimelineModel,\n) => {\n  // de-structure the props\n  const {\n    activeTimelineItem,\n    contentDetailsChildren,\n    iconChildren,\n    items = [],\n    mode: propMode,\n    onFirst,\n    onLast,\n    onNext,\n    onPrevious,\n    onRestartSlideshow,\n    onTimelineUpdated,\n    onItemSelected,\n    onOutlineSelection,\n    slideShowEnabled,\n    slideShowRunning,\n    slideItemDuration = 2000,\n    nestedCardHeight,\n    isChild = false,\n    onPaused,\n    uniqueId,\n    noUniqueId,\n  } = props;\n\n  // Use unified context\n  const {\n    // Navigation context properties\n    scrollable,\n    disableNavOnKey,\n    disableInteraction,\n    onScrollEnd,\n\n    // Theme context properties\n    theme,\n    isDarkMode: darkMode,\n    toggleDarkMode,\n\n    // Layout context properties\n    mode,\n    cardHeight,\n    cardLess,\n    flipLayout,\n    itemWidth,\n    lineWidth,\n    toolbarPosition,\n    disableToolbar,\n    toolbarSearchConfig,\n    borderLessCards,\n    showAllCardsHorizontal,\n    textContentDensity,\n    enableLayoutSwitch,\n    useReadMore,\n    cardPositionHorizontal,\n    updateShowAllCardsHorizontal: updateHorizontalAllCards,\n    updateTextContentDensity,\n\n    // Font properties\n    googleFonts,\n  } = useTimelineContext();\n  const [hasFocus, setHasFocus] = useState(false);\n  const [isKeyboardNavigation, setIsKeyboardNavigation] = useState(false);\n  const [isToolbarNavigation, setIsToolbarNavigation] = useState(false);\n  const [isFullscreen, setIsFullscreen] = useState(false);\n  const wrapperRef = useRef<HTMLDivElement>(null);\n  const keyboardTimeoutRef = useRef<ReturnType<typeof setTimeout> | null>(null);\n\n  // Listen to native fullscreen change events to keep state in sync\n  useEffect(() => {\n    const handleFullscreenChange = () => {\n      const doc = document as Document & {\n        webkitFullscreenElement?: Element;\n        mozFullScreenElement?: Element;\n        msFullscreenElement?: Element;\n      };\n\n      const isCurrentlyFullscreen = !!(\n        doc.fullscreenElement ||\n        doc.webkitFullscreenElement ||\n        doc.mozFullScreenElement ||\n        doc.msFullscreenElement\n      );\n      setIsFullscreen(isCurrentlyFullscreen);\n    };\n\n    document.addEventListener('fullscreenchange', handleFullscreenChange);\n    document.addEventListener('webkitfullscreenchange', handleFullscreenChange);\n    document.addEventListener('mozfullscreenchange', handleFullscreenChange);\n    document.addEventListener('msfullscreenchange', handleFullscreenChange);\n\n    return () => {\n      document.removeEventListener('fullscreenchange', handleFullscreenChange);\n      document.removeEventListener(\n        'webkitfullscreenchange',\n        handleFullscreenChange,\n      );\n      document.removeEventListener(\n        'mozfullscreenchange',\n        handleFullscreenChange,\n      );\n      document.removeEventListener(\n        'msfullscreenchange',\n        handleFullscreenChange,\n      );\n      // Cleanup keyboard timeout\n      if (keyboardTimeoutRef.current) {\n        clearTimeout(keyboardTimeoutRef.current);\n        keyboardTimeoutRef.current = null;\n      }\n    };\n  }, []);\n\n  // Memoize ID generation to prevent unnecessary regeneration\n  const id = useMemo(\n    () => `react-chrono-timeline-${noUniqueId ? uniqueId : getUniqueID()}`,\n    [noUniqueId, uniqueId],\n  );\n\n  // Use custom hooks - prioritize component prop mode over context mode\n  const { timelineMode, handleTimelineUpdate } = useTimelineMode({\n    initialMode: propMode || mode, // Prioritize prop mode over context mode\n    showAllCardsHorizontal,\n    updateHorizontalAllCards,\n  });\n\n  const [newOffSet, setNewOffset] = useNewScrollPosition(\n    timelineMode,\n    itemWidth,\n  );\n\n  // Ensure context's showAllCardsHorizontal stays in sync with computed mode\n  useEffect(() => {\n    if (timelineMode === 'HORIZONTAL_ALL') {\n      updateHorizontalAllCards(true);\n    } else if (timelineMode === 'HORIZONTAL') {\n      updateHorizontalAllCards(false);\n    }\n  }, [timelineMode, updateHorizontalAllCards]);\n\n\n  // First get the navigation functions\n  const {\n    activeItemIndex,\n    handleTimelineItemClick: handleTimelineItemClickInternal,\n    handleTimelineItemElapsed,\n    handleNext: handleNextInternal,\n    handlePrevious: handlePreviousInternal,\n    handleFirst: handleFirstInternal,\n    handleLast: handleLastInternal,\n    handleKeySelection,\n    syncActiveItemIndex,\n  } = useTimelineNavigation({\n    items,\n    mode: timelineMode,\n    timelineId: id,\n    hasFocus,\n    flipLayout: !!flipLayout,\n    slideShowRunning: !!slideShowRunning,\n    isKeyboardNavigation: !!isKeyboardNavigation,\n    onTimelineUpdated: onTimelineUpdated || (() => {}),\n    onNext: onNext || (() => {}),\n    onPrevious: onPrevious || (() => {}),\n    onFirst: onFirst || (() => {}),\n    onLast: onLast || (() => {}),\n  });\n\n  const {\n    timelineMainRef,\n    horizontalContentRef,\n    handleScroll,\n    handleMainScroll,\n  } = useTimelineScroll({\n    mode: timelineMode,\n    onScrollEnd: onScrollEnd || (() => {}),\n    setNewOffset,\n    onNextItem: handleNextInternal,\n    onPreviousItem: handlePreviousInternal,\n    activeItemIndex: activeItemIndex,\n    totalItems: items.length,\n    isKeyboardNavigation: isKeyboardNavigation,\n  });\n\n  // Navigation functions are now available from the earlier useTimelineNavigation call\n\n  // Wrap timeline item click to reset navigation states\n  const handleTimelineItemClick = React.useCallback(\n    (itemId?: string, isSlideShow?: boolean) => {\n      // Reset navigation states when clicking directly on items\n      setIsKeyboardNavigation(false);\n      setIsToolbarNavigation(false);\n      handleTimelineItemClickInternal(itemId, isSlideShow);\n\n      // After activating, bring the card/row to focus for accessibility\n      if (itemId) {\n        requestAnimationFrame(() => {\n          const verticalRow = document.querySelector(\n            `[data-testid=\"vertical-item-row\"][data-item-id=\"${itemId}\"]`,\n          ) as HTMLElement | null;\n          const target =\n            verticalRow ||\n            (document.getElementById(\n              `timeline-card-${itemId}`,\n            ) as HTMLElement | null);\n          try {\n            target?.focus?.({ preventScroll: true });\n          } catch {}\n        });\n      }\n    },\n    [handleTimelineItemClickInternal],\n  );\n\n  // Enhanced navigation handlers that track source\n  const handleNext = React.useCallback(() => {\n    setIsToolbarNavigation(true);\n    setIsKeyboardNavigation(false);\n    // Clear keyboard state after a delay to ensure styles are applied\n    setTimeout(() => {\n      setIsToolbarNavigation(false);\n    }, 500);\n    handleNextInternal();\n  }, [handleNextInternal]);\n\n  const handlePrevious = React.useCallback(() => {\n    setIsToolbarNavigation(true);\n    setIsKeyboardNavigation(false);\n    // Clear keyboard state after a delay to ensure styles are applied\n    setTimeout(() => {\n      setIsToolbarNavigation(false);\n    }, 500);\n    handlePreviousInternal();\n  }, [handlePreviousInternal]);\n\n  const handleFirst = React.useCallback(() => {\n    setIsToolbarNavigation(true);\n    setIsKeyboardNavigation(false);\n    // Clear keyboard state after a delay to ensure styles are applied\n    setTimeout(() => {\n      setIsToolbarNavigation(false);\n    }, 500);\n    handleFirstInternal();\n  }, [handleFirstInternal]);\n\n  const handleLast = React.useCallback(() => {\n    setIsToolbarNavigation(true);\n    setIsKeyboardNavigation(false);\n    // Clear keyboard state after a delay to ensure styles are applied\n    setTimeout(() => {\n      setIsToolbarNavigation(false);\n    }, 500);\n    handleLastInternal();\n  }, [handleLastInternal]);\n\n  // Sync activeItemIndex with activeTimelineItem prop\n  useEffect(() => {\n    // For defined activeTimelineItem, always sync\n    if (activeTimelineItem !== undefined) {\n      if (activeTimelineItem !== activeItemIndex.current) {\n        syncActiveItemIndex(activeTimelineItem);\n      }\n    } else {\n      // For undefined activeTimelineItem (no selection), reset to -1 to indicate no selection\n      // This helps with navigation logic\n      if (activeItemIndex.current !== -1) {\n        activeItemIndex.current = -1;\n      }\n    }\n\n    if (activeTimelineItem !== undefined) {\n      // Move keyboard focus to the active element once activation changes\n      if (timelineMode === 'HORIZONTAL' || timelineMode === 'HORIZONTAL_ALL') {\n        requestAnimationFrame(() => {\n          const activeId = items[activeTimelineItem ?? 0]?.id;\n          if (activeId) {\n            // Prefer focusing the card container in horizontal modes\n            const cardContainer = document.getElementById(\n              `timeline-card-${activeId}`,\n            );\n            if (cardContainer) {\n              try {\n                (cardContainer as HTMLElement).focus({ preventScroll: false });\n                return;\n              } catch (_) {\n                // fall through to point focus\n              }\n            }\n\n            const circle = document.querySelector(\n              `button[data-testid=\"timeline-circle\"][data-item-id=\"${activeId}\"]`,\n            ) as HTMLButtonElement | null;\n            if (circle) {\n              try {\n                circle.focus({ preventScroll: false });\n                return;\n              } catch (_) {\n                // fall through\n              }\n            }\n          }\n          const ele = timelineMainRef.current;\n          if (ele) {\n            ele.focus({ preventScroll: false });\n          }\n        });\n      } else if (\n        timelineMode === 'VERTICAL' ||\n        timelineMode === 'VERTICAL_ALTERNATING'\n      ) {\n        // In vertical modes, focus the vertical row (li) for the active item\n        requestAnimationFrame(() => {\n          const activeId = items[activeTimelineItem ?? 0]?.id;\n          if (activeId) {\n            const verticalRow = document.querySelector(\n              `[data-testid=\"vertical-item-row\"][data-item-id=\"${activeId}\"]`,\n            ) as HTMLElement | null;\n            if (verticalRow) {\n              try {\n                verticalRow.focus({ preventScroll: false });\n                return;\n              } catch (_) {\n                // fall back to container focus\n              }\n            }\n          }\n          const ele = timelineMainRef.current;\n          if (ele) {\n            ele.focus({ preventScroll: false });\n          }\n        });\n      }\n    }\n  }, [activeTimelineItem, syncActiveItemIndex, mode, timelineMainRef, items]);\n\n  const {\n    searchQuery,\n    searchResults,\n    currentMatchIndex,\n    searchInputRef,\n    handleSearchChange,\n    clearSearch,\n    handleNextMatch,\n    handlePreviousMatch,\n    handleSearchKeyDown,\n  } = useTimelineSearch({\n    items: useMemo(\n      () => items.map((item) => ({ ...item, wrapperId: id })),\n      [items, id],\n    ),\n    onTimelineUpdated: onTimelineUpdated || (() => {}),\n    handleTimelineItemClick,\n  });\n\n  // Overall slideshow progress hook\n  useSlideshowProgress({\n    slideShowRunning: slideShowRunning ?? false,\n    activeTimelineItem: activeTimelineItem ?? 0,\n  });\n\n  useTimelineMedia({\n    mode,\n    timelineMainRef,\n  });\n\n  // Memoize classes and display flags\n  const wrapperClass = useMemo(\n    () =>\n      cls(mode.toLocaleLowerCase(), ve.wrapper, {\n        'focus-visible': !isChild,\n        'js-focus-visible': !isChild,\n      }),\n    [mode, isChild],\n  );\n\n  const canShowToolbar = useMemo(\n    () => !disableToolbar && !isChild,\n    [isChild, disableToolbar],\n  );\n\n  // Handle keyboard events\n  const handleKeyDown = React.useCallback(\n    (evt: React.KeyboardEvent<HTMLDivElement>) => {\n      if (!disableNavOnKey && !slideShowRunning) {\n        const isNavigationKey = [\n          'ArrowLeft',\n          'ArrowRight',\n          'ArrowUp',\n          'ArrowDown',\n          'Home',\n          'End',\n        ].includes(evt.key);\n\n        if (isNavigationKey) {\n          setHasFocus(true);\n          setIsKeyboardNavigation(true);\n          setIsToolbarNavigation(false);\n          handleKeySelection(evt);\n\n          // Clear keyboard navigation flag after scroll animation completes\n          if (keyboardTimeoutRef.current) {\n            clearTimeout(keyboardTimeoutRef.current);\n          }\n          keyboardTimeoutRef.current = setTimeout(() => {\n            setIsKeyboardNavigation(false);\n            keyboardTimeoutRef.current = null;\n          }, 400); // Slightly longer than scroll animation (300ms)\n        }\n      }\n    },\n    [disableNavOnKey, slideShowRunning, handleKeySelection],\n  );\n\n  // Handle focus events to maintain proper focus state\n  const handleFocus = React.useCallback(() => {\n    if (!slideShowRunning) {\n      setHasFocus(true);\n    }\n  }, [slideShowRunning]);\n\n  const handleBlur = React.useCallback(\n    (evt: React.FocusEvent<HTMLDivElement>) => {\n      // Only lose focus if focus is moving outside the timeline entirely\n      const relatedTarget = evt.relatedTarget as HTMLElement;\n      const currentTarget = evt.currentTarget as HTMLElement;\n\n      // Check if focus is moving to a child element (like toolbar buttons)\n      if (!currentTarget.contains(relatedTarget)) {\n        // Only set hasFocus to false if focus is truly leaving the timeline\n        setHasFocus(false);\n      }\n    },\n    [],\n  );\n\n  // Update active item information\n  useEffect(() => {\n    const activeItem = items[activeTimelineItem ?? 0];\n\n    if (slideShowRunning) {\n      activeItemIndex.current = activeTimelineItem ?? 0;\n    }\n\n    if (!items.length || !activeItem) return;\n\n    const { title, cardTitle, cardSubtitle, cardDetailedText } = activeItem;\n\n    // Use the activeTimelineItem directly instead of activeItemIndex.current\n    // to prevent infinite loops caused by ref changes\n    onItemSelected?.({\n      cardDetailedText,\n      cardSubtitle,\n      cardTitle,\n      index: activeTimelineItem ?? 0,\n      title,\n    });\n\n    // Handle centering for both slideshow and manual navigation\n    if (timelineMode === 'HORIZONTAL' || timelineMode === 'HORIZONTAL_ALL') {\n      const card = horizontalContentRef.current?.querySelector(\n        `#timeline-card-${activeItem.id}`,\n      );\n\n      if (card && horizontalContentRef.current) {\n        const cardRect = card.getBoundingClientRect();\n        const contentRect =\n          horizontalContentRef.current.getBoundingClientRect();\n\n        if (cardRect && contentRect) {\n          const { width: cardWidth, left: cardLeft } = cardRect;\n          const { width: contentWidth, left: contentLeft } = contentRect;\n\n          requestAnimationFrame(() => {\n            const ele = horizontalContentRef.current as HTMLElement;\n            if (!ele) return;\n\n            ele.style.scrollBehavior = 'smooth';\n            const targetScrollLeft =\n              cardLeft - contentLeft + cardWidth / 2 - contentWidth / 2;\n            ele.scrollLeft += targetScrollLeft;\n\n            // Also ensure the card gets focus\n            (card as HTMLElement).focus({ preventScroll: true });\n          });\n        }\n      }\n\n      // Also ensure timeline point is visible\n      const point = document.querySelector(\n        `button[data-testid=\"timeline-circle\"][data-item-id=\"${activeItem.id}\"]`,\n      ) as HTMLButtonElement | null;\n\n      if (point) {\n        requestAnimationFrame(() => {\n          // Check if scrollIntoView is available (not available in JSDOM)\n          if (point.scrollIntoView) {\n            point.scrollIntoView({\n              behavior: 'smooth',\n              inline: 'center',\n              block: 'nearest',\n            });\n          }\n        });\n      }\n    } else if (\n      timelineMode === 'VERTICAL' ||\n      timelineMode === 'VERTICAL_ALTERNATING'\n    ) {\n      const verticalItemRow = document.querySelector(\n        `[data-testid=\"vertical-item-row\"][data-item-id=\"${activeItem.id}\"]`,\n      );\n\n      if (verticalItemRow) {\n        requestAnimationFrame(() => {\n          // Check if scrollIntoView is available (not available in JSDOM)\n          if ((verticalItemRow as HTMLElement).scrollIntoView) {\n            (verticalItemRow as HTMLElement).scrollIntoView({\n              behavior: 'smooth',\n              block: 'center',\n            });\n          }\n        });\n      }\n    }\n  }, [\n    activeTimelineItem,\n    items,\n    slideShowRunning,\n    mode,\n    onItemSelected,\n    horizontalContentRef,\n  ]);\n\n  // Update scroll position when offset changes\n  useEffect(() => {\n    const ele = timelineMainRef.current;\n    if (!ele) return;\n\n    if (timelineMode === 'HORIZONTAL') {\n      ele.scrollLeft = Math.max(newOffSet, 0);\n    } else {\n      ele.scrollTop = newOffSet;\n    }\n  }, [newOffSet, mode, timelineMainRef]);\n\n  // Use Vanilla Extract styles with proper CSS variables\n  const wrapperHeight = useMemo(() => {\n    return typeof props.timelineHeight === 'number'\n      ? `${props.timelineHeight}px`\n      : props.timelineHeight || '100%';\n  }, [props.timelineHeight]);\n\n  // Memoize theme CSS variables to prevent re-creation on every render\n  // Only compute vars for custom themes - default themes use vanilla-extract classes\n  const themeCssVars = useMemo(\n    () => computeCssVarsFromTheme(theme, darkMode),\n    [theme, darkMode],\n  );\n\n  // Memoize search width CSS variables\n  const searchWidthVars = useMemo(() => {\n    if (!toolbarSearchConfig) return {};\n\n    return {\n      '--timeline-search-width': toolbarSearchConfig.width,\n      '--timeline-search-max-width': toolbarSearchConfig.maxWidth,\n      '--timeline-search-min-width': toolbarSearchConfig.minWidth,\n      '--timeline-search-input-width': toolbarSearchConfig.inputWidth,\n      '--timeline-search-input-max-width': toolbarSearchConfig.inputMaxWidth,\n    };\n  }, [toolbarSearchConfig]);\n\n  return (\n    <FontProvider googleFonts={googleFonts}>\n      <div\n        ref={wrapperRef}\n        onKeyDown={handleKeyDown}\n        onFocus={handleFocus}\n        onBlur={handleBlur}\n        className={`timeline-wrapper ${mode.toLowerCase()} ${ve.wrapper({ fullscreen: isFullscreen })} ${darkMode ? darkThemeClass : lightThemeClass}`}\n        style={{\n          ...themeCssVars,\n          ...searchWidthVars,\n          height: wrapperHeight,\n        }}\n        data-mode={timelineMode}\n        data-fullscreen={isFullscreen}\n        data-keyboard-focus={isKeyboardNavigation}\n        data-toolbar-navigation={isToolbarNavigation}\n        onMouseDown={() => setHasFocus(true)}\n        onKeyUp={(evt) => {\n          if (evt.key === 'Escape') {\n            onPaused?.();\n          }\n        }}\n        tabIndex={isChild ? -1 : 0}\n        role=\"region\"\n        aria-label=\"Timeline\"\n        aria-live=\"polite\"\n        aria-atomic=\"false\"\n      >\n        {canShowToolbar && (\n          <div\n            className={ve.toolbarContainer({\n              position: toolbarPosition as 'top' | 'bottom',\n              sticky: Boolean(props.stickyToolbar),\n            })}\n          >\n            <TimelineToolbar\n              activeTimelineItem={activeTimelineItem ?? 0}\n              totalItems={items.length}\n              slideShowEnabled={!!slideShowEnabled}\n              slideShowRunning={!!slideShowRunning}\n              onFirst={handleFirst}\n              onLast={handleLast}\n              onNext={handleNext}\n              onPrevious={handlePrevious}\n              onRestartSlideshow={onRestartSlideshow || (() => {})}\n              darkMode={darkMode}\n              toggleDarkMode={toggleDarkMode}\n              onPaused={onPaused || (() => {})}\n              id={id}\n              flipLayout={!!flipLayout}\n              items={items}\n              onActivateTimelineItem={handleTimelineItemClick}\n              onUpdateTimelineMode={handleTimelineUpdate}\n              onUpdateTextContentDensity={updateTextContentDensity}\n              mode={timelineMode}\n              searchQuery={searchQuery}\n              onSearchChange={handleSearchChange}\n              onClearSearch={clearSearch}\n              onNextMatch={handleNextMatch}\n              onPreviousMatch={handlePreviousMatch}\n              totalMatches={searchResults.length}\n              currentMatchIndex={currentMatchIndex}\n              onSearchKeyDown={handleSearchKeyDown}\n              searchInputRef={\n                searchInputRef as unknown as React.RefObject<HTMLInputElement>\n              }\n              timelineRef={\n                wrapperRef as unknown as React.RefObject<HTMLElement>\n              }\n              onEnterFullscreen={() => {\n                setIsFullscreen(true);\n              }}\n              onExitFullscreen={() => {\n                setIsFullscreen(false);\n              }}\n              onFullscreenError={(_error: string) => {\n                setIsFullscreen(false);\n              }}\n              stickyToolbar={props.stickyToolbar ?? false}\n            />\n          </div>\n        )}\n\n        {/* Overall slideshow progress bar - positioned below toolbar */}\n        {/* {slideShowRunning && showOverallSlideshowProgress && (\n        <SlideshowProgress\n          activeItemIndex={activeTimelineItem ?? 0}\n          totalItems={items.length}\n          isRunning={slideShowRunning}\n          slideItemDuration={slideItemDuration}\n          isPaused={isPaused}\n        />\n      )} */}\n\n        <div\n          ref={timelineMainRef}\n          className={`timeline-main-wrapper ${timelineMode.toLowerCase()} ${ve.mainWrapper(\n            {\n              mode:\n                timelineMode === 'VERTICAL'\n                  ? 'vertical'\n                  : timelineMode === 'VERTICAL_ALTERNATING'\n                    ? 'alternating'\n                    : timelineMode === 'HORIZONTAL_ALL'\n                      ? 'horizontalAll'\n                      : 'horizontal',\n            },\n          )}`}\n          id=\"timeline-main-wrapper\"\n          data-testid=\"timeline-main-wrapper\"\n          onScroll={handleMainScroll}\n        >\n          <TimelineView\n            timelineMode={timelineMode}\n            activeTimelineItem={activeTimelineItem ?? 0}\n            autoScroll={handleScroll}\n            contentDetailsChildren={contentDetailsChildren}\n            hasFocus={hasFocus}\n            iconChildren={iconChildren}\n            items={items}\n            handleTimelineItemClick={handleTimelineItemClick}\n            handleTimelineItemElapsed={handleTimelineItemElapsed}\n            slideShowRunning={!!slideShowRunning}\n            id={id}\n            theme={theme}\n            lineWidth={lineWidth}\n            onOutlineSelection={onOutlineSelection || (() => {})}\n            nestedCardHeight={nestedCardHeight ?? 0}\n          />\n        </div>\n\n        {/* Only render content renderer for horizontal modes */}\n        {(timelineMode === 'HORIZONTAL' ||\n          timelineMode === 'HORIZONTAL_ALL') && (\n          <div\n            id={id}\n            ref={horizontalContentRef}\n            className={`timeline-content-render ${ve.contentRenderer({\n              mode:\n                timelineMode === 'HORIZONTAL_ALL'\n                  ? 'horizontalAll'\n                  : 'horizontal',\n            })}`}\n            style={\n              {\n                // Pass card height as CSS variable for dynamic height calculation\n                '--card-height': `${cardHeight || 350}px`,\n              } as React.CSSProperties\n            }\n          />\n        )}\n      </div>\n    </FontProvider>\n  );\n};\n\nTimeline.displayName = 'Timeline';\n\nexport default React.memo(Timeline);\n","import React, { Component, ErrorInfo, ReactNode } from 'react';\nimport {\n  errorBoundaryContainer,\n  errorMessage,\n  errorTitle,\n  retryButton,\n} from './error-boundary.css';\n\ninterface Props {\n  children: ReactNode;\n  fallback?: ReactNode;\n  onError?: (error: Error, errorInfo: ErrorInfo) => void;\n}\n\ninterface State {\n  hasError: boolean;\n  error: Error | null;\n}\n\nexport class TimelineErrorBoundary extends Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = { hasError: false, error: null };\n  }\n\n  static getDerivedStateFromError(error: Error): State {\n    // Update state so the next render will show the fallback UI\n    return { hasError: true, error };\n  }\n\n  componentDidCatch(error: Error, errorInfo: ErrorInfo) {\n    // Log error to console or external service\n    console.error('Timeline Error:', error, errorInfo);\n\n    // Call optional error handler\n    if (this.props.onError) {\n      this.props.onError(error, errorInfo);\n    }\n  }\n\n  handleReset = () => {\n    this.setState({ hasError: false, error: null });\n  };\n\n  render() {\n    if (this.state.hasError) {\n      // Use custom fallback if provided\n      if (this.props.fallback) {\n        return <>{this.props.fallback}</>;\n      }\n\n      // Default error UI\n      return (\n        <div className={errorBoundaryContainer}>\n          <h2 className={errorTitle}>Something went wrong</h2>\n          <p className={errorMessage}>\n            {this.state.error?.message ||\n              'An unexpected error occurred in the timeline component.'}\n          </p>\n          <button\n            className={retryButton}\n            onClick={this.handleReset}\n            type=\"button\"\n          >\n            Try Again\n          </button>\n        </div>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n","import { TimelineItemModel } from '@models/TimelineItemModel';\nimport { TimelineProps } from '@models/TimelineModel';\nimport { TimelinePropsV2 } from '@models/TimelinePropsV2';\nimport { migrateLegacyProps, warnDeprecatedProps } from '@utils/propMigration';\nimport { getUniqueID } from '@utils/index';\nimport { safeValidateTimelineProps } from '@utils/validation';\nimport dayjs from 'dayjs';\nimport React, {\n  useCallback,\n  useEffect,\n  useRef,\n  useState,\n  useMemo,\n} from 'react';\nimport { TimelineContextProvider } from './contexts/TimelineContextProvider';\nimport Timeline from './timeline/timeline';\nimport { computeCssVarsFromTheme } from '../styles/theme-bridge';\nimport { lightThemeClass, darkThemeClass } from '../styles/themes.css';\nimport { pickDefined } from '../utils/propUtils';\nimport { TimelineErrorBoundary } from './common/error-boundary';\nconst toReactArray = React.Children.toArray;\n\n/**\n * Converts new grouped props back to legacy format for internal compatibility\n */\nfunction convertToLegacyProps(props: TimelinePropsV2): TimelineProps {\n  return pickDefined({\n    // Core props\n    items: props.items,\n    children: props.children,\n    theme: props.theme,\n    activeItemIndex: props.activeItemIndex,\n    allowDynamicUpdate: props.allowDynamicUpdate,\n    uniqueId: props.id,\n    onItemSelected: props.onItemSelected\n      ? (data: any) => {\n          // Convert from legacy flat structure to new nested structure\n          if ('item' in data) {\n            // Already in new format\n            props.onItemSelected!(data);\n          } else {\n            // Convert from legacy format\n            const { index, ...item } = data;\n            props.onItemSelected!({ item, index });\n          }\n        }\n      : undefined,\n    onScrollEnd: props.onScrollEnd,\n    onThemeChange: props.onThemeChange as any,\n    onRestartSlideshow: props.onRestartSlideshow,\n\n    // Mode conversion\n    mode: mapNewModeToLegacy(props.mode),\n\n    // Layout props\n    cardWidth: props.layout?.cardWidth,\n    cardHeight: props.layout?.cardHeight,\n    timelinePointDimension: props.layout?.pointSize,\n    lineWidth: props.layout?.lineWidth,\n    itemWidth: props.layout?.itemWidth,\n    timelineHeight: props.layout?.timelineHeight,\n    responsiveBreakPoint: props.layout?.responsive?.breakpoint,\n    enableBreakPoint: props.layout?.responsive?.enabled,\n    cardPositionHorizontal: mapNewCardPositionToLegacy(\n      props.layout?.positioning?.cardPosition,\n    ),\n    flipLayout: props.layout?.positioning?.flipLayout,\n\n    // Interaction props\n    disableNavOnKey:\n      props.interaction?.keyboardNavigation === false ? true : undefined,\n    disableClickOnCircle:\n      props.interaction?.pointClick === false ? true : undefined,\n    disableAutoScrollOnClick:\n      props.interaction?.autoScroll === false ? true : undefined,\n    focusActiveItemOnLoad: props.interaction?.focusOnLoad,\n    highlightCardsOnHover: props.interaction?.cardHover,\n    disableInteraction: props.interaction?.disabled,\n\n    // Content props\n    parseDetailsAsHTML: props.content?.allowHTML,\n    useReadMore: props.content?.readMore,\n    textOverlay: props.content?.textOverlay,\n    titleDateFormat: props.content?.dateFormat,\n    textDensity: props.content?.compactText ? 'LOW' : 'HIGH',\n    semanticTags: props.content?.semanticTags\n      ? pickDefined({\n          cardTitle: props.content.semanticTags.title,\n          cardSubtitle: props.content.semanticTags.subtitle,\n        })\n      : undefined,\n\n    // Display props\n    borderLessCards: props.display?.borderless,\n    cardLess: props.display?.cardsDisabled,\n    disableTimelinePoint: props.display?.pointsDisabled,\n    timelinePointShape: props.display?.pointShape,\n    showAllCardsHorizontal: props.display?.allCardsVisible,\n    disableToolbar:\n      props.display?.toolbar?.enabled === false ? true : undefined,\n    toolbarPosition: props.display?.toolbar?.position,\n    toolbarSearchConfig: props.display?.toolbar?.search,\n    scrollable: props.display?.scrollable,\n\n    // Media props\n    mediaHeight: props.media?.height,\n    mediaSettings: props.media\n      ? pickDefined({\n          align: props.media?.align,\n          fit: props.media?.fit as\n            | 'cover'\n            | 'contain'\n            | 'fill'\n            | 'none'\n            | undefined,\n        })\n      : undefined,\n\n    // Animation props\n    slideShow: props.animation?.slideshow?.enabled,\n    slideItemDuration: props.animation?.slideshow?.duration,\n    slideShowType: mapNewSlideshowTypeToLegacy(\n      props.animation?.slideshow?.type,\n    ) as any,\n    showProgressOnSlideshow: props.animation?.slideshow?.showProgress,\n    showOverallSlideshowProgress:\n      props.animation?.slideshow?.showOverallProgress,\n\n    // Style props\n    classNames: props.style?.classNames,\n    fontSizes: props.style?.fontSizes,\n    googleFonts: props.style?.googleFonts,\n\n    // Accessibility props\n    buttonTexts: props.accessibility?.buttonTexts as any,\n\n    // i18n props\n    i18nConfig: props.i18n?.texts,\n\n    // Dark mode\n    darkMode: props.darkMode?.enabled,\n    enableDarkToggle: props.darkMode?.showToggle,\n  }) as TimelineProps;\n}\n\nfunction mapNewModeToLegacy(mode?: TimelinePropsV2['mode']): string {\n  switch (mode) {\n    case 'horizontal':\n      return 'HORIZONTAL';\n    case 'vertical':\n      return 'VERTICAL';\n    case 'alternating':\n      return 'VERTICAL_ALTERNATING';\n    case 'horizontal-all':\n      return 'HORIZONTAL_ALL';\n    default:\n      return 'VERTICAL_ALTERNATING';\n  }\n}\n\nfunction mapNewCardPositionToLegacy(\n  position?: 'top' | 'bottom',\n): 'TOP' | 'BOTTOM' | undefined {\n  switch (position) {\n    case 'top':\n      return 'TOP';\n    case 'bottom':\n      return 'BOTTOM';\n    default:\n      return undefined;\n  }\n}\n\nfunction mapNewSlideshowTypeToLegacy(\n  type?: 'reveal' | 'slide' | 'fade',\n): string | undefined {\n  switch (type) {\n    case 'reveal':\n      return 'reveal';\n    case 'slide':\n      return 'slide_in';\n    case 'fade':\n      return 'slide_from_sides';\n    default:\n      return undefined;\n  }\n}\n\n// Union type to accept both old and new prop formats\ntype ChronoProps = TimelineProps | TimelinePropsV2;\n\nconst Chrono: React.FunctionComponent<ChronoProps> = (\n  inputProps: ChronoProps,\n) => {\n  // Handle backward compatibility and migration\n  const props = useMemo(() => {\n    // Check if using new grouped prop structure\n    const hasNewProps =\n      'layout' in inputProps ||\n      'interaction' in inputProps ||\n      'content' in inputProps ||\n      'display' in inputProps ||\n      'media' in inputProps ||\n      'animation' in inputProps;\n\n    if (hasNewProps) {\n      // Already using new format\n      return inputProps as TimelinePropsV2;\n    } else {\n      // Migrate legacy props and warn about deprecations\n      if (process.env.NODE_ENV === 'development') {\n        warnDeprecatedProps(inputProps as TimelineProps);\n      }\n      return migrateLegacyProps(inputProps as TimelineProps);\n    }\n  }, [inputProps]);\n\n  // Validate props early with development warnings\n  if (process.env.NODE_ENV === 'development') {\n    // Convert back to legacy format for existing validation\n    const legacyProps = convertToLegacyProps(props);\n    const validationResult = safeValidateTimelineProps(legacyProps);\n    if (!validationResult.success) {\n      console.warn(\n        'Timeline props validation warnings:',\n        validationResult.errors\n          .map((error) => `${error.path.join('.')}: ${error.message}`)\n          .join(', '),\n      );\n    }\n  }\n\n  // Extract props with new grouped structure\n  const {\n    allowDynamicUpdate = false,\n    children,\n    items = [],\n    onScrollEnd,\n    activeItemIndex,\n    mode = 'alternating',\n    onThemeChange,\n    onRestartSlideshow,\n    content,\n    animation,\n  } = props;\n\n  // Extract specific values from grouped configs with defaults\n  const slideShow = animation?.slideshow?.enabled || false;\n  const slideItemDuration = animation?.slideshow?.duration || 2000;\n  const titleDateFormat = content?.dateFormat || 'MMM DD, YYYY';\n\n  const [timeLineItems, setTimeLineItems] = useState<TimelineItemModel[]>([]);\n  const timeLineItemsRef = useRef<TimelineItemModel[]>([]);\n  const [slideShowActive, setSlideShowActive] = useState(false);\n  // Don't auto-highlight first item in vertical modes unless explicitly set\n  const [activeTimelineItem, setActiveTimelineItem] = useState(\n    activeItemIndex !== undefined\n      ? activeItemIndex\n      : mode === 'vertical' || mode === 'alternating'\n        ? undefined\n        : 0,\n  );\n\n  // Track the previous prop value to avoid circular updates\n  const previousActiveItemIndexRef = useRef(activeItemIndex);\n\n  // Cache the last processed items to avoid unnecessary reprocessing\n  const itemsHashRef = useRef<string>('');\n  const processedItemsCache = useRef<TimelineItemModel[]>([]);\n\n  // Memoize the initItems function\n  const initItems = useCallback(\n    (lineItems?: TimelineItemModel[]): TimelineItemModel[] => {\n      if (lineItems?.length) {\n        return lineItems.map((item, index) => {\n          const id = getUniqueID();\n          const hasNestedItems = !!item.items?.length;\n\n          return {\n            ...item,\n            _dayjs: dayjs(item.date),\n            active: activeItemIndex !== undefined && index === activeItemIndex,\n            id,\n            hasNestedItems,\n            items:\n              item.items?.map((subItem) => ({\n                ...subItem,\n                _dayjs: dayjs(subItem.date),\n                id: getUniqueID(),\n                isNested: true,\n                visible: true,\n              })) || [],\n            title: item.date\n              ? dayjs(item.date).format(titleDateFormat)\n              : item.title,\n            visible: true,\n          };\n        });\n      }\n\n      const itemLength = React.Children.toArray(children).filter(\n        (item) =>\n          (item as React.ReactElement<any>).props.className !== 'chrono-icons',\n      ).length;\n\n      return Array.from({ length: itemLength }).map((_, index) => ({\n        active: index === activeItemIndex,\n        id: getUniqueID(),\n        visible: true,\n      }));\n    },\n    [activeItemIndex, titleDateFormat, children],\n  );\n\n  // Optimize updateItems function\n  const updateItems = useCallback(\n    (lineItems: TimelineItemModel[]) => {\n      if (lineItems) {\n        const pos = timeLineItems.length;\n\n        return lineItems.map((item, index) => ({\n          ...item,\n          active: index === pos,\n          visible: true,\n        }));\n      } else {\n        return [];\n      }\n    },\n    [timeLineItems.length],\n  );\n\n  // Create a stable hash for items comparison - optimized version\n  const createItemsHash = useCallback((items: any[]) => {\n    if (!items?.length) return '';\n\n    // Only extract the needed properties and create a single string\n    return items\n      .map((item) => {\n        // Use simple string concatenation which is more efficient than JSON.stringify\n        const id = item.id || '';\n        const date = item.date || '';\n        const title = item.title || '';\n        const cardTitle = item.cardTitle || '';\n        return `${id}:${date}:${title}:${cardTitle}`;\n      })\n      .join('|');\n  }, []);\n\n  useEffect(() => {\n    const _items = items?.filter((item) => item);\n    let newItems: TimelineItemModel[] = [];\n\n    if (!_items?.length) {\n      const lineItems = initItems();\n      setTimeLineItems(lineItems);\n      return;\n    }\n\n    // Use efficient comparison instead of JSON.stringify on entire array\n    const currentHash = createItemsHash(_items);\n\n    if (!allowDynamicUpdate && currentHash === itemsHashRef.current) {\n      return; // No changes, skip processing\n    }\n\n    itemsHashRef.current = currentHash;\n\n    const previousItemsLength = timeLineItems.length;\n    const isDynamicUpdate =\n      timeLineItems.length && _items.length > timeLineItems.length;\n\n    if (isDynamicUpdate) {\n      newItems = updateItems(_items);\n    } else if (_items.length) {\n      newItems = initItems(_items);\n    }\n\n    if (newItems.length) {\n      timeLineItemsRef.current = newItems;\n      setTimeLineItems(newItems);\n\n      if (isDynamicUpdate && allowDynamicUpdate && previousItemsLength > 0) {\n        // For dynamic updates, preserve current focus if it exists\n        // Only focus on first newly loaded item if no current active item\n        if (activeTimelineItem === undefined || activeTimelineItem === null) {\n          setActiveTimelineItem(previousItemsLength);\n        }\n      } else {\n        // For initial load or full refresh, respect the initial activeItemIndex setting\n        const initialIndex =\n          activeItemIndex !== undefined\n            ? activeItemIndex\n            : mode === 'vertical' || mode === 'alternating'\n              ? undefined\n              : 0;\n        setActiveTimelineItem(initialIndex);\n      }\n\n      processedItemsCache.current = newItems;\n    }\n  }, [\n    items,\n    allowDynamicUpdate,\n    timeLineItems.length,\n    initItems,\n    updateItems,\n    createItemsHash,\n  ]);\n\n  const handleTimelineUpdate = useCallback(\n    (actvTimelineIndex: number) => {\n      setTimeLineItems((lineItems) =>\n        lineItems.map((item, index) => ({\n          ...item,\n          active: index === actvTimelineIndex,\n          // Always keep horizontal items visible so points are always shown\n          visible: true,\n        })),\n      );\n\n      setActiveTimelineItem(actvTimelineIndex);\n\n      if (items) {\n        if (items.length - 1 === actvTimelineIndex) {\n          setSlideShowActive(false);\n        }\n      }\n    },\n    [items, mode],\n  );\n\n  useEffect(() => {\n    // Only update if the activeItemIndex prop has actually changed from its previous value\n    // This prevents unwanted resets during dynamic loading and circular updates\n    if (activeItemIndex !== previousActiveItemIndexRef.current) {\n      previousActiveItemIndexRef.current = activeItemIndex;\n      if (activeItemIndex !== undefined) {\n        handleTimelineUpdate(activeItemIndex);\n      }\n    }\n  }, [activeItemIndex, handleTimelineUpdate]);\n\n  const restartSlideShow = useCallback(() => {\n    handleTimelineUpdate(-1);\n\n    setTimeout(() => {\n      setSlideShowActive(true);\n      handleTimelineUpdate(0);\n    }, 0);\n  }, [handleTimelineUpdate]);\n\n  // Only sync slideshow state when slideShow prop changes, don't auto-start\n  useEffect(() => {\n    if (!slideShow) {\n      setSlideShowActive(false);\n    }\n    // Note: slideshow should be started manually by user interaction, not auto-started\n  }, [slideShow]);\n\n  const handleOnNext = useCallback(() => {\n    if (!timeLineItems.length) {\n      return;\n    }\n    if (\n      activeTimelineItem !== undefined &&\n      activeTimelineItem < timeLineItems.length - 1\n    ) {\n      const newTimeLineItem = activeTimelineItem + 1;\n\n      // Update timeline state and trigger smooth navigation\n      handleTimelineUpdate(newTimeLineItem);\n      setActiveTimelineItem(newTimeLineItem);\n\n      if (\n        mapNewModeToLegacy(mode) === 'HORIZONTAL' &&\n        slideShowActive &&\n        items &&\n        items.length - 1 === newTimeLineItem\n      ) {\n        setSlideShowActive(false);\n      }\n    }\n  }, [\n    timeLineItems.length,\n    activeTimelineItem,\n    handleTimelineUpdate,\n    mode,\n    slideShowActive,\n    items,\n  ]);\n\n  const handleOnPrevious = useCallback(() => {\n    if (activeTimelineItem !== undefined && activeTimelineItem > 0) {\n      const newTimeLineItem = activeTimelineItem - 1;\n\n      // Update timeline state and trigger smooth navigation\n      handleTimelineUpdate(newTimeLineItem);\n      setActiveTimelineItem(newTimeLineItem);\n    }\n  }, [activeTimelineItem, handleTimelineUpdate]);\n\n  const handleFirst = useCallback(() => {\n    setActiveTimelineItem(0);\n    handleTimelineUpdate(0);\n  }, [handleTimelineUpdate]);\n\n  const handleLast = useCallback(() => {\n    if (timeLineItems.length) {\n      const idx = timeLineItems.length - 1;\n      setActiveTimelineItem(idx);\n      handleTimelineUpdate(idx);\n    }\n  }, [timeLineItems.length, handleTimelineUpdate]);\n\n  const handleOutlineSelection = useCallback(\n    (index: number) => {\n      if (index >= 0) {\n        setActiveTimelineItem(index);\n        handleTimelineUpdate(index);\n      }\n    },\n    [handleTimelineUpdate],\n  );\n\n  const onPaused = useCallback(() => {\n    setSlideShowActive(false);\n  }, []);\n\n  // Memoize icon children processing\n  const iconChildren = useMemo(() => {\n    let iconChildArray = toReactArray(children).filter(\n      (item) =>\n        item &&\n        (item as any).props &&\n        (item as any).props.className === 'chrono-icons',\n    );\n\n    if (iconChildArray.length) {\n      return (iconChildArray[0] as any).props.children;\n    }\n    return iconChildArray;\n  }, [children]);\n\n  // Memoize content details children\n  const contentDetailsChildren = useMemo(() => {\n    return toReactArray(children).filter(\n      (item) =>\n        item &&\n        (item as any).props &&\n        (item as any).props.className !== 'chrono-icons',\n    );\n  }, [children]);\n\n  // Determine if we should use dark mode based on theme properties\n  const isDarkMode = useMemo(() => {\n    const t = props.theme;\n    return (\n      t?.timelineBgColor === '#000000' ||\n      t?.cardBgColor === '#1f2937' ||\n      t?.textColor === '#ffffff' ||\n      t?.textColor === '#f9fafb'\n    );\n  }, [props.theme]);\n\n  // Convert to legacy props for internal compatibility\n  const legacyProps = useMemo(() => convertToLegacyProps(props), [props]);\n\n  return (\n    <TimelineErrorBoundary>\n      <TimelineContextProvider {...legacyProps}>\n        <div\n          className={isDarkMode ? darkThemeClass : lightThemeClass}\n          style={{ ...computeCssVarsFromTheme(props.theme), width: '100%' }}\n          id=\"testette\"\n        >\n          <Timeline\n            activeTimelineItem={activeTimelineItem || 0}\n            contentDetailsChildren={contentDetailsChildren}\n            iconChildren={iconChildren}\n            items={timeLineItems}\n            onFirst={handleFirst}\n            onLast={handleLast}\n            onNext={handleOnNext}\n            onPrevious={handleOnPrevious}\n            onRestartSlideshow={restartSlideShow}\n            onTimelineUpdated={handleTimelineUpdate}\n            slideShow={slideShow}\n            slideShowEnabled={slideShow}\n            slideShowRunning={slideShowActive}\n            slideItemDuration={slideItemDuration}\n            {...pickDefined({\n              onScrollEnd,\n              onItemSelected: legacyProps.onItemSelected,\n            })}\n            onOutlineSelection={handleOutlineSelection}\n            mode={mapNewModeToLegacy(mode)}\n            onPaused={onPaused}\n          />\n        </div>\n      </TimelineContextProvider>\n    </TimelineErrorBoundary>\n  );\n};\n\nexport default React.memo(Chrono);\n"],"names":["migrateLegacyProps","legacyProps","newProps","mapLegacyMode","hasLayoutProps","mapLegacyCardPosition","hasInteractionProps","hasContentProps","hasDisplayProps","hasMediaProps","hasAnimationProps","mapLegacySlideshowType","hasStyleProps","hasAccessibilityProps","warnDeprecatedProps","props","deprecationWarnings","warning","mode","position","type","getDefaultExportFromCjs","x","getDefaultWhiteList","whiteList","onAttr","name","value","options","onIgnoreAttr","REGEXP_URL_JAVASCRIPT","safeAttrValue","_default","util","arr","item","i","j","fn","scope","str","_","require$$0","parseStyle","css","cssLength","isParenthesisOpen","lastPos","retCSS","addNewAttr","source","ret","c","parser","DEFAULT","require$$1","require$$2","isNull","obj","shallowCopyObject","FilterCSS","me","sourcePosition","check","isWhite","opts","filterCSS","html","xss","exports","module","reg","match","getDefaultCSSWhiteList","defaultCSSFilter","onTag","tag","onIgnoreTag","onTagAttr","onIgnoreTagAttr","escapeHtml","REGEXP_LT","REGEXP_GT","cssFilter","friendlyAttrValue","REGEXP_DEFAULT_ON_TAG_ATTR_4","REGEXP_DEFAULT_ON_TAG_ATTR_7","REGEXP_DEFAULT_ON_TAG_ATTR_8","escapeAttrValue","REGEXP_QUOTE","REGEXP_QUOTE_2","REGEXP_ATTR_VALUE_1","REGEXP_ATTR_VALUE_COLON","REGEXP_ATTR_VALUE_NEWLINE","escapeQuote","unescapeQuote","escapeHtmlEntities","code","escapeDangerHtml5Entities","clearNonPrintableCharacter","str2","len","onIgnoreTagStripAll","StripTagBody","tags","next","isRemoveAllTag","isRemoveTag","removeList","posStart","end","rethtml","pos","stripCommentTag","retHtml","stripBlankChar","chars","char","getTagName","tagName","isClosing","parseTag","tagStart","quoteStart","currentPos","currentTagName","currentHtml","chariterator","ic","REGEXP_ILLEGAL_ATTR_NAME","parseAttr","lastMarkPos","retAttrs","tmpName","addAttr","v","findNextQuotationMark","findNextEqual","findBeforeEqual","stripQuoteWrap","isQuoteWrapString","text","require$$3","getAttrs","keysToLowerCase","FilterXSS","attributeWrapSign","stripIgnoreTagBody","info","attrs","whiteAttrList","attrsHtml","isWhiteAttr","filterXSS","isWorkerEnv","libExports","defaultTheme","darkTheme","DEFAULT_CLASS_NAMES","DEFAULT_BUTTON_TEXTS","HEX_COLOR_REGEX","ID_CHARS","ID_LENGTH","hexToRGBA","hex","alpha","fullHex","hexValue","r","g","b","clampedAlpha","getDefaultThemeOrDark","isDark","getDefaultClassNames","getDefaultButtonTexts","getSlideShowType","getUniqueID","randomValues","byte","error","timestamp","performanceTime","seed","randomPart","index","m","isValidHexColor","color","isValidUrl","url","validateTimelineProps","errors","validModes","prop","safeValidateTimelineProps","dayjs_min$1","t","e","this","n","s","a","o","h","d","l","$","M","u","D","p","S","w","O","f","y","k","dayjs","dayjs_minExports","F","A","T","W","createMediaQuery","query","addMediaListeners","currentMedia","handleMediaChange","handleResize","removeMediaListeners","useMatchMedia","onMatch","enabled","debounceDelay","matches","setMatches","useState","mediaQuery","useRef","isCleanedUp","useCallback","event","useDebouncedCallback","currentMatches","useEffect","onMatchRef","defaultI18nTexts","mergeI18nConfig","userConfig","interpolateString","template","variables","key","useI18n","i18nConfig","texts","useMemo","getText","category","navigation","search","current","total","theme","layout","fullscreen","quickJump","title","content","status","accessibility","view","keyboard","createTextResolver","i18nHelper","buttonTexts","resolve","i18nGetter","legacyValue","defaultValue","i18nValue","TimelineContext","createContext","TimelineContextProvider","children","cardHeight","cardWidth","cardLess","flipLayout","itemWidth","lineWidth","mediaHeight","mediaSettings","timelinePointDimension","timelinePointShape","disableNavOnKey","disableAutoScrollOnClick","disableInteraction","disableClickOnCircle","disableTimelinePoint","enableBreakPoint","enableDarkToggle","enableLayoutSwitch","enableQuickJump","focusActiveItemOnLoad","highlightCardsOnHover","borderLessCards","cardPositionHorizontal","parseDetailsAsHTML","useReadMore","textOverlay","scrollable","toolbarPosition","disableToolbar","toolbarSearchConfig","slideItemDuration","showProgressOnSlideshow","showOverallSlideshowProgress","slideShow","slideShowType","titleDateFormat","uniqueId","nestedCardHeight","contentDetailsHeight","responsiveBreakPoint","noUniqueId","isChild","darkMode","showAllCardsHorizontal","textDensity","classNames","fontSizes","semanticTags","items","activeItemIndex","onScrollEnd","onThemeChange","isDarkMode","setIsDarkMode","showAllCards","setShowAllCards","isMobileDetected","setIsMobileDetected","textContentDensity","setTextContentDensity","toggleDarkMode","updateShowAllCardsHorizontal","state","updateTextContentDensity","density","computedCardHeight","computedActiveItemIndex","computedMediaAlign","memoizedTheme","textResolver","memoizedButtonTexts","memoizedClassNames","memoizedFontSizes","googleFontsConfig","memoizedMediaSettings","memoizedSemanticTags","memoizedSlideShowType","contextValue","useTimelineContext","context","useContext","useTimelineStaticConfig","useTimelineMemoizedObjects","classnames","hasOwn","classes","arg","appendClass","parseValue","newClass","cls","classnamesExports","useNewScrollPosition","newOffset","setNewOffset","computeHorizontalOffset","scrollLeft","clientWidth","pointOffset","pointWidth","contrRight","circRight","isVisible","isPartiallyVisible","leftGap","rightGap","computeVerticalOffset","scrollTop","clientHeight","contentOffset","contentHeight","contrBottom","circBottom","nOffset","notVisible","computeNewOffset","parent","scroll","useSlideshowProgress","slideShowRunning","activeTimelineItem","isPaused","setIsPaused","lastActiveItem","pauseProgress","resumeProgress","toPrimitive","toPropertyKey","_defineProperty","ownKeys","_objectSpread2","mapValues","input","result","_key","shouldApplyCompound","compoundCheck","selections","defaultVariants","_selections$key","createRuntimeFn","config","runtimeFn","className","variantName","_selections$variantNa","variantSelection","selection","selectionClassName","compoundClassName","getVarName","variable","assignInlineVars","varsOrContract","tokens","styles","_vars","varName","hasCustomTheme","computeCssVarsFromTheme","defaultBackground","defaultText","defaultCardBg","defaultMuted","defaultToolbarBg","defaultToolbarBtnBg","defaultToolbarText","defaultButtonBorder","defaultButtonHoverBg","defaultShadow","vars","ArrowDownIcon","jsx","CheckIcon","ChevDownIcon","ChevronDown","React","ChevronLeft","ChevronLeft$2","ChevronRightIcon","ChevronIcon","SvgComponent","LayoutIcon","MaximizeIcon","MaximizeIcon$1","MinimizeIcon","MinimizeIcon$1","MinusIcon","MinusIcon$1","MoonIcon","MoonIcon$1","PlusIcon","PlusIcon$1","StopIcon","jsxs","StopIcon$1","SunIcon","SunIcon$1","ParaIcon","ParaIcon$1","ChevronsLeftIcon","ChevronsRightIcon","ReplayIcon","ReplayIcon$1","Controls","onNext","onPrevious","onFirst","onLast","disableLeft","disableRight","onReplay","slideShowEnabled","onToggleDarkMode","onPaused","flippedHorizontally","canDisableLeft","canDisableRight","handlePause","handlePlay","previousTitle","nextTitle","playOrPauseTile","jumpToLastTitle","jumpToFirstTitle","positionStatus","slideshowStatus","timelineControlContainer","srOnly","navWrapper","Fragment","navItem","navItemDisabled","navButton","navButtonHover","navButtonActive","navButtonFocus","navButtonSvg","getBrowserInfo","userAgent","vendor","useFullscreen","elementRef","isFullscreen","setIsFullscreen","setError","isSupported","doc","element","browserInfo","hasEnabledProperty","hasRequestMethod","hasExitMethod","isSecureContext","getFullscreenElement","enterFullscreen","errorMsg","requestMethod","err","message","exitFullscreen","exitMethod","toggleFullscreen","updateFullscreenState","fullscreenElement","newIsFullscreen","events","errorEvents","handleFullscreenError","handleKeyDown","FullscreenButton","memo","forwardRef","onToggle","disabled","size","ariaLabel","testId","rest","ref","defaultAriaLabel","defaultTitle","buttonAriaLabel","buttonTitle","handleClick","classNameComputed","fullscreenButton","pickDefined","FullscreenControl","targetRef","onEnterFullscreen","onExitFullscreen","onError","errorMessage","ListItem","id","description","onClick","active","selected","selectable","handleOnClick","handleKeyPress","ev","itemClass","listItem","listItemActive","listItemRecipe","checkboxWrapper","checkbox","checkboxSelected","styleAndDescription","titleClass","descriptionClass","List","multiSelectable","listItems","handleItemSelection","startTransition","renderListItem","list","useStableCallback","callback","args","RGB_COLOR_REGEX","RGBA_COLOR_REGEX","HSL_COLOR_REGEX","HSLA_COLOR_REGEX","detectColorFormat","adjustRGBOpacity","opacity","adjustHSLOpacity","useOutsideClick","el","eventType","preventDefault","stopPropagation","excludeRefs","stableCallback","lastEnabled","refs","allRefs","target","listenerOptions","useKeyHandler","keys","keyCodes","metaKey","ctrlKey","altKey","shiftKey","keyArray","keyCodeArray","handleKey","keyMatch","keyCodeMatch","useEscapeKey","useCloseClickOutside","MemoizedContent","popoverReducer","action","PopOver","placeholder","width","icon","$isMobile","popoverRef","dispatch","useReducer","horizontalPosition","setHorizontalPosition","popoverPosition","setPopoverPosition","portalContainer","setPortalContainer","updatePortalContainer","fullscreenEl","toggleOpen","closePopover","calculatePopoverPosition","triggerRect","viewportWidth","viewportHeight","popoverWidth","left","horizontalPos","preferredLeft","gap","top","popoverHeight","spaceBelow","spaceAbove","useLayoutEffect","handlePositionUpdate","popoverWrapper","selecter","selecterLabel","selecterIcon","selecterIconOpen","ReactDOM","popoverHolder","popoverHolderRecipe","header","closeButton","CloseIcon","PopOver$1","LayoutSwitcher","onUpdateTimelineMode","isMobile","LayoutIconMemo","activeTimelineMode","layoutOptions","verticalItems","horizontalItems","QuickJump","activeItem","onActivateItem","ArrowDownIconMemo","ChangeDensity","onChange","selectedDensity","ParaIconMemo","getTextFromNode","TimelineToolbar","onRestartSlideshow","totalItems","onActivateTimelineItem","onUpdateTextContentDensity","searchQuery","onSearchChange","onClearSearch","onNextMatch","onPreviousMatch","totalMatches","currentMatchIndex","onSearchKeyDown","searchInputRef","timelineRef","onFullscreenError","stickyToolbar","quickJumpItems","isLeftDisabled","isRightDisabled","hideExtraControls","canShowDensity","handleInputChange","handleSearchInputBlur","relatedTarget","handleClearSearch","handleSearchKeyDown","disableSearchNav","searchInfoId","veToolbarWrapper","veNavigationGroup","veSearchGroup","hideOnMobile","veSearchWrapper","veSearchInput","veSearchButton","veSearchButtonIcon","veSearchControls","veSearchInfo","ChevronRight","veActionGroup","veExtraControls","modeString","getSearchableText","elementProps","validateVideoUrl","parsedUrl","hostname","pauseVideoEmbeds","iframe","src","validation","targetOrigin","toggleMediaVisibility","ele","findTimelineElement","itemId","timelineMode","portalId","elementId","targetElement","useTimelineSearch","onTimelineUpdated","handleTimelineItemClick","setSearchQuery","searchResults","setSearchResults","setCurrentMatchIndex","searchTimeoutRef","isFirstSearchRef","onTimelineUpdatedRef","handleTimelineItemClickRef","searchableContent","textParts","focusSearchInput","forceRefocus","length","findMatches","trimmedQuery","queryLower","results","maxResults","firstResult","firstMatchData","delay","debouncedSearch","handleSearchChange","clearSearch","preservePosition","firstItem","navigateMatches","direction","nextIndex","newTimelineIndex","matchData","handleNextMatch","handlePreviousMatch","useTimelineKeyboardNavigation","hasFocus","DEFAULT_SCROLL_DURATION","easeInOutQuart","smoothScrollTo","container","targetPosition","duration","isHorizontal","onComplete","startPosition","distance","startTime","animateScroll","currentTime","elapsed","progress","easedProgress","newPosition","useTimelineScrolling","scrollTimeoutRef","lastScrollTarget","clearLastTargetTimeoutRef","forceScroll","isVerticalMode","containerRect","elementRect","targetScrollTop","targetScrollLeft","useTimelineItemNavigation","timelineId","scrollToElement","stableOnTimelineUpdated","itemsMap","map","findTargetElement","verticalItemRow","cardContent","row","anyElement","cardElement","timelinePointElement","updateTimelinePosition","targetIndex","isSlideShow","syncActiveItemIndex","newIndex","wrapper","handleTimelineItemElapsed","currentIndex","nextItemId","firstItemId","useTimelineNavigation","isKeyboardNavigation","stableOnNext","stableOnPrevious","stableOnFirst","stableOnLast","handleNext","targetItem","handlePrevious","prevIndex","handleFirst","handleLast","lastIndex","handleKeySelection","MODE_MAPPINGS","useTimelineMode","initialMode","updateHorizontalAllCards","setTimelineMode","stableUpdateHorizontalAllCards","handleTimelineUpdate","newMode","mappedMode","throttle","limit","inThrottle","lastArgs","useTimelineScroll","scrollEndThrottleMs","onNextItem","onPreviousItem","timelineMainRef","horizontalContentRef","setNewOffsetRef","onScrollEndRef","onNextItemRef","onPreviousItemRef","handleScroll","throttledScrollHandler","scrolled","threshold","handleMainScroll","useTimelineMedia","itemSelector","observerOptions","onIntersect","observer","observedElements","handleIntersection","entries","entry","createObserver","defaultOptions","observerInstance","elem","cleanup","FONT_WEIGHT_MAP","normalizeFontWeight","weight","generateGoogleFontsUrl","fontFamily","weights","display","weightSet","numericWeight","suffix","weightsParam","loadGoogleFonts","reject","fontUrl","link","preconnect","preconnectStatic","generateFontCssVars","cssVars","elementType","elementConfig","prefix","FontProvider","googleFonts","fontLoaded","setFontLoaded","fontError","setFontError","property","containerStyle","TimelineItemTitle","align","classString","TITLE_CLASS","cardTitleRecipe","titleWrapper","titleActive","useTimelineCard","autoScroll","iconChild","circleRef","wrapperRef","contentRef","circle","circleOffsetLeft","wrapperOffsetLeft","modeLower","containerClass","circleClass","canShowTimelineContent","TimelinePoint","usingIcon","shapeWrapper","timelinePoint","shallowEqual","obj1","obj2","keys1","keys2","arrayEqual","arr1","arr2","item1","item2","mediaEqual","media1","media2","useSlideshow","slideShowActive","onElapsed","timerRef","rafRef","startWidth","setStartWidth","paused","setPaused","slideShowElapsed","remainInterval","setRemainInterval","isRunning","cleanupTimer","handleTimerComplete","setupTimer","interval","endTime","animationStep","tryPause","tryResume","remainingInterval","calculateTextContentSize","scrollHeight","useCardSize","containerRef","detailsRef","dimensions","setDimensions","measurementsCache","rafId","isUnmounted","detailsEle","updateCardSize","node","offsetHeight","offsetTop","containerHeight","cardActualHeight","detailsHeight","textContentLarge","cache","useFocusManager","shouldFocus","isActive","preventScroll","restoreFocus","previousFocusRef","hasRestoredRef","focusOptions","useMediaLoad","onMediaStateChange","loadFailed","setLoadFailed","mediaLoaded","setMediaLoaded","handleMediaLoaded","handleError","useYouTubeDetection","useToggleControls","expandDetails","setExpandDetails","showText","setShowText","toggleExpand","prev","toggleText","useViewOptions","detailsText","canShowTextMemo","canShowTextContent","canExpand","gradientColor","canShowGradient","getCardHeight","LazyErrorMessage","VideoPlayer","videoRef","cardVideo","YoutubePlayer","iframeVideo","ImageDisplay","imageFit","imageWrapper","cardImage","imageVisible","imageHidden","imageRounded","MediaContent","media","isYouTube","TitleMemoComponent","dir","fontSize","Tag","titleStyles","TitleMemo","ExpandButton","button","buttonIcon","ShowHideTextButton","ButtonWrapper","buttonWrapper","ShowOrHideTextButtonMemo","show","label","ExpandButtonMemo","expanded","onExpand","SubTitleMemo","padding","subtitleStyles","useBackground","format","useMeasure","onMeasure","measure","useMeasureHeight","onRender","arePropsEqual","DetailsTextMemo","expand","Text","background","measureRef","detailsTextWrapper","ContentDisplayComponent","onDetailsTextRef","moreRef","isMinimized","setIsMinimized","toggleMinimize","mediaDetailsWrapper","mediaDetailsAbsolute","mediaDetailsCard","mediaDetailsGradient","mediaDetailsMinimized","mediaDetailsMaximized","gradientVar","cardMediaHeader","textOverlayButton","ContentDisplay","CardMedia","slideshowActive","height","mediaWrapper","justifyEnd","justifyStart","prevProps","nextProps","ContentFooter","showMore","textContentIsLarge","showReadMore","canShow","buttonClassName","iconWrapperClassName","canShowMore","showMoreButton","chevronIconWrapper","ContentHeader","cardTitle","isNotMedia","timelineCardHeader","renderTextArray","detailedText","cardTextClassName","timelineSubContent","getTextOrContent","timelineContent","TextOrContent","isTextArray","shouldNotShowText","getTextContent","getTextContentProps","textContent","renderDetailedContent","textContentProps","timelineContentDetails","DetailsText","customContent","contentDetailsClass","TextContent","contentDetailsWrapper","NestedTimelineCards","containerStyles","centerLineStyles","itemWrapperStyles","cardContainerStyles","getDetailsStyles","linkStyles","NestedTimelineRenderer","TimelineCardContent","onShowMore","flip","branchDir","isNested","focusable","setShowMore","progressRef","isFirstRender","hasBeenActivated","setHasBeenActivated","isResuming","setIsResuming","canShowProgressBar","canShowReadMore","canShowNestedTimeline","canShowDetailsText","handleMediaState","handleCardClick","point","toggleShowMore","triangleDir","accessibleLabel","detailsTextComponent","cardMinHeight","baseCard","itemContentWrapper","nestedTimelineWrapper","TimelineCardPortal","cardSubtitle","cardDetailedText","wrapperId","handleOnShowMore","Content","veCardWrapper","renderedPortal","TimelineCard","formattedDetailedText","timelinePointProps","TimelineHorizontal","handleItemClick","iconChildren","propMode","contextMode","wrapperClass","listRef","activeId","activePoint","iconChildColln","timelineItems","timelineItemWrapper","timelineHorizontalWrapper","onActive","contextDisableClickOnCircle","contextDisableInteraction","contextDisableAutoScrollOnClick","finalDisableClickOnCircle","finalDisableInteraction","finalDisableAutoScrollOnClick","canInvokeOnActive","clickHandlerProps","timelinePointLabel","timelinePointWrapper","timelinePointContainer","veShape.shape","VerticalItem","alternateCards","contentDetailsChildren","visible","calculateCardWidth","calculateJustifyContent","calculateCardOrder","calculateTitleOrder","calculatePointOrder","handleOnActive","offset","handleShowMore","titleConfig","titleClassName","timelineTitleWrapper","Title","verticalItemClass","contentClass","TimelinePointMemo","canShowTitle","accessibleTitle","verticalItemWrapper","verticalItemWrapperNested","timelineCardContentWrapper","timelineCardContentVisible","TimelineVertical","onOutlineSelection","wrapperOffset","renderItems","itemClassName","contentDetails","customIcon","TimelineVerticalItem","timelineVerticalWrapper","TimelineView","outlineStyle","TimelineView$1","Timeline","onItemSelected","setHasFocus","setIsKeyboardNavigation","isToolbarNavigation","setIsToolbarNavigation","keyboardTimeoutRef","handleFullscreenChange","isCurrentlyFullscreen","newOffSet","handleTimelineItemClickInternal","handleNextInternal","handlePreviousInternal","handleFirstInternal","handleLastInternal","cardContainer","verticalRow","ve.wrapper","canShowToolbar","evt","handleFocus","handleBlur","card","cardRect","contentRect","cardLeft","contentWidth","contentLeft","wrapperHeight","themeCssVars","searchWidthVars","darkThemeClass","lightThemeClass","ve.toolbarContainer","_error","ve.mainWrapper","ve.contentRenderer","Timeline$1","TimelineErrorBoundary","Component","errorInfo","errorBoundaryContainer","errorTitle","retryButton","toReactArray","convertToLegacyProps","data","mapNewModeToLegacy","mapNewCardPositionToLegacy","mapNewSlideshowTypeToLegacy","Chrono","inputProps","validationResult","allowDynamicUpdate","animation","timeLineItems","setTimeLineItems","timeLineItemsRef","setSlideShowActive","setActiveTimelineItem","previousActiveItemIndexRef","itemsHashRef","processedItemsCache","initItems","lineItems","hasNestedItems","subItem","itemLength","updateItems","createItemsHash","date","_items","newItems","currentHash","previousItemsLength","isDynamicUpdate","actvTimelineIndex","restartSlideShow","handleOnNext","newTimeLineItem","handleOnPrevious","idx","handleOutlineSelection","iconChildArray"],"mappings":"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","x_google_ignoreList":[1,2,3,4,5,6,7,8,9,10,14,15,22,25,26,27]}